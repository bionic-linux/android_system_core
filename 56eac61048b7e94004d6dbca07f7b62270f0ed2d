{
  "comments": [
    {
      "key": {
        "uuid": "37a21512_9581a3ec",
        "filename": "liblog/log_is_loggable.c",
        "patchSetId": 5
      },
      "lineNbr": 262,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2016-03-13T15:13:58Z",
      "side": 1,
      "message": "Similar to what\u0027s done in places like system/core/init and system/core/adb, you could make this a compile time setting. This would avoid the code complexity and performance costs.\n\n  ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))\n  LOCAL_CFLAGS +\u003d -DLOG_DEBUGGABLE\u003d1\n  else\n  LOCAL_CFLAGS +\u003d -DLOG_DEBUGGABLE\u003d0\n  endif\n\nand\n\nLIBLOG_HIDDEN int __android_log_is_debuggable() {\n  return LOG_DEBUGGABLE;\n}\n\nThis would also solve early boot problems where the property space may not be initialized.",
      "revId": "56eac61048b7e94004d6dbca07f7b62270f0ed2d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "37a21512_b835b62e",
        "filename": "liblog/log_is_loggable.c",
        "patchSetId": 5
      },
      "lineNbr": 262,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2016-03-14T14:42:20Z",
      "side": 1,
      "message": "Thanks for pointing them out ... The fundamental difference is that we have a library here, and those are executables. What makes it worse, is this library is included by _everyone_. My concern was causing a rebuild of the library between userdebug and user builds. For this, there is no precedence.\n\nHowever, if there is a case to be made, by making sure __android_log_is_debuggable() is not part of the object module that switches paths, leaving the dead code, the library will not change shape between one and the other. The risk that remains is that if this library changes a timestamp, then _everything_ in the system gets rebuilt.\n\nFor any minor changes I make to liblog, relinking libraries, executables _and_ dex2oat is done on _everything_; my dev cycle must use mmma system/code/liblog followed by an adb sync to get around it to shorten.",
      "parentUuid": "37a21512_9581a3ec",
      "revId": "56eac61048b7e94004d6dbca07f7b62270f0ed2d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}