{
  "comments": [
    {
      "key": {
        "uuid": "05487277_c32e9667",
        "filename": "metricsd/Android.mk",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "Preserve the ordering if possible",
      "range": {
        "startLine": 32,
        "startChar": 2,
        "endLine": 32,
        "endChar": 36
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "253496db_6cc35bb2",
        "filename": "metricsd/metrics_collector.h",
        "patchSetId": 2
      },
      "lineNbr": 77,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "We should not need this.\nIf we want to call ProcessUserCrash from another place, we should make it public.",
      "range": {
        "startLine": 77,
        "startChar": 15,
        "endLine": 77,
        "endChar": 48
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "454eea83_e55ab6fd",
        "filename": "metricsd/metricscollectorservice_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "nit: Wrong include order",
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e55fde25_10b50ca4",
        "filename": "metricsd/metricscollectorservice_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1004277
      },
      "writtenOn": "2015-12-09T21:08:23Z",
      "side": 1,
      "message": "Presumably this should also change to assert abort, just like metricsd service -- although metrics_collector could continue to handle weave events via D-Bus without this binder service, that\u0027s eventually slated to move to this interface as well.",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 38,
        "endChar": 71
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65984e34_9e181d5d",
        "filename": "metricsd/metricscollectorservice_impl.h",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "The convention is to separate the words with _, do you mind renaming the files?",
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65984e34_de8305bc",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "Missing a Copyright notice",
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6553ee27_46cab274",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "the headers are in the wrong order I think. It should be\n\nassociated header,\ngeneric c++ header\nlocal header files.\n\nhttps://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 5,
        "endChar": 17
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e55fde25_eacde7e0",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "This is to avoid mentionning MetricsCollector in the .h?",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 9
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "254d7687_e7af5ca3",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1004277
      },
      "writtenOn": "2015-12-09T19:24:03Z",
      "side": 1,
      "message": "Yes... I\u0027ll try a forward declaration and see if that avoids these problems here.",
      "parentUuid": "e55fde25_eacde7e0",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 9
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "855c6237_67c5b264",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "does the void* avoid rtti problems?",
      "range": {
        "startLine": 13,
        "startChar": 4,
        "endLine": 13,
        "endChar": 27
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6553ee27_692b4175",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1004277
      },
      "writtenOn": "2015-12-09T19:24:03Z",
      "side": 1,
      "message": "yeah, let me try a forward declare.  Since the old code did the same cast from a DBus callback void*, I figured I\u0027d drop this in as a replacement, but, ugh.",
      "parentUuid": "855c6237_67c5b264",
      "range": {
        "startLine": 13,
        "startChar": 4,
        "endLine": 13,
        "endChar": 27
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "855c6237_0751560b",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "This will not be thread safe and you may corrupt the state of metrics_collector.\n\nIt may be simpler to post a task to MetricsCollector\u0027s main loop and have the work done there synchronously.\nAnother option is to remove the other thread and add a binder watcher that integrates the binder service with the main loop (see brillo/binder_watcher.cc in libbrillo).\nThis would allow us to process everything (timers, binder oneway calls, weave calls) synchronously without having to worry about multithreading.",
      "range": {
        "startLine": 25,
        "startChar": 22,
        "endLine": 25,
        "endChar": 38
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e55fde25_cd323dea",
        "filename": "metricsd/metricscollectorservice_trampoline.cc",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1004277
      },
      "writtenOn": "2015-12-09T19:24:03Z",
      "side": 1,
      "message": "OK, I had assumed the old D-Bus stuff did everything using a thread pool, including the stuff it still needs to do, but sounds like that\u0027s not correct, and part of this change also needs to handle both Binder and D-Bus callbacks in a single thread / main loop.",
      "parentUuid": "855c6237_0751560b",
      "range": {
        "startLine": 25,
        "startChar": 22,
        "endLine": 25,
        "endChar": 38
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "454eea83_65ec867c",
        "filename": "metricsd/metricscollectorservice_trampoline.h",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "Can you forward declare it ?\nThat would avoid actually including the header here",
      "range": {
        "startLine": 35,
        "startChar": 5,
        "endLine": 35,
        "endChar": 22
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "253496db_acd7036d",
        "filename": "metricsd/metricscollectorservice_trampoline.h",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1076133
      },
      "writtenOn": "2015-12-09T18:19:54Z",
      "side": 1,
      "message": "nits: use the explicit keywords.\nThis is the rule for single arguments constructors",
      "range": {
        "startLine": 36,
        "startChar": 2,
        "endLine": 36,
        "endChar": 35
      },
      "revId": "e094291ae806906ad35f3636ed0678e89c4ed577",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}