{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "dd24cefc_45cd41b5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 9,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-27T08:18:51Z",
      "side": 1,
      "message": "Add \"Test:\" line.\n\nThe test I\u0027m thinking is to see if updating an apex with a service running works as expected. Can you think of how to test the case where a service from apex is not killable?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 3
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d6b458c_1e455433",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 9,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-07-28T06:06:34Z",
      "side": 1,
      "message": "Yes. I am writing tests for this topic.I won\u0027t merge the topic without tests",
      "parentUuid": "dd24cefc_45cd41b5",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 3
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63d6313f_85a8e5cc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 9,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-28T06:32:54Z",
      "side": 1,
      "message": "Cool!",
      "parentUuid": "7d6b458c_1e455433",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 3
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46bee2fb_18ef4d8f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 9,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-08-16T16:21:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "63d6313f_85a8e5cc",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 3
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42131824_88ddbe30",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 447,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-27T08:18:51Z",
      "side": 1,
      "message": "ApexService might be misread as \"apexservice\" (which is the service exposed by apexd). How about renaming it to \"StopServicesFromApex(..)\"",
      "range": {
        "startLine": 447,
        "startChar": 11,
        "endLine": 447,
        "endChar": 27
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc146098_141c6165",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 447,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-07-28T06:06:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "42131824_88ddbe30",
      "range": {
        "startLine": 447,
        "startChar": 11,
        "endLine": 447,
        "endChar": 27
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9350ceb0_e7de5b4f",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 451,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-27T08:18:51Z",
      "side": 1,
      "message": "If you want to keep this behavior (\"prevent a service from starting\"), then we can put a flag in a `Service` instead of a sysprop. Daniel added this prop for apexd to control the behavior. But now we\u0027re in \"init\". No need to introduce properties.",
      "range": {
        "startLine": 451,
        "startChar": 0,
        "endLine": 451,
        "endChar": 71
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71bcb812_1538900a",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 451,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-07-28T06:06:34Z",
      "side": 1,
      "message": "Ack. Let me think about it.",
      "parentUuid": "9350ceb0_e7de5b4f",
      "range": {
        "startLine": 451,
        "startChar": 0,
        "endLine": 451,
        "endChar": 71
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe7200ce_90e6167c",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 451,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-07-28T22:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "71bcb812_1538900a",
      "range": {
        "startLine": 451,
        "startChar": 0,
        "endLine": 451,
        "endChar": 71
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1b7359d_728b09ae",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 451,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-08-16T17:29:17Z",
      "side": 1,
      "message": "Thanks Deyao. But I\u0027m not still convinced to the idea of \"pause_restart\". I can think of two cases: a) automatic restart on exit and b) explicit start from other process via sysprop like `ctl.[interface_]start`.\n\nFor a), from reading code (`Service::Terminate/Stop`), it sets `flags_ |\u003d SVC_DISABLED;` and disabled services are not restarted automatically. https://cs.android.com/android/platform/superproject/+/master:system/core/init/service.cpp;l\u003d308;drc\u003d2d579af880afae96239c80765b11c7dbc2c1b264\n\nFor b), since services are about to be removed from the `ServiceList` (aosp/2162760), `ctl.start` will fail. (https://cs.android.com/android/platform/superproject/+/master:system/core/init/init.cpp;l\u003d550;drc\u003d2d579af880afae96239c80765b11c7dbc2c1b264)\n\nDeyao, can you find another case which needs \"pause_restart\"?",
      "parentUuid": "fe7200ce_90e6167c",
      "range": {
        "startLine": 451,
        "startChar": 0,
        "endLine": 451,
        "endChar": 71
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef9c8735_55960d29",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 459,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-27T08:18:51Z",
      "side": 1,
      "message": "0ms?",
      "range": {
        "startLine": 459,
        "startChar": 68,
        "endLine": 459,
        "endChar": 87
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd5943c1_68b25922",
        "filename": "init/init.cpp",
        "patchSetId": 11
      },
      "lineNbr": 459,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-07-28T06:06:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef9c8735_55960d29",
      "range": {
        "startLine": 459,
        "startChar": 68,
        "endLine": 459,
        "endChar": 87
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9dee89d5_71ae06b9",
        "filename": "init/service.h",
        "patchSetId": 11
      },
      "lineNbr": 145,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-27T08:18:51Z",
      "side": 1,
      "message": "To be honest, I googled it \"file_name\" and \"filename\" for accessor here. ;-) It seems that both are accepted but the latter one (as a single word) is getting used more.\n\nHow about GetFilename()?",
      "range": {
        "startLine": 145,
        "startChar": 23,
        "endLine": 145,
        "endChar": 32
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "af2071a2_2a6484bb",
        "filename": "init/service.h",
        "patchSetId": 11
      },
      "lineNbr": 145,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-07-28T06:06:34Z",
      "side": 1,
      "message": "The style is not very consistent in system/core. Look like we try to use filename() for public function and GetFileName() for private. I will change to filename one word",
      "parentUuid": "9dee89d5_71ae06b9",
      "range": {
        "startLine": 145,
        "startChar": 23,
        "endLine": 145,
        "endChar": 32
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2c955793_f57eb158",
        "filename": "init/service.h",
        "patchSetId": 11
      },
      "lineNbr": 145,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-28T06:32:54Z",
      "side": 1,
      "message": "Agreed. Looking in system/core, I can sense the long journey ;-)",
      "parentUuid": "af2071a2_2a6484bb",
      "range": {
        "startLine": 145,
        "startChar": 23,
        "endLine": 145,
        "endChar": 32
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0db2f9bd_2f0ff4b6",
        "filename": "init/service_list.h",
        "patchSetId": 11
      },
      "lineNbr": 64,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-07-27T08:18:51Z",
      "side": 1,
      "message": "nit: probably not a big deal, but is_from_apex() here looks redundant.\n\n`GetApexNameFromFileName(svc-\u003efilename()) \u003d\u003d apex_name` should be enough.\n\nOh, if you want to avoid extra \"string\" instances, GetApexNameFromFileName() can be modified to accept/return std::string_view?",
      "range": {
        "startLine": 63,
        "startChar": 16,
        "endLine": 64,
        "endChar": 79
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1472c1c5_3339527c",
        "filename": "init/service_list.h",
        "patchSetId": 11
      },
      "lineNbr": 64,
      "author": {
        "id": 1895890
      },
      "writtenOn": "2022-07-28T06:06:34Z",
      "side": 1,
      "message": "Yes. GetApexNameFromFileName check if the file name start with \"/apex\"",
      "parentUuid": "0db2f9bd_2f0ff4b6",
      "range": {
        "startLine": 63,
        "startChar": 16,
        "endLine": 64,
        "endChar": 79
      },
      "revId": "ce63f86bd0ae1954e84237f7dd1f2b607f8da9cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}