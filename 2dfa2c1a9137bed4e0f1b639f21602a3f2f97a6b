{
  "comments": [
    {
      "key": {
        "uuid": "f6dbe336_3c11082d",
        "filename": "logd/LogTimes.cpp",
        "patchSetId": 1
      },
      "lineNbr": 123,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-08-08T16:07:03Z",
      "side": 1,
      "message": "why wouldn\u0027t you just return NULL?",
      "revId": "2dfa2c1a9137bed4e0f1b639f21602a3f2f97a6b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "16c87774_962dac80",
        "filename": "logd/LogTimes.cpp",
        "patchSetId": 1
      },
      "lineNbr": 123,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2014-08-08T16:30:38Z",
      "side": 1,
      "message": "I choose so to be pedantic about directly calling pthread_exit to be explicit about the paths.\n\npthread_cleanup_push() (and, if memory serves, other historically similar entities) is not what you think it is (I know you know what it is ;-\u003e). It is a (sometimes) dysfunctional block context to pthread_cleanup_pop and is required. However, historically there is a difference in thread locking when processing the cleanup operations within the context of pthread_exit and when pthread_cleanup_pop is called out in the thread just before exit. The alternative is:\n\n    pthread_cleanup_pop();\n    return NULL;\n\nWhich has a difference in atomicity because the thread is still \u0027alive\u0027 until return NULL, but the thread is \u0027dead\u0027 while the cleanup is being called in pthread_exit. Since then I have preferred:\n\n    pthread_exit(NULL);\n    pthread_cleanup_pop();\n    return NULL;\n\nI was bitten by this (circa 2002, port to *all* UNIXii) difference and I am still smarting over it.\n\nI know, this is a decade later, and Linux _or_ Bionic is our target. If you are confident I am holding on to too much history, I\u0027ll relax ...",
      "parentUuid": "f6dbe336_3c11082d",
      "revId": "2dfa2c1a9137bed4e0f1b639f21602a3f2f97a6b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "360c9b77_c13f64f1",
        "filename": "logd/LogTimes.cpp",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-08-08T16:07:03Z",
      "side": 1,
      "message": "likewise.",
      "revId": "2dfa2c1a9137bed4e0f1b639f21602a3f2f97a6b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}