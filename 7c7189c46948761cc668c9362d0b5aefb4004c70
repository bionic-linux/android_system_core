{
  "comments": [
    {
      "key": {
        "uuid": "af770c87_ac180059",
        "filename": "/COMMIT_MSG",
        "patchSetId": 18
      },
      "lineNbr": 31,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-01-30T19:11:09Z",
      "side": 1,
      "message": "Is this true currently?  Blueline and anything with lrap is not system-as-root in the \"kernel mounts system.img as / directly\", but I\u0027m pretty sure / can be mounted as RW.  I think as of Q that is true for all devices.",
      "revId": "7c7189c46948761cc668c9362d0b5aefb4004c70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8bbb2181_e89755c0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 18
      },
      "lineNbr": 31,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-01-31T02:20:48Z",
      "side": 1,
      "message": "Yes. When the dynamic partition is used, / is still ro even after \u0027adb remount\u0027.\n\n$ adb root; adb remount; adb shell\ncrosshatch:/ # cat /proc/self/mountinfo \n...\n22 21 253:0 / / ro,nodev,relatime shared:1 - ext4 /dev/block/dm-0 ro,seclabel,block_validity,delalloc,barrier,user_xattr\n23 22 253:1 / /vendor ro,relatime shared:18 - ext4 /dev/block/dm-1 ro,seclabel,block_validity,delalloc,barrier,user_xattr\n24 22 253:2 / /product ro,relatime shared:20 - ext4 /dev/block/dm-2 ro,seclabel,block_validity,delalloc,barrier,user_xattr\n...\n1902 22 0:33 / /system rw,relatime shared:36 - overlay overlay rw,seclabel,lowerdir\u003d/system,upperdir\u003d/mnt/scratch/overlay/system/upper,workdir\u003d/mnt/scratch/overlay/system/work,override_creds\u003doff\n2097 23 0:34 / /vendor rw,relatime shared:37 - overlay overlay rw,seclabel,lowerdir\u003d/vendor,upperdir\u003d/mnt/scratch/overlay/vendor/upper,workdir\u003d/mnt/scratch/overlay/vendor/work,override_creds\u003doff\n2154 24 0:35 / /product rw,relatime shared:38 - overlay overlay rw,seclabel,lowerdir\u003d/product,upperdir\u003d/mnt/scratch/overlay/product/upper,workdir\u003d/mnt/scratch/overlay/product/work,override_creds\u003doff\n\n/system, /vendor, /product are rw, but / isn\u0027t.\n\ncrosshatch:/ # touch /system/foo\ncrosshatch:/ # touch /foo\ntouch: \u0027/foo\u0027: Read-only file system",
      "parentUuid": "af770c87_ac180059",
      "revId": "7c7189c46948761cc668c9362d0b5aefb4004c70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f342f77_90be5dc5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 18
      },
      "lineNbr": 44,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-01-30T19:11:09Z",
      "side": 1,
      "message": "Quick question since I don\u0027t see it explicitly stated: when sync\u0027ing a new bionic, is that new bionic is used for both the boot strap bionic and the default bionic or only one of the two?  I assume both?\n\nI guess even more basic question: what happens when there\u0027s an apex module and I adb sync something in general?  I assume apex knows to no longer override that module, since it would make sense that the develop pushing a new module is specifically intending on that module to be used?",
      "revId": "7c7189c46948761cc668c9362d0b5aefb4004c70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f8309c2_0be9574c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 18
      },
      "lineNbr": 44,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-01-31T02:20:48Z",
      "side": 1,
      "message": "What we update via adb sync is on the system partition. So, it\u0027s bootstrap bionic which is updated and thus affects only the pre-apexd processes.\n\nI am not sure I understood your second question correctly. If you push an *.apex file, it will be used only after apexd re-activates the apex file (usually via rebooting). Until then, the old inode is associated with the loopback device that is mounted at /apex/\u003cname\u003e.",
      "parentUuid": "6f342f77_90be5dc5",
      "revId": "7c7189c46948761cc668c9362d0b5aefb4004c70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d3eea3c_09deb604",
        "filename": "adb/daemon/remount_service.cpp",
        "patchSetId": 18
      },
      "lineNbr": 343,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2019-01-30T15:47:52Z",
      "side": 1,
      "message": "NB: This also needs to be added to the (new) remount _command_ in https://android-review.googlesource.com/c/platform/system/core/+/885532\n\nMaybe _this_ functionality could be _moved_ to libfs_mgr for both to access; AFAIAC it is simple enough to just do it ...",
      "range": {
        "startLine": 343,
        "startChar": 0,
        "endLine": 343,
        "endChar": 33
      },
      "revId": "7c7189c46948761cc668c9362d0b5aefb4004c70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b1d4f2f_576fb2a4",
        "filename": "adb/daemon/remount_service.cpp",
        "patchSetId": 18
      },
      "lineNbr": 343,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-01-30T15:52:22Z",
      "side": 1,
      "message": "sure. will do after this lands.",
      "parentUuid": "4d3eea3c_09deb604",
      "range": {
        "startLine": 343,
        "startChar": 0,
        "endLine": 343,
        "endChar": 33
      },
      "revId": "7c7189c46948761cc668c9362d0b5aefb4004c70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}