{
  "comments": [
    {
      "key": {
        "uuid": "4591623b_6e9c8e77",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapshot.h",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1409599
      },
      "writtenOn": "2019-08-07T23:26:49Z",
      "side": 1,
      "message": "Is it valid to assume that:\n\nif (lock_mode !\u003d LOCK_EX \u0026\u0026 lock_mode !\u003d LOCK_SH) // error\n\nOr are there other possible flags/conditions like:\n- lock_mode \u003d\u003d 0\n- lock_mode \u003d LOCK_{SH,EX} | LOCK_??\n\n?",
      "revId": "a176f47df2055cedf37da20036c1c923cbc3c11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27b3220f_8feba555",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapshot.h",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2019-08-07T23:49:24Z",
      "side": 1,
      "message": "It should either be LOCK_EX or LOCK_SH, since those are the only things we pass in. In theory we could use LOCK_NB someday, but we strip it in OpenFile().",
      "parentUuid": "4591623b_6e9c8e77",
      "revId": "a176f47df2055cedf37da20036c1c923cbc3c11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "313fadf9_9871ab04",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 481,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-07T23:57:24Z",
      "side": 1,
      "message": "No need to LOCK_SH the global lock here?",
      "revId": "a176f47df2055cedf37da20036c1c923cbc3c11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aec721ce_3a70ec73",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 481,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-07T23:58:16Z",
      "side": 1,
      "message": "WriteSnapshotStatus requires LOCK_EX on the global lock, so I am curious why we don\u0027t need a LOCK_SH of the global lock here.",
      "parentUuid": "313fadf9_9871ab04",
      "revId": "a176f47df2055cedf37da20036c1c923cbc3c11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}