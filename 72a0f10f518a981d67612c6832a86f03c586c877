{
  "comments": [
    {
      "key": {
        "uuid": "77fa4f44_42b9d4df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1041813
      },
      "writtenOn": "2020-09-12T01:35:32Z",
      "side": 1,
      "message": "after this change, do you think if we should update the settings in the hikey side:\nhttps://android.googlesource.com/device/linaro/hikey/+/refs/heads/master/ueventd.common.rc#21",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a52280f_05e12034",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2020-09-12T01:37:38Z",
      "side": 1,
      "message": "Yea, we\u0027ll probably want to cleanup the HiKey960/HiKey side.",
      "parentUuid": "77fa4f44_42b9d4df",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "71a25633_e7842da9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2020-09-12T01:38:03Z",
      "side": 1,
      "message": "\u003cDidn\u0027t mean to mark this as resolved\u003e",
      "parentUuid": "6a52280f_05e12034",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da0c8b71_cd7ce09c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-09-14T16:15:37Z",
      "side": 1,
      "message": "Just wondering - what do these paths look like if we don\u0027t have this subsystem section?  Also why not uevent_devname isntead of uevent_devpath?\n\nI\u0027m fine with the change overall, but these subsystem sections tend to diverge us from desktop linux, so we\u0027ll lose compatibility with any tools built for desktop linux.",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "71e6412f_516f4c66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2020-09-14T17:26:48Z",
      "side": 1,
      "message": "As for uevent_devname, I believe this is because we\u0027re just creating the base /dev/dma_heap/ directory (the basename uevent?) not a specific device node.\n\n\nAdditionally this \"/dev/dma_heap/\u003cheapname\u003e\" is same pathname as found w/ dmabuf heaps on  desktop linux as well. So hopefully no divergence here, unless I\u0027m missing something.",
      "parentUuid": "da0c8b71_cd7ce09c",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "87e32fa6_74071c71",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-09-14T17:36:13Z",
      "side": 1,
      "message": "\u003e As for uevent_devname, I believe this is because we\u0027re just creating the base /dev/dma_heap/ directory (the basename uevent?) not a specific device node.\n\nMaybe I need to do a better job of the documentation, but uevent_devname vs uevent_devpath controls the name of the node within the /dev/dma_heap/ directory.  The node name is either the devname from the uevent or basename(\u003cdevpath of the uevent\u003e).  It may be that these happen to be identical for the cases you\u0027ve used so far.\n\n\u003e Additionally this \"/dev/dma_heap/\u003cheapname\u003e\" is same pathname as found w/ dmabuf heaps on  desktop linux as well. So hopefully no divergence here, unless I\u0027m missing something.\n\nInteresting.  Does systemd/etc have a specific rule to handle dma_heap such that the device nodes don\u0027t end up in the root of /dev/?  Maybe I\u0027m just misremembering how desktop linux creates nodes, but I thought they default to the root of /dev/, and this causes divergence with Android that tends to put its nodes in subdirectories.\n\nIn either case, if this puts the nodes in the same place as desktop linux, that\u0027s great.",
      "parentUuid": "71e6412f_516f4c66",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c5db9fb0_f515d4ac",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2020-09-14T18:00:42Z",
      "side": 1,
      "message": "Yes, the driver specifies the path in its devnode name:\n  https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/dma-buf/dma-heap.c#n279\n\nBut without creating the dma_heap dir the the subsystem uevent_devpath, Android doesn\u0027t interpret the node directory path name. Though I can\u0027t recall exactly, I feel like we get \"dev/dma_heap!system\" nodes.",
      "parentUuid": "87e32fa6_74071c71",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4360622e_d9aa34d0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-09-14T18:17:55Z",
      "side": 1,
      "message": "Got it.  So uevent_devname vs uevent_devpath would result in the same, and this subsystem configuration does do the same as desktop linux, so that\u0027s great.",
      "parentUuid": "c5db9fb0_f515d4ac",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f958b86_92f4115a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120612
      },
      "writtenOn": "2020-09-14T19:53:20Z",
      "side": 1,
      "message": "Thanks Tom and John!",
      "parentUuid": "4360622e_d9aa34d0",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20db7cc9_32e0a1f9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120612
      },
      "writtenOn": "2020-09-14T19:55:51Z",
      "side": 1,
      "message": "SGTM too!",
      "parentUuid": "71a25633_e7842da9",
      "revId": "72a0f10f518a981d67612c6832a86f03c586c877",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}