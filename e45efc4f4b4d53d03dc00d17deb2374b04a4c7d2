{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "81f9eeaa_b9d6399d",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-06T15:34:51Z",
      "side": 1,
      "message": "this is terrible...",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5585dfec_e4d00592",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-09-06T16:39:37Z",
      "side": 1,
      "message": "Why is this terrible? I get that it requires a rename everywhere, but IMO it\u0027s preferable to just do the rename than intrude more complexity by making the on-disk name different from the module name. If it was actually difficult to rename everything I see the point, but for most cases it\u0027s been rather straightforward.\n\nThis is also the way it should\u0027ve been done by default. Naming binaries by the name of the script doesn\u0027t really make sense, because you could easily add another source file to the binary later.\n\nWe\u0027ve already done this successfully in cls like aosp/2203416, aosp/2202568, and aosp/2202605.",
      "parentUuid": "81f9eeaa_b9d6399d",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14c95655_03777d06",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-06T16:58:43Z",
      "side": 1,
      "message": "no, i mean \"as a user, having to make up two names for every \u0027prebuilt\u0027 is a PITA\".\n\nlike i said, though, i don\u0027t expect bazel to fix this, so i\u0027ll +2 \"-prebuilt\" or whatever. but not the \"-lib\" i\u0027ve seen people try to use which is just plain wrong, nor _removing_ suffixes which is confusing and error prone.\n\n(i don\u0027t _like_ prebuilt but at least it\u0027s always technically correct :-( )",
      "parentUuid": "5585dfec_e4d00592",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed2ad214_1cf363ec",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-09-06T17:04:05Z",
      "side": 1,
      "message": "I can agree with adding _prebuilt to native code prebuilts. But this one isn\u0027t a prebuilt, it\u0027s a built-from-source module. Yes, the \"building\" process is currently just copying, but if you were to add another source file, or even rewrite this binary in another language like python, then you\u0027d want a filename-agnostic module name.\n\nYou may argue that it doesn\u0027t have multiple source files right now, so there\u0027s no reason for that. But I think it\u0027s best to be consistent across the build system, and not have any file extensions in module names, except maybe with true prebuilts.",
      "parentUuid": "14c95655_03777d06",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "148c5be4_d8408092",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-06T17:09:43Z",
      "side": 1,
      "message": "i think _especially_ for shell scripts, i\u0027d -2 any attempt to grow them --- at that point it\u0027s really time to be thinking about alternatives!\n\n(the python one is a bit weird --- i don\u0027t really use python myself, but i thought folks only tended to use .py when they weren\u0027t doing the whole \"embedded_launcher\" thing?)",
      "parentUuid": "ed2ad214_1cf363ec",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55c56083_da29a4cd",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-09-06T17:15:38Z",
      "side": 1,
      "message": "For python, there are 5 files (11 modules) where the filename ends in .py, and we\u0027ll have to change them to fix this bazel issue:\n\nhttps://source.corp.google.com/search?q\u003dp:%5Eandroid-internal$%20f:Android.bp%20name:%5C%20%5C%22.*%5C.py%5C%22\n\nThere are 178 files where the module name _doesn\u0027t_ end in .py. So not including the filename is already the vastly favored opinion. Which makes sense because many modules contain more than 1 python file, or include python libraries.\n\nhttps://source.corp.google.com/search?q\u003dp:%5Eandroid-internal$%20pcre:yes%20f:Android.bp%20(%3Fm:%5Epython.*%7B%5Cn.*name:%5C%20%5C%22.*%5B%5E.%5D%5B%5Ep%5D%5B%5Ey%5D%5C%22)",
      "parentUuid": "148c5be4_d8408092",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab14d58f_db3c6f2c",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1948227
      },
      "writtenOn": "2022-09-08T19:24:51Z",
      "side": 1,
      "message": "See the other thread, but I am not sure that renaming this file is a horrible idea. Is there a particular user-journey that you\u0027re worried about disrupting?",
      "parentUuid": "55c56083_da29a4cd",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e6be0ab_395af318",
        "filename": "fs_mgr/tests/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-08T21:23:21Z",
      "side": 1,
      "message": "\u003e See the other thread, but I am not sure that renaming this file is a horrible idea. Is there a particular user-journey that you\u0027re worried about disrupting?\n\nthat\u0027s the whole point --- i don\u0027t know who/what has assumptions about this file name. i\u0027m fundamentally against changing any filenames for that reason (because i\u0027ve been burned so many times before), and -- if you value the time you\u0027ll spend be blamed for random stuff you know nothing about -- you should be too :-)\n\n(and even if you don\u0027t value your own time, think about all the poor devils who\u0027ll be trying to work out why their scripts/docs/copy \u0026 paste notes no longer work.)",
      "parentUuid": "ab14d58f_db3c6f2c",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22180eaa_a7501e44",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 1205,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-06T15:34:51Z",
      "side": 1,
      "message": "...and causes these kinds of problems.\n\ni think the \"less awful\" way to do this is to ensure we keep the same on-disk names and just have some kind of common suffix for the module names (like \"-module-name\")?\n\n(at least for the prebuilts, \"-prebuilt\" makes some sense. these ones are harder though. i really wish bazel wasn\u0027t broken like this.)",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36d0170a_00ec6605",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 1205,
      "author": {
        "id": 1948227
      },
      "writtenOn": "2022-09-08T19:24:51Z",
      "side": 1,
      "message": "We held a meeting last week where we determined that renaming files is the path of least resistance here. Partners might be referencing modules in areas that we couldn\u0027t detect, whereas they shouldn\u0027t (usually) be referencing the files in question.",
      "parentUuid": "22180eaa_a7501e44",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25ae5aac_571e49d4",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 1205,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-08T21:23:21Z",
      "side": 1,
      "message": "i claim the opposite is true, and my anecdata is at least as valuable as yours...",
      "parentUuid": "36d0170a_00ec6605",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04590c55_2910614c",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 1205,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-08T21:31:02Z",
      "side": 1,
      "message": "actually, _this change_ proves my anecdata is worth more --- we have at least one example where you had to rewrite code to keep things working. (i\u0027ll ignore the other one over in bootable/recovery, since 1 \u003e 0 already :-) )",
      "parentUuid": "25ae5aac_571e49d4",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "530dd367_fd46286d",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 1205,
      "author": {
        "id": 1948227
      },
      "writtenOn": "2022-09-08T21:51:18Z",
      "side": 1,
      "message": ":) aosp/2212275 has a better way of handling your bootable/recovery apophasis by editing the relevant filegroup. Does that make it 1 - 0.25 or something? \n\nDo you think it\u0027s totally unlikely that the module would be referenced somewhere we can\u0027t see?",
      "parentUuid": "04590c55_2910614c",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b45fced2_1133a500",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 1205,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-08T22:53:00Z",
      "side": 1,
      "message": "\u003e Do you think it\u0027s totally unlikely that the module would be referenced somewhere we can\u0027t see?\n\nsadly, no, i don\u0027t --- there\u0027s certainly a _possibility_. but i think that\u0027s probably a lot rarer, and it also feels \"less legit\" to me. i don\u0027t consider the module names an exported interface in the same way i think files are? (_especially_ executable files. i mean, their name is _literally_ their interface!)\n\ni also think that we\u0027re less likely to be inflicting merge conflicts on partners if we keep the filenames the same. i think their _build_ files (which we have to change anyway) are probably closer to ours than their source files are. they might have changed this .rc file, for example, but they\u0027re way less likely to have needed to touch the corresponding build rules...",
      "parentUuid": "530dd367_fd46286d",
      "revId": "e45efc4f4b4d53d03dc00d17deb2374b04a4c7d2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}