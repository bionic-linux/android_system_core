{
  "comments": [
    {
      "key": {
        "uuid": "94e3fea6_0abedee5",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 1
      },
      "lineNbr": 169,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-07-08T16:04:33Z",
      "side": 1,
      "message": "I wonder what the overhead of having extra tmpfs mounts is.  It wouldn\u0027t be totally unprecedented to have this in /dev.  We already have __properties__ there.\n\nOr if this is related to apex, maybe put it in /apex?\n\nOtherwise this is fine; I\u0027m just wondering if there\u0027s too much overhead to have a tmpfs mount for what\u0027ll likely only ever be 1 (or maybe a few?) files.",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ecfcf32f_fd8fdb82",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 1
      },
      "lineNbr": 169,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-07-11T08:17:10Z",
      "side": 1,
      "message": "I could not find any related early-mounted partition, and expected mounting new tmpfs would not be a big burden. Anyway, as long as /dev can be multi-purpose, I moved target directory to /dev/linkerconfig from init and removed this mount. Probably we can get back to new tmpfs at anytime needed.",
      "parentUuid": "94e3fea6_0abedee5",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fcf5b64_caf028a0",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-07-08T10:20:52Z",
      "side": 1,
      "message": "why not doing this earlier? (i.e. on early-init)",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67dbaf4d_d5a6cfff",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-07-08T16:04:33Z",
      "side": 1,
      "message": "+1 seems too late.  apexd, ueventd, and subcontext init are all launched already at this point.  2nd stage init itself has shared library dependencies, and actually even 1st stage init on most devices too.\n\nI didn\u0027t quite catch from the bug what this is used for.  Maybe it\u0027s okay that these are already launched?",
      "parentUuid": "6fcf5b64_caf028a0",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c04fb7a3_2920c5f6",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-07-09T17:11:03Z",
      "side": 1,
      "message": "Also, maybe I am missing something. Is this reading data from the system partition? Could these be assembled at build time instead? I don\u0027t see anything in the bug.",
      "parentUuid": "67dbaf4d_d5a6cfff",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e47f657a_52dbe126",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-07-11T08:17:10Z",
      "side": 1,
      "message": "I moved this to early-init stage.\n\ntl;dr for this work - This is to generate ld.config.txt during runtime(probably just during init) so we can handle more dynamic stuffs (such as APEX) from linker config file. You can find more details from go/manageable-linker-config",
      "parentUuid": "c04fb7a3_2920c5f6",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e843dd4_7ecaa06c",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-07-11T16:11:33Z",
      "side": 1,
      "message": "I still am missing how this could allow for differences from APEX modules. This is being run before /data is mounted and apexd is started, right?\n\nAlso, as a side note, should we verify this compiles on host?",
      "parentUuid": "e47f657a_52dbe126",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "433aae21_a9e5dabb",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-07-12T03:41:51Z",
      "side": 1,
      "message": "1. I still need to write a design doc, but I will run this again AFTER apexd mounts APEXes so up to date APEX module information can be included in ld.config.txt. \n\n2. I didn\u0027t fully understand what \u0027this compiles on host\u0027 means. Can you please give me more details on this?",
      "parentUuid": "0e843dd4_7ecaa06c",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3cf1b4a7_e3be94a9",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-07-12T17:42:20Z",
      "side": 1,
      "message": "\u003e I didn\u0027t fully understand what \u0027this compiles on host\u0027 means. Can you please give me more details on this?\n\nI think the big question here, which I think jiyong@ asked too, is what are the inputs to linkerconfig?  Is it only using information from the system image?  In which case, why isn\u0027t it running on the host instead of during boot.",
      "parentUuid": "433aae21_a9e5dabb",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "540f9904_d6e78bf7",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-07-12T17:58:25Z",
      "side": 1,
      "message": "re compiles on host: see assemble_vintf/host_init_verifier for examples\n\nFrom what I understand after reading here and in other bugs, this is only system things now, and any future developments are predicated on jiyong\u0027s soft reboot design?",
      "parentUuid": "3cf1b4a7_e3be94a9",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a5cb1e6_d1629ccf",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-07-13T00:43:33Z",
      "side": 1,
      "message": "This linkerconfig will not only dependent to system image because\n\n1. Will load VNDK related properties based on ro.vendor.version\n - No need to include multiple ld.config.\u003cversion\u003e.txt\n2. Will load APEXes information after APEX is mounted (for processes launched after apexd)\n - No need to update system image for ld.config.txt even if new APEX is introduced.\n\nSome more requirements can be found from https://docs.google.com/document/d/1zXDQVn7cuAu55xSqF1q0AZsQDqpHw7s5ZQ_RRKBZZKE/edit#heading\u003dh.mh43estr0gxg",
      "parentUuid": "540f9904_d6e78bf7",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e744bb66_ba5e9230",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-07-13T01:36:01Z",
      "side": 1,
      "message": "Got it; this seems right then.",
      "parentUuid": "6a5cb1e6_d1629ccf",
      "revId": "4e872aa5bd88938a80cf62a617fedfa23e09c744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}