{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f044e615_81a6a2de",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-03-30T11:40:03Z",
      "side": 1,
      "message": "This change itself is good. Now... how should we support building system_ext/etc/selinux/mapping/{ver}.compat.cil?\n\nMaybe it\u0027s time for writing a design?",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14e98350_fb6ec700",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-30T11:56:31Z",
      "side": 1,
      "message": "Can we add a se_filegroup that globs file names of $(SYSTEM_EXT_PRIVATE_SEPOLICY_DIRS)/compat/$(ver)/$(ver).compat.cil\n\nand the concatenated result would be the installed \"system_ext/etc/selinux/mapping/{ver}.compat.cil\"?",
      "parentUuid": "f044e615_81a6a2de",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3a2f1cf_e7e9f46f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-03-30T12:17:26Z",
      "side": 1,
      "message": "It makes sense. So we need a bunch of modules for system_ext, right?\n\n  se_filegroup {\n    name: \"system_ext_30.0.compat.cil_src\",\n    srcs: \"compat/30.0/30.0.compat.cil\",\n  }\n\n  prebuilt_etc {\n    name: \"system_ext_30.0.compat.cil\",\n    // we may want to introduce tagging to se_filegroup\n    src: \":system_ext_30.0.compat.cil_src{.system_ext}\",\n    filename: \"30.0.compat.cil\",\n    system_ext_specific: true,\n    relative_install_path: \"selinux/mapping\",\n  }",
      "parentUuid": "14e98350_fb6ec700",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "517a4dda_c1ef5ba8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-30T12:40:54Z",
      "side": 1,
      "message": "LGTM.\n\n\u003e So we need a bunch of modules for system_ext, right?\n\nYou mean a bunch of modules for 26.0-30.0?",
      "parentUuid": "e3a2f1cf_e7e9f46f",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "877b91e7_a9a36d83",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-03-30T12:56:20Z",
      "side": 1,
      "message": "Yes. Or 30.0 may be enough because system_ext introduced in R?",
      "parentUuid": "517a4dda_c1ef5ba8",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ff10a03_b897c954",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-30T13:10:35Z",
      "side": 1,
      "message": "I think we need all the versions, because we are adding compat policies between S system/system_ext \u003c-\u003e P/Q/R vendor.",
      "parentUuid": "877b91e7_a9a36d83",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd2f4235_80b313cd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-03-30T13:18:56Z",
      "side": 1,
      "message": "Should we consider compatibility between system_ext \u003c-\u003e P/Q vendor? In P/Q devices system_ext partitions doesn\u0027t exist, right?",
      "parentUuid": "0ff10a03_b897c954",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6c159e8c_798522b9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-30T13:24:45Z",
      "side": 1,
      "message": "Yes, because for P/Q vendor, system and system_ext are one and the same. system was split into system+system_ext since R, so for P/Q vendor, system_ext is a part of system. At least that\u0027s how I understand it from the email thread.",
      "parentUuid": "dd2f4235_80b313cd",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87caf0e9_25db5ea2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2021-04-01T05:01:37Z",
      "side": 1,
      "message": "As system_ext and system are bundled together, allowing this in system_ext LGTM.\n\nLet\u0027s see if Jeffv has other thoughts or not.",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba4f479c_bcaaf02a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-04-12T03:28:38Z",
      "side": 1,
      "message": "It\u0027s been pending more than 10 days, so I did +2.",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3d7053b_b3b130cd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-12T06:35:43Z",
      "side": 1,
      "message": "+Jeff, Any comments on this change?",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97da2fd2_3c0fa3c2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-12T06:43:09Z",
      "side": 1,
      "message": "+inseob, Could you do this in b/33691272?",
      "parentUuid": "6c159e8c_798522b9",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c2e94a0_60ccf2ce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-04-12T06:54:00Z",
      "side": 1,
      "message": "I think so, but I\u0027m not sure. Maybe this isn\u0027t directly related to b/33691272?",
      "parentUuid": "97da2fd2_3c0fa3c2",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ccac51da_1d80a496",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-12T07:12:06Z",
      "side": 1,
      "message": "I thought b/33691272 is for any new changes to system/sepolicy/build/soong/? I think generating the compat.cil itself is probably trivial (just need some genrule magic) but the hash changes are more tricky (this part I still not figure out)",
      "parentUuid": "8c2e94a0_60ccf2ce",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19fcdb33_591fbc64",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-04-12T07:25:09Z",
      "side": 1,
      "message": "\u003e I thought b/33691272 is for any new changes to system/sepolicy/build/soong/?\n\nNot actually. The purpose of b/33691272 is to remove system/sepolicy/Android.mk, not to include all Soong changes related to sepolicy.\n\n\u003e I think generating the compat.cil itself is probably trivial (just need some genrule magic) but the hash changes are more tricky (this part I still not figure out)\n\nYeah I agree. Taking a look at Android.mk again, I found that precompiling sepolicy from different versions (new system vs old vendor) is difficult for now. So I think we can leave the hash changes as-is.",
      "parentUuid": "ccac51da_1d80a496",
      "revId": "731d2473dae1245116562bd1867879b351533cee",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}