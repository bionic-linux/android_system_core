{
  "comments": [
    {
      "key": {
        "uuid": "9713d3e5_19cec737",
        "filename": "fs_mgr/fs_mgr_priv_boot_config.h",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-24T17:51:39Z",
      "side": 1,
      "message": "Could we move these paths to being provided on the kernel commandline or from some other location?  That may be more flexible than having hardcoded paths here, especially if we need to add another in the future.  \n\nPerhaps we leave the /proc/device-tree one as a default if nothing is provided on the kernel commandline, but try the commandline provided path first?",
      "revId": "4756b8ba637e64724ff939d9c4c5cb3ec678d4e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3d050f7e_9fb66bf5",
        "filename": "fs_mgr/fs_mgr_priv_boot_config.h",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2017-07-25T14:04:45Z",
      "side": 1,
      "message": "+1\n\nUse kAndroidDtDir as default (so no changes for arm devices).\nFor x86, it can override the default dt_root_path via kernel cmdline. Then get it by:\n\n  std::string dt_root_path;\n  if (!fs_mgr_get_boot_config(\"dt_root_path\", \u0026dt_root_path)) {\n     dt_root_path \u003d kAndroidDtDir;\n  }",
      "parentUuid": "9713d3e5_19cec737",
      "revId": "4756b8ba637e64724ff939d9c4c5cb3ec678d4e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78f0f7c9_ddeb7355",
        "filename": "fs_mgr/fs_mgr_priv_boot_config.h",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1057369
      },
      "writtenOn": "2017-07-25T16:18:39Z",
      "side": 1,
      "message": "Thank you both. I\u0027m happy to make this change.\n\nIn fact I was having a hard time trying to figure out the best way to make the new path variable visible to both init*.cpp and fs_mgr*.cpp. I haven\u0027t found a neat solution yet, since init/ and fs_mgr/ do not seem to share any global state. In the end I think I should at least avoid parsing the kernel cmdline twice, and I\u0027m doing it in init/, which means I can\u0027t use fs_mgr_get_boot_config().\n\nI\u0027ll upload v2 shortly. Please let me know if my solution is acceptable.",
      "parentUuid": "3d050f7e_9fb66bf5",
      "revId": "4756b8ba637e64724ff939d9c4c5cb3ec678d4e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cccc6c01_f8e95183",
        "filename": "init/uevent_listener.cpp",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-24T17:51:39Z",
      "side": 1,
      "message": "Why though?  This seems to be totally wrong.",
      "revId": "4756b8ba637e64724ff939d9c4c5cb3ec678d4e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68197c19_6b018376",
        "filename": "init/uevent_listener.cpp",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1057369
      },
      "writtenOn": "2017-07-25T16:18:39Z",
      "side": 1,
      "message": "We\u0027ll need to root cause this and implement a proper fix. For now I\u0027m moving this hack to a separate patch. But thanks Bo for providing this solution! At least we have a bootable emulator now.",
      "parentUuid": "cccc6c01_f8e95183",
      "revId": "4756b8ba637e64724ff939d9c4c5cb3ec678d4e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "de21b034_d0454e7e",
        "filename": "init/uevent_listener.cpp",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1046320
      },
      "writtenOn": "2017-07-25T22:05:32Z",
      "side": 1,
      "message": "looks like the disk is not partitioned:\ninit: msg: DEVPATH\u003d/devices/a003e00.virtio_mmio/virtio31/block/vdd\ninit: msg: SUBSYSTEM\u003dblock\ninit: msg: MAJOR\u003d254\ninit: msg: MINOR\u003d48\ninit: msg: DEVNAME\u003dvdd\ninit: msg: DEVTYPE\u003ddisk\ninit: msg: NPARTS\u003d0                    // NPART0 is 0\ninit: msg: SEQNUM\u003d706",
      "parentUuid": "68197c19_6b018376",
      "revId": "4756b8ba637e64724ff939d9c4c5cb3ec678d4e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}