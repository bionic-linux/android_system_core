{
  "comments": [
    {
      "key": {
        "uuid": "6879db9f_2f78e213",
        "filename": "init/README.md",
        "patchSetId": 8
      },
      "lineNbr": 176,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-01-27T18:59:44Z",
      "side": 1,
      "message": "We don\u0027t need the \u0027-\u0027 and it would be better to spell out the \u0027w\u0027 and \u0027t\u0027, so \n\n[window\u003d\u003cfatal crash window mins\u003e] [target\u003d\u003cfatal reboot target\u003e]\n\nIt may be good to explicitly write that these parameters can provided in any order, since that\u0027s rare for init parameters.\n\nOtherwise, we may want to think about reusing the `reboot_on_failure` option for this instead of having a target\u003d\u003c\u003e parameter.  I can\u0027t think of any cases where someone would want a separate reboot target if a critical process dies vs if a process dies and returns a failure error code.",
      "revId": "12f8c2770e398e762009e1e6139713e7c9692a2a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b001477a_faa7fe4d",
        "filename": "init/README.md",
        "patchSetId": 8
      },
      "lineNbr": 176,
      "author": {
        "id": 1345812
      },
      "writtenOn": "2020-02-20T11:20:30Z",
      "side": 1,
      "message": "Done for the \"[window\u003d\u003cfatal crash window mins\u003e] [target\u003d\u003cfatal reboot target\u003e]\" part.\n\nFor \"reboot_on_failure\" part, if I understand it correctly (kindly correct me if I don\u0027t), it defines an even more critical service than the regular critical service. The reboot_on_failure defined service reboots the system without retry, once it fails:\n\n    if ((siginfo.si_code !\u003d CLD_EXITED || siginfo.si_status !\u003d 0) \u0026\u0026 on_failure_reboot_target_) {\n        LOG(ERROR) \u003c\u003c \"Service with \u0027reboot_on_failure\u0027 option failed, shutting down system.\";\n        trigger_shutdown(*on_failure_reboot_target_);\n    }\n\nI would still like to leave an opportunity for system_server to retry couple times when system is abnormal.",
      "parentUuid": "6879db9f_2f78e213",
      "revId": "12f8c2770e398e762009e1e6139713e7c9692a2a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbaee4f4_0201efc2",
        "filename": "init/README.md",
        "patchSetId": 8
      },
      "lineNbr": 176,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-02-20T16:21:11Z",
      "side": 1,
      "message": "Ack.  Sounds reasonable to me.",
      "parentUuid": "b001477a_faa7fe4d",
      "revId": "12f8c2770e398e762009e1e6139713e7c9692a2a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba0d95f6_cabfa30f",
        "filename": "init/service_parser.cpp",
        "patchSetId": 8
      },
      "lineNbr": 98,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-01-27T18:59:44Z",
      "side": 1,
      "message": "I\u0027d just use android::base::Split() here.\n\nOr at least make this:\n\nif (it-\u003elength \u003c 3) {\n  return Error() ...\n}\n\nauto key \u003d ...\n\nSo you can reduce a level of indentation and remove the two `continue`s.",
      "revId": "12f8c2770e398e762009e1e6139713e7c9692a2a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0031641f_a88d90d4",
        "filename": "init/service_parser.cpp",
        "patchSetId": 8
      },
      "lineNbr": 98,
      "author": {
        "id": 1345812
      },
      "writtenOn": "2020-02-20T11:20:30Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "ba0d95f6_cabfa30f",
      "revId": "12f8c2770e398e762009e1e6139713e7c9692a2a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}