{
  "comments": [
    {
      "key": {
        "uuid": "5c593058_516bca1f",
        "filename": "libusbhost/usbhost.c",
        "patchSetId": 1
      },
      "lineNbr": 334,
      "author": {
        "id": 1113594
      },
      "writtenOn": "2017-11-10T01:47:29Z",
      "side": 1,
      "message": "If it should be an inotify, why not make it that now?",
      "revId": "3af9e40c66839c72c0e4f52ead0c60f20873560a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f814106_67ff7365",
        "filename": "libusbhost/usbhost.c",
        "patchSetId": 1
      },
      "lineNbr": 334,
      "author": {
        "id": 1247518
      },
      "writtenOn": "2017-11-10T19:26:45Z",
      "side": 1,
      "message": "Changing the caller inotify to trigger this call only on permissions change would still leave a race in this function.  We should have correct code :)\n\nThis change doesn\u0027t change behavior, eliminates a race where a file granted +rw would still be returned as read only, and shortens the sleep interval on the USB plug-in path.",
      "parentUuid": "5c593058_516bca1f",
      "revId": "3af9e40c66839c72c0e4f52ead0c60f20873560a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b8bc441_182336fe",
        "filename": "libusbhost/usbhost.c",
        "patchSetId": 1
      },
      "lineNbr": 334,
      "author": {
        "id": 1113594
      },
      "writtenOn": "2017-11-10T19:32:47Z",
      "side": 1,
      "message": "\u003eChanging the caller inotify to trigger this call only on permissions change would still leave a race in this function.  We should have correct code :)\n\u003eeliminates a race where a file granted +rw would still be returned as read only\n\nCan you describe the race in more detail?",
      "parentUuid": "4f814106_67ff7365",
      "revId": "3af9e40c66839c72c0e4f52ead0c60f20873560a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c1f20e46_4b5a7c9b",
        "filename": "libusbhost/usbhost.c",
        "patchSetId": 1
      },
      "lineNbr": 334,
      "author": {
        "id": 1247518
      },
      "writtenOn": "2017-11-10T21:29:48Z",
      "side": 1,
      "message": "For the previous codepath:\n\nbefore: file exists but this process isn\u0027t file owner\nthread 1, this code: First open attempt fails (eperm)\nthread 2 grants +rw to new owner\nthread 1, this code: Second open attempt (RO) succeeds\n\nfile is returned in read-only mode.",
      "parentUuid": "3b8bc441_182336fe",
      "revId": "3af9e40c66839c72c0e4f52ead0c60f20873560a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}