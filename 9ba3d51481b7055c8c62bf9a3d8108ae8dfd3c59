{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e17df535_aea83509",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1115178
      },
      "writtenOn": "2022-03-24T17:23:36Z",
      "side": 1,
      "message": "+Matthew for Rust code review",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec22349f_25914d60",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-03-24T17:24:04Z",
      "side": 1,
      "message": "add a test, and add that to TEST_MAPPING? (see the existing tests for inspiration.)",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c051ec1_900e8bbf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1019050
      },
      "writtenOn": "2022-03-24T18:30:11Z",
      "side": 1,
      "message": "Is the bug correct? It doesn\u0027t mention anything about tombstoned, and I\u0027m not sure why you are making this change. I think it would be great to rewrite all of tombstoned in rust (it\u0027s small and fairly self contained), but I\u0027m not sure that\u0027s what you are doing.",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "830fd51e_aa90c608",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1380243
      },
      "writtenOn": "2022-03-24T18:53:00Z",
      "side": 1,
      "message": "Shikha can give more background of why this is needed, but my understanding is that as part of the Android Virtualization Framework which she\u0027s working on, the virtualizationservice (which is written in Rust) needs to forward tombstones from VMs to tombstoned on the host. This means that we need a Rust wrapper around the tombstoned client library, which is the title of the bug.",
      "parentUuid": "9c051ec1_900e8bbf",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcf62a03_42d31a3e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1019050
      },
      "writtenOn": "2022-03-24T18:57:05Z",
      "side": 1,
      "message": "Ah, sorry I should have remembered that this work was going on.\n\nUnfortunately, I didn\u0027t read the bug title or I would have remembered that\u0027s what this work is for.\n\nAs a general comment, I thought that you needed to add a subdirs directive to the debuggerd/Android.bp file for this to compile by default, but my build knowledge might be out of date.",
      "parentUuid": "830fd51e_aa90c608",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ac4de41_63063cb4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-03-24T19:32:26Z",
      "side": 1,
      "message": "i think +ccross was saying just the other day that it\u0027s only .mk files that have that \"stop looking\" effect, not .bp files?",
      "parentUuid": "bcf62a03_42d31a3e",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5a88cab4_2fa6e98f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2022-03-24T19:39:44Z",
      "side": 1,
      "message": "Yeah, subdirs was obsoleted a while ago in favor of just parsing everything.",
      "parentUuid": "1ac4de41_63063cb4",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f013fc15_c4a6ac95",
        "filename": "debuggerd/tombstoned/rust/src/lib.rs",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1416371
      },
      "writtenOn": "2022-03-24T20:09:28Z",
      "side": 1,
      "message": "I think I might have used a `RawFd` and an `impl Drop` for this, but this is fine too.",
      "range": {
        "startLine": 33,
        "startChar": 26,
        "endLine": 33,
        "endChar": 71
      },
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9ad2736_419543bc",
        "filename": "debuggerd/tombstoned/rust/src/lib.rs",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1897307
      },
      "writtenOn": "2022-03-25T10:52:27Z",
      "side": 1,
      "message": "We should not rely on text_output_fd \u0026 proto_output_fd being valid after calling ffi::tombstoned_connect_files. So, maybe add if text_output !\u003d -1 \u0026 similar checks for others \u0026 calling File::from_raw_fd only on valid fd\n\nConsider the case when dumptype \u003d\u003d kDebuggerdTombstone,\n\ntombstoned actually checks for dumptype \u0026 DOES NOT SEND tmp_proto_fd if dumptype!\u003d kDebuggerdTombstoneProto (cs/android/system/core/debuggerd/tombstoned/tombstoned.cpp?l\u003d305-310\u0026rcl\u003dHEAD \u0026 cs/android/system/core/debuggerd/tombstoned/tombstoned.cpp?l\u003d378)\n\nSo tomsbstoned_client actually does not receive tmp_proto_fd.  cs/android/system/core/debuggerd/tombstoned/tombstoned_client.cpp?l\u003d68\u0026rcl\u003dHEAD",
      "revId": "9ba3d51481b7055c8c62bf9a3d8108ae8dfd3c59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}