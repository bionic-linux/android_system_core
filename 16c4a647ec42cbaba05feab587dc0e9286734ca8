{
  "comments": [
    {
      "key": {
        "uuid": "022a3442_be08c278",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 52,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-05-30T18:25:31Z",
      "side": 1,
      "message": "You can probably drop this check.  It\u0027s important to ueventd, since for historical reasons, ueventd is built into the same executable as init and therefore can literally access init\u0027s globals, which would have no meaning for it.\n\nHere, since you\u0027re not linking to init.cpp, you\u0027d get an error at linking if you tried to use these symbols, so this check isn\u0027t needed.",
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "932e6076_0a1e2065",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 52,
      "author": {
        "id": 1349653
      },
      "writtenOn": "2019-05-30T20:45:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "022a3442_be08c278",
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfbf5d64_1e678116",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 316,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-05-30T18:25:31Z",
      "side": 1,
      "message": "Why is this code different than service.cpp that only does this when changing uids?\n\n(Thanks for refactoring some of the rest, it\u0027s making it easier to see deltas like this)",
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50ff6d80_dad5b414",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 316,
      "author": {
        "id": 1349653
      },
      "writtenOn": "2019-05-30T20:45:49Z",
      "side": 1,
      "message": "This is different because we are not doing exec() at the end. When exec() is called, the capabilities are changed and init relies on that. Here, without exec(), we need to get the capabilities into what we want right here and that requires a different set of secure bits.",
      "parentUuid": "cfbf5d64_1e678116",
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "40762bc9_f5084c5f",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 320,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-05-30T18:25:31Z",
      "side": 1,
      "message": "Does securebits \u003c 0 work here?  Since it\u0027s unsigned long, I think it won\u0027t work by definition, which is why we check against -1UL.\n\nIn general, I actually prefer checking \u003d\u003d -1 for errors from library functions, unlike the previous comment, since that\u0027s how they\u0027re defined to return.  Though there\u0027s no consistency in init, so I don\u0027t care strongly how you do it.",
      "range": {
        "startLine": 317,
        "startChar": 0,
        "endLine": 320,
        "endChar": 5
      },
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92259d93_12fbc82e",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 320,
      "author": {
        "id": 1349653
      },
      "writtenOn": "2019-05-30T20:45:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "40762bc9_f5084c5f",
      "range": {
        "startLine": 317,
        "startChar": 0,
        "endLine": 320,
        "endChar": 5
      },
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7dd6fa32_7d0d8bf4",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 320,
      "author": {
        "id": 1130394
      },
      "writtenOn": "2019-05-30T20:57:50Z",
      "side": 1,
      "message": "FWIW, \u003c 0 generates better machine code, and for most functions, \u003c\u003d -2 is out-of-spec anyway, so what are you supposed to do?\n\nhttps://gcc.godbolt.org/z/5PmtRn\nhttps://gcc.godbolt.org/z/XDrP4K",
      "parentUuid": "92259d93_12fbc82e",
      "range": {
        "startLine": 317,
        "startChar": 0,
        "endLine": 320,
        "endChar": 5
      },
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9e7b90f_b049a167",
        "filename": "init/nativezygote_server.cpp",
        "patchSetId": 8
      },
      "lineNbr": 320,
      "author": {
        "id": 1349653
      },
      "writtenOn": "2019-05-30T21:01:28Z",
      "side": 1,
      "message": "I think \u003c 0 would be fine if we have compiler warning enabled for comparing unsigned int \u003c 0.",
      "parentUuid": "7dd6fa32_7d0d8bf4",
      "range": {
        "startLine": 317,
        "startChar": 0,
        "endLine": 320,
        "endChar": 5
      },
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7eb8aba8_4e3126e6",
        "filename": "init/service.cpp",
        "patchSetId": 8
      },
      "lineNbr": 947,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-05-30T18:25:31Z",
      "side": 1,
      "message": "Fwiw, using std::for_each() was probably a mistake.  If this code is going to be moved,\n\nfor (const auto\u0026 descriptor : descriptors_) {\n    descriptor-\u003eCreateAndPublish(scon);\n}\n\nWould be much better.",
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "152acbfd_44ebcf3c",
        "filename": "init/service.cpp",
        "patchSetId": 8
      },
      "lineNbr": 947,
      "author": {
        "id": 1349653
      },
      "writtenOn": "2019-05-30T20:45:49Z",
      "side": 1,
      "message": "Done. This was probably before C++11?",
      "parentUuid": "7eb8aba8_4e3126e6",
      "revId": "16c4a647ec42cbaba05feab587dc0e9286734ca8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}