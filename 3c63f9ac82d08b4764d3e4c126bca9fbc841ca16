{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1b3c589a_a0275367",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T00:37:07Z",
      "side": 1,
      "message": "Could you explain a bit further?\n\nI can see that gr_init (from HealthdDraw::Create()) is called earlier, but where are surfaces created? Isn\u0027t it in UpdateScreenState, and we always call HealthdDraw::Create before drawing?",
      "range": {
        "startLine": 9,
        "startChar": 36,
        "endLine": 10,
        "endChar": 44
      },
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0020b9e5_e7a0856c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1941191
      },
      "writtenOn": "2022-05-19T02:09:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b3c589a_a0275367",
      "range": {
        "startLine": 9,
        "startChar": 36,
        "endLine": 10,
        "endChar": 44
      },
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8ef3e71_068d5a65",
        "filename": "healthd/healthd_mode_charger.cpp",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T00:34:34Z",
      "side": 1,
      "message": "Sorry I missed this in the previous review, but\n\n```\nif (healthd_draw_ \u003d\u003d nullptr) return;\n```\n\notherwise you get segfault below",
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84857a3d_b18c30be",
        "filename": "healthd/healthd_mode_charger.cpp",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T00:42:47Z",
      "side": 1,
      "message": "On a second thought, I think you do want to re-init healthd_draw_ here to re-try gr_init, in case a previous failure of gr_init is transient. So please move the initialization of healthd_draw_ to a helper function, then call\n```\nif (healthd_draw_ \u003d\u003d nullptr) InitHealthdDraw();\n```\nhere.",
      "parentUuid": "f8ef3e71_068d5a65",
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "04772bd9_f35f0f33",
        "filename": "healthd/healthd_mode_charger.cpp",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1941191
      },
      "writtenOn": "2022-05-19T02:09:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "84857a3d_b18c30be",
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6116eff1_8bd30ca2",
        "filename": "healthd/healthd_mode_charger.cpp",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T06:09:07Z",
      "side": 1,
      "message": "unresolving since InitHealthdDraw is not called here. This may cause segfault below.",
      "parentUuid": "04772bd9_f35f0f33",
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2c5ebe9_2f6f31bd",
        "filename": "healthd/healthd_mode_charger.cpp",
        "patchSetId": 2
      },
      "lineNbr": 696,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T00:34:34Z",
      "side": 1,
      "message": "nit: this is correct, but IMO it is harder to read (especially L711; that line ensures the loop only executes once, but it is not very intuitive.) How about moving this to a helper function? \n\nOr maybe\n\n```\ndo {\n  if (healthd_draw_ !\u003d nullptr) break;\n  // ...\n} while(false);\n```",
      "range": {
        "startLine": 696,
        "startChar": 0,
        "endLine": 696,
        "endChar": 38
      },
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc321447_4e5208bb",
        "filename": "healthd/healthd_mode_charger.cpp",
        "patchSetId": 2
      },
      "lineNbr": 696,
      "author": {
        "id": 1941191
      },
      "writtenOn": "2022-05-19T02:09:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d2c5ebe9_2f6f31bd",
      "range": {
        "startLine": 696,
        "startChar": 0,
        "endLine": 696,
        "endChar": 38
      },
      "revId": "3c63f9ac82d08b4764d3e4c126bca9fbc841ca16",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}