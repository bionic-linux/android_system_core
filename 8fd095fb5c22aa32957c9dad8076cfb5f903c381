{
  "comments": [
    {
      "key": {
        "uuid": "6a56ed2c_11e660f6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-11-12T17:40:14Z",
      "side": 1,
      "message": "Is this something we can avoid if we have a single super partition for retrofit devices?  That was at least my hope when we went down that path.  The \u0027super partition\u0027 name would end up being system_a or system_b, depending on which slot was used during the retrofit upgrade, but can\u0027t NewForUpdate() just absorb the additional partitions without creating a metadata header?\n\nWe don\u0027t actually need to treat the underlying physical A/B partitions as A/B anymore, right?",
      "revId": "8fd095fb5c22aa32957c9dad8076cfb5f903c381",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4382c529_93c1b122",
        "filename": "fastboot/device/utility.cpp",
        "patchSetId": 1
      },
      "lineNbr": 197,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-11-12T16:28:34Z",
      "side": 1,
      "message": "If a property is needed, I view the system as fragile and complex/nit-picky for bring up, although I recognize property is generally wanted for (solid) determinism.\n\nDiscussed with David any automation/logic to negate the need for a property to be read to determine if the device is in this state, this one is particularly difficult to replace with (simple) logic. So can not happen, but as you see I am not entirely letting sleeping dogs lay :-)\n\nQ: If the property is wrong, does the device turn into a mess?\nA: reflash with a good build ... you get what you pay for\nQ: Can this be turned into an attack vector?\nA: Line 198 below looks after that.\nQ: Once we fix this up, are we no longer a retrofit device, do we need to strike the property?\nA: Line 236 below looks after that.",
      "range": {
        "startLine": 195,
        "startChar": 0,
        "endLine": 197,
        "endChar": 5
      },
      "revId": "8fd095fb5c22aa32957c9dad8076cfb5f903c381",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfd75ccc_38d31b08",
        "filename": "fastboot/device/utility.cpp",
        "patchSetId": 1
      },
      "lineNbr": 215,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-11-12T17:40:14Z",
      "side": 1,
      "message": "Continuing my comment from the commit message: this would in theory always be a single super partition regardless of slot if we had a single large super partition on the retrofit devices.  That does seem to be doable, right?  The bootloader or DT could provide this information?  Or worst case we could probe both slots to see if we can find valid metadata?\n\nSeems more maintainable to me in the long term than supporting two separate metadata headers.  Just my thoughts though, let me know what you think.",
      "revId": "8fd095fb5c22aa32957c9dad8076cfb5f903c381",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b11d45e3_fbc09c0a",
        "filename": "fastboot/device/utility.cpp",
        "patchSetId": 1
      },
      "lineNbr": 235,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-11-12T16:28:34Z",
      "side": 1,
      "message": "nit: to",
      "range": {
        "startLine": 235,
        "startChar": 31,
        "endLine": 235,
        "endChar": 32
      },
      "revId": "8fd095fb5c22aa32957c9dad8076cfb5f903c381",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9137f252_c9406be0",
        "filename": "fastboot/device/utility.cpp",
        "patchSetId": 1
      },
      "lineNbr": 249,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-11-12T16:28:34Z",
      "side": 1,
      "message": "NB: nit: logger is more efficient if messages are joined.\n\n    LOG(WARNING) \u003c\u003c \"This device has been upgraded to dynamic partitions, and will now be updated\"\n248\t\n                 \u003c\u003c \" to use both slots for allocating partition data.\\n\"\n249\t\n                 \u003c\u003c \"This will overwrite the contents of slot \" \u003c\u003c other_slot_suffix \u003c\u003c \".\";",
      "range": {
        "startLine": 247,
        "startChar": 0,
        "endLine": 249,
        "endChar": 92
      },
      "revId": "8fd095fb5c22aa32957c9dad8076cfb5f903c381",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}