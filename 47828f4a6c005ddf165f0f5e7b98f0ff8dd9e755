{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "225b204a_eb76b061",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-17T00:18:43Z",
      "side": 1,
      "message": "`storageproxyd: `...",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0dfeb4b8_8ec303a2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "225b204a_eb76b061",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c37544c5_03a6f1cd",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 524,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2022-11-17T07:55:34Z",
      "side": 1,
      "message": "Newline after `}`",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "728c8489_58e066bd",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 524,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c37544c5_03a6f1cd",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e69e3e5_42a183ef",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 525,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2022-11-17T07:55:34Z",
      "side": 1,
      "message": "I would prefer this define be near the top of the file (with the other defines). Also, although a similar define in the storage service is named `BLOCK_COUNT_MAIN`, that is this value divided by the block size. Here this is a byte count, not a block count. I think we should rename this to something like `MAX_FILE_SIZE` (with a comment that this is the size limit in bytes for backing files on top of a filesystem).",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "be71d7b7_088c3f71",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 525,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5e69e3e5_42a183ef",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8da3d0d_56c44023",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 527,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-17T00:16:40Z",
      "side": 1,
      "message": "This file is mostly using a 80col margin. Can you keep that for the code you are adding?",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3dc143f_5628c437",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 527,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "What do you want me to do here? Leave it as is? Bypass the commit hook (is that even possible?)?",
      "parentUuid": "b8da3d0d_56c44023",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f252d3bd_4bf73946",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 527,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-29T21:33:58Z",
      "side": 1,
      "message": "Leave it as is for now. We need to do a separate reformat CL as we don\u0027t want to have two code styles mixed in the same file.",
      "parentUuid": "e3dc143f_5628c437",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b1ddc3e_4841f802",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 529,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2022-11-17T07:55:34Z",
      "side": 1,
      "message": "Any reason not to just initialize `max_size` to the maximum file size we want to support (`BLOCK_COUNT_MAIN`)? If we can\u0027t read the block device size, we\u0027re not going to send `max_size`.\n\nWe could even initialize and use `resp.size` directly, and not need an extra variable at all. I don\u0027t really have a strong preference about that though.",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "468ef0de_54eaebae",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 529,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "There was no technical reason to not set max_size to MAX_FILE_SIZE. If I\u0027m going to initialize a variable like this, I prefer to initialize it to a harmless value. The compile should generate the same object code either way.\n\nTo be clear, do you want me to make these changes? I have my own preferences, but it\u0027s not my project. My default when someone says \"I don\u0027t really have a strong preference\" is to do it my way.",
      "parentUuid": "1b1ddc3e_4841f802",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a838207c_1681375c",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 543,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-17T00:16:40Z",
      "side": 1,
      "message": "Should we return an error here? Is there any case where fstat fails and it is safe to proceed?",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4d64c1b6_389ed629",
        "filename": "trusty/storage/proxy/storage.c",
        "patchSetId": 1
      },
      "lineNbr": 543,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "You\u0027re right. I\u0027ll fix that. Thanks.",
      "parentUuid": "a838207c_1681375c",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "761f2312_e97dd11b",
        "filename": "trusty/storage/proxy/storage.h",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-17T00:16:40Z",
      "side": 1,
      "message": "can you split this the same way as the other lines here",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "454e5ea3_7d981d08",
        "filename": "trusty/storage/proxy/storage.h",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2022-11-17T07:55:34Z",
      "side": 1,
      "message": "Incidentally we should really reformat all our code here with 100col lines so we won\u0027t have to bypass any pre-upload hooks. Maybe when we move Trusty things to the new repo?",
      "parentUuid": "761f2312_e97dd11b",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a841b7b_c8e41817",
        "filename": "trusty/storage/proxy/storage.h",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-17T19:59:43Z",
      "side": 1,
      "message": "Is there a preupload hook in this repo now that complains about the existing code?",
      "parentUuid": "454e5ea3_7d981d08",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1af3450e_caea175d",
        "filename": "trusty/storage/proxy/storage.h",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2022-11-17T22:14:33Z",
      "side": 1,
      "message": "Yes, although it only checks modified lines. It won\u0027t complain unless you make changes to existing code. I actually tested uploading this line broken at 80col and clang-format complains.",
      "parentUuid": "5a841b7b_c8e41817",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "041e1311_f9609d01",
        "filename": "trusty/storage/proxy/storage.h",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "What do you want me to do here? Leave it as is? Bypass the commit hook (is that even possible?)?",
      "parentUuid": "1af3450e_caea175d",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4eb04ee1_0c6f700f",
        "filename": "trusty/storage/proxy/storage.h",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-29T21:33:58Z",
      "side": 1,
      "message": "Leave it as is for now. We need to do a separate reformat CL as we don\u0027t want to have two code styles mixed in the same file.",
      "parentUuid": "041e1311_f9609d01",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58bb7e9a_9ef6abc7",
        "filename": "trusty/utils/spiproxyd/proxy.rc",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2022-11-17T07:55:34Z",
      "side": 1,
      "message": "This looks unrelated?",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d662cab_e4dcf941",
        "filename": "trusty/utils/spiproxyd/proxy.rc",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2022-11-17T19:59:43Z",
      "side": 1,
      "message": "This is related to adding the block device for the emulator. It should move to a separate CL to make that clear though.",
      "parentUuid": "58bb7e9a_9ef6abc7",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "acb64aa8_138fc0cd",
        "filename": "trusty/utils/spiproxyd/proxy.rc",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1956428
      },
      "writtenOn": "2022-11-29T20:59:25Z",
      "side": 1,
      "message": "The new CL is Ib965a7bdbbfb8dd2ddaec8f899ba9c0f6da4b44e",
      "parentUuid": "0d662cab_e4dcf941",
      "revId": "47828f4a6c005ddf165f0f5e7b98f0ff8dd9e755",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}