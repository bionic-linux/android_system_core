{
  "comments": [
    {
      "key": {
        "uuid": "3c2e03fe_6585dafb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1108565
      },
      "writtenOn": "2019-01-15T00:13:21Z",
      "side": 1,
      "message": "Does this work with \u0027adb push\u0027 too?",
      "revId": "a89cd35450f11996cedc0d949e26f339af6ceaf9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c3920cf_3bb623d7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-01-15T00:26:20Z",
      "side": 1,
      "message": "Yes, push works as well.",
      "parentUuid": "3c2e03fe_6585dafb",
      "revId": "a89cd35450f11996cedc0d949e26f339af6ceaf9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "792cfaac_98b652f1",
        "filename": "adb/daemon/file_sync_service.cpp",
        "patchSetId": 3
      },
      "lineNbr": 427,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2019-01-15T00:41:36Z",
      "side": 1,
      "message": "I believe this leads to a bug in handle_send_file: we don\u0027t open with O_TRUNC and we don\u0027t ftruncate, so if we sync a file that\u0027s shorter than one that\u0027s already there, we leave the stuff at the end of the file that we didn\u0027t overwrite there. I don\u0027t actually recall what the fallback for not being able to unlink was far, maybe pushing to /dev/null as nonroot?\n\n(also, won\u0027t this lead to everything running on the device exploding?)",
      "range": {
        "startLine": 423,
        "startChar": 0,
        "endLine": 427,
        "endChar": 5
      },
      "revId": "a89cd35450f11996cedc0d949e26f339af6ceaf9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85e50ee1_63d82c27",
        "filename": "adb/daemon/file_sync_service.cpp",
        "patchSetId": 3
      },
      "lineNbr": 427,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-01-15T02:12:33Z",
      "side": 1,
      "message": "Thanks for catching this. truncating to zero worked. \n\nI don\u0027t know why we haven\u0027t done ftruncate, but I think truncating is fine for these mountpoints because we will never delete these.",
      "parentUuid": "792cfaac_98b652f1",
      "range": {
        "startLine": 423,
        "startChar": 0,
        "endLine": 427,
        "endChar": 5
      },
      "revId": "a89cd35450f11996cedc0d949e26f339af6ceaf9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}