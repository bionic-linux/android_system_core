{
  "comments": [
    {
      "key": {
        "uuid": "4fe75a82_151f08e0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2018-12-28T08:52:14Z",
      "side": 1,
      "message": "If these two libs are tightly coupled with libc (which I think it is), then wouldn\u0027t it be better to have the two in the runtime APEX? \nAdding cferris@ for this.\n\nI have no idea about libneted_client.so though, but if that is the only case left, we could add the name to the shared libs libs.",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 50
      },
      "revId": "74c5523d09dbb2b3b79d2f461e622820ff5a8af9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3515018_294766c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2018-12-28T09:31:53Z",
      "side": 1,
      "message": "s/shared libs libs/shared libs list/",
      "parentUuid": "4fe75a82_151f08e0",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 50
      },
      "revId": "74c5523d09dbb2b3b79d2f461e622820ff5a8af9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29d68fa5_28110f90",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-01-07T17:08:49Z",
      "side": 1,
      "message": "yeah, seems like it would be a bug to have a new libc without the matching malloc_debug pieces.\n\nas for netd_client, that\u0027s the glue between libc and netd, so probably belongs with one side or the other unless the netd folks have a way to move away from it.",
      "parentUuid": "e3515018_294766c4",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 50
      },
      "revId": "74c5523d09dbb2b3b79d2f461e622820ff5a8af9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb00cd6f_ce02fa9a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-01-08T01:25:44Z",
      "side": 1,
      "message": "OK. I will add the malloc_debug things to the runtime APEX.\n\nAdding lorenzo for libnetd_client.so",
      "parentUuid": "29d68fa5_28110f90",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 50
      },
      "revId": "74c5523d09dbb2b3b79d2f461e622820ff5a8af9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac26e981_6cda23ba",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2019-01-03T18:23:09Z",
      "side": 1,
      "message": "Is it possible to add a test case for this so we don\u0027t break vendors again?",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 18,
        "endChar": 36
      },
      "revId": "74c5523d09dbb2b3b79d2f461e622820ff5a8af9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b80eccf_eb512867",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1014807
      },
      "writtenOn": "2019-01-04T02:17:15Z",
      "side": 1,
      "message": "In general, it is difficult to add a test case to ensure that `ld.config.txt` is properly configured, especially when we don\u0027t know what may be broken by a change to `ld.config.txt` (i.e. we don\u0027t know what to test for before we know what is broken).\n\nTo be specific, it is hard to test `libnetd_client.so` and `libc_malloc_debug.so` either. For the first one, `bionic/libc/bionic/NetdClient.cpp` only prints an error message to logcat and libc will try its best to ignore the error. To exploit this problem, an integration test that is installed to the vendor partition and actually uses the network must be written. For the second one, the feature is only enabled when some system properties (`libc.debug.malloc.*`) are set.  `bionic/libc/bionic/malloc_common.cpp` only prints the error message to logcat when it fails to load the library. And we don\u0027t have an automatic way to know whether `libc_malloc_debug.so` is working properly either.\n\nBoth cases are difficult to test automatically and I feel it does not worth the effort to write integration tests for these.",
      "parentUuid": "ac26e981_6cda23ba",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 18,
        "endChar": 36
      },
      "revId": "74c5523d09dbb2b3b79d2f461e622820ff5a8af9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}