{
  "comments": [
    {
      "key": {
        "uuid": "f521b85d_1262fb42",
        "filename": "fs_mgr/README.overlayfs.md",
        "patchSetId": 10
      },
      "lineNbr": 99,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-12-05T00:15:38Z",
      "side": 1,
      "message": "system_b or system_b + vendor_b + etc?  It looks like the code may only take system_b from my read through it, but why not take the rest of the b slot too?",
      "range": {
        "startLine": 99,
        "startChar": 48,
        "endLine": 99,
        "endChar": 56
      },
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c380f1db_b393a8c1",
        "filename": "fs_mgr/README.overlayfs.md",
        "patchSetId": 10
      },
      "lineNbr": 99,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-12-05T17:00:16Z",
      "side": 1,
      "message": "Do I have to place the engineering reasoning in the document (trying to keep things boiled down)\n\nI could add \"For implementation simplicity, on retrofit dynamic ...\"\n\nIt is using it as a physical partition, not a logical for simplicity. 2.5GB is plenty.\n\nThe code was _much_ simpler doing so rather than having to get init tuned up to read and instantiate _both_ super partitions and then related logical assemblage, arrange to lay down empty retrofit metadata on system_b (that itself may, or may not, have dynamic partitions on it already) enumerating all possible physical targets at runtime, etc etc. It may have been a little bit simpler if we made our own linear target directly as compared to liblp, but the gain still would have been small since system is the elephant for the space.\n\nThis CL does not preclude doing so, but it gets us ready for the first bug against a retrofit device that says adb sync runs out of space way to easily (before this CL, we had roughly 510MB taken from side \"a\" slot free space, with this one it is 5 times larger).",
      "parentUuid": "f521b85d_1262fb42",
      "range": {
        "startLine": 99,
        "startChar": 48,
        "endLine": 99,
        "endChar": 56
      },
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11c236b4_55112580",
        "filename": "fs_mgr/README.overlayfs.md",
        "patchSetId": 10
      },
      "lineNbr": 99,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-12-05T17:46:38Z",
      "side": 1,
      "message": "Sounds good to me.\n\nPart of why I asked was because I was confused from the commit message.  I had taken \"use alternative super\" and especially \"alternate super partition in its entirety\" to imply that it used the entire alternative super, but couldn\u0027t find that code.  I think the comment is fine, but maybe the commit message can be rephrased for posterity?",
      "parentUuid": "c380f1db_b393a8c1",
      "range": {
        "startLine": 99,
        "startChar": 48,
        "endLine": 99,
        "endChar": 56
      },
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4ae2d2e_f6a26379",
        "filename": "fs_mgr/README.overlayfs.md",
        "patchSetId": 10
      },
      "lineNbr": 99,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-12-05T22:05:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "11c236b4_55112580",
      "range": {
        "startLine": 99,
        "startChar": 48,
        "endLine": 99,
        "endChar": 56
      },
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "faa9f30c_e1d2496e",
        "filename": "fs_mgr/fs_mgr_overlayfs.cpp",
        "patchSetId": 10
      },
      "lineNbr": 664,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-12-05T00:15:38Z",
      "side": 1,
      "message": "I wonder if this function could be simplified or broken up into other functions.  It\u0027s getting a bit hard to follow.",
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "273ec1c1_693f1e14",
        "filename": "fs_mgr/fs_mgr_overlayfs.cpp",
        "patchSetId": 10
      },
      "lineNbr": 664,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-12-05T17:00:16Z",
      "side": 1,
      "message": "agreed will look into it, but var scope has made past splitting up attempts look ugly (so far, that just means I have to try again or am finding the wrong places to split :-) on).",
      "parentUuid": "faa9f30c_e1d2496e",
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "926f409f_61c7fc5d",
        "filename": "fs_mgr/fs_mgr_overlayfs.cpp",
        "patchSetId": 10
      },
      "lineNbr": 664,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-12-05T17:46:38Z",
      "side": 1,
      "message": "I meant to write \u0027in the future\u0027 on the original comment too, no rush for this CL.",
      "parentUuid": "273ec1c1_693f1e14",
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10bc8454_bc458b87",
        "filename": "fs_mgr/fs_mgr_overlayfs.cpp",
        "patchSetId": 10
      },
      "lineNbr": 664,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-12-05T22:05:58Z",
      "side": 1,
      "message": "The future is now, I will spin out two dependent patched since there is no rush for _this_ CL to get in (this is a pre-emptive strike because 510MB might not universally be enough space for a viable overlayfs adb sync, but currently no one is really complaining yet). Besides, the simpler _this_ CL is the better, as retrofit-specific changes needs to be kept as simple pieces.\n\nPartition creation is by its liblp API nature a series of interlocking steps with slot_number, super_device, builder, partition, metadata, return status and error logs that has no logical reuse in the context of fs_mgr_overlayfs.cpp. So the cookbook does not appear to be able to be broken up without causing more maintenance headaches :-( but the overall fragment can be factored out.\n\nI have already factored out mount_scratch.\n\nI will factor out mkfs fragment.",
      "parentUuid": "273ec1c1_693f1e14",
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dcf1e417_f73879a0",
        "filename": "fs_mgr/fs_mgr_overlayfs.cpp",
        "patchSetId": 10
      },
      "lineNbr": 682,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-12-05T00:15:38Z",
      "side": 1,
      "message": "Is this declaration intended?  It hides the partition_exists from line 668.",
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "835f155f_ff53efd4",
        "filename": "fs_mgr/fs_mgr_overlayfs.cpp",
        "patchSetId": 10
      },
      "lineNbr": 682,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-12-05T17:00:16Z",
      "side": 1,
      "message": "Good catch, through rebases in my private branch with other ideas\u0026prototypes this keeps on coming back. Not intended. It breaks line 744 logic :-( and my test did not discover this because it would require a different device or manual change on line 654 to alter paths (which has been done on previous rebases). I need to make sure I run this alternate test _always_ moving forward.",
      "parentUuid": "dcf1e417_f73879a0",
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6685ef12_eec0689c",
        "filename": "fs_mgr/fs_mgr_overlayfs.cpp",
        "patchSetId": 10
      },
      "lineNbr": 682,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-12-05T22:05:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "835f155f_ff53efd4",
      "revId": "84a7b59ff5eb6018b549f24b10da41fdc86d903e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}