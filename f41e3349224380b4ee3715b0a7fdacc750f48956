{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cc9a07ad_d1f0efc6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-01-20T03:41:11Z",
      "side": 1,
      "message": "Shouldn\u0027t this be done via an HAL in general? Why is this done directly from system server? I might be wrong since I don\u0027t have enough context here. Sharing a background story would be appreciated.",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60a04240_d2204239",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1133258
      },
      "writtenOn": "2021-01-20T03:57:03Z",
      "side": 1,
      "message": "Hi Jiyong,  Input frameworks doesn\u0027t have a HAL interface, it directly works with stable kernel interface.  EventHub is the component in input frameworks read/write kernel interface for reading the input events from kernel. \nMichael, can you please explain more of the design detail for how input frameworks interface with kernel?  Thanks!",
      "parentUuid": "cc9a07ad_d1f0efc6",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fa8c123_b3dc1d00",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-01-20T04:02:06Z",
      "side": 1,
      "message": "Thanks for the info. If the kernel interface is stable, then I worry much less. I know that the input events (/dev/input) has been since the beginning of Android, but I don\u0027t know if the same holds for the LED interface. How stable is the LED interface? Is it guaranteed to exist (and behave correctly) in older (3-4 years old) kernels? Otherwise the new platform might not work on old BSPs, which breaks the Treble requirement.",
      "parentUuid": "60a04240_d2204239",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7779ee0_c67fab82",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1133258
      },
      "writtenOn": "2021-01-20T04:17:10Z",
      "side": 1,
      "message": "The led device class and sysfs interface has been in kernel for a long time, \nhttps://www.kernel.org/doc/Documentation/leds/leds-class.txt#:~:text\u003dLEDs%20appear%20in%20%2Fsys%2Fclass,for%20non%2Dzero%20brightness%20settings.\nhttps://www.kernel.org/doc/html/latest/leds/leds-class-multicolor.html\nAnd the kernel interface stays unchanged for quite a few releases.\nSandeep/Michael could probably provide more info and future kernel plan to support it.",
      "parentUuid": "8fa8c123_b3dc1d00",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec43e726_66da2a07",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-01-20T04:40:17Z",
      "side": 1,
      "message": "The links show \"/sys/class/leds/\", but this change is about \"/sys/devices/virtual/misc/uhid/*/leds/*\". Is this also part of the standard interface?\n\nI don\u0027t see the path on my blueline for example.",
      "parentUuid": "f7779ee0_c67fab82",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14fe8472_bc32e16a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1133258
      },
      "writtenOn": "2021-01-20T04:47:05Z",
      "side": 1,
      "message": "\"/sys/devices/virtual/misc/uhid/*/leds/*\" will be used by UHID input device, and a symbol link will be created under /sys/class/leds..",
      "parentUuid": "ec43e726_66da2a07",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "beca1d59_dac703ad",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-01-20T04:52:57Z",
      "side": 1,
      "message": "Then why don\u0027t we use /sys/class/leds... here? Sorry that I keep asking questions.",
      "parentUuid": "14fe8472_bc32e16a",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5fbd159_6ee19ef0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1133258
      },
      "writtenOn": "2021-01-20T04:57:51Z",
      "side": 1,
      "message": "That\u0027s a good question,  in first patch we did this, however under /sys/class/leds there are nodes created for system lights leds, and linked to here.  If we add a rule of /*/leds that would change all the led interface nodes including system lights to be owned by system.",
      "parentUuid": "beca1d59_dac703ad",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff620cb4_ed38aea5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-01-20T05:06:14Z",
      "side": 1,
      "message": "Oh I see. So you want to capture a certain type of LEDs, like the ones from peripheral devices, but not all LEDs. \n\nGoing back to the original topic of Treble compliance. Does this new feature work with older (ex: P, Q, or R) kernels? If so, I feel fine.",
      "parentUuid": "b5fbd159_6ee19ef0",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59d533f2_562fa119",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1133258
      },
      "writtenOn": "2021-01-20T05:21:22Z",
      "side": 1,
      "message": "On older devices like P/Q/R the kernel path for UHID sysfs led class path should be same.\nThe input kernel driver for creating the node is vendor specific, and only particular input hardware will create the nodes when connected.\nThe uevent rule should only apply when the the driver detect the input hardware and mount the sysfs node, so with older kernel even if vendor kernel driver doesn\u0027t create the sysfs node the feature will just not be supported, but should not cause other issues.",
      "parentUuid": "ff620cb4_ed38aea5",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d49b037_87a39545",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-01-20T05:26:51Z",
      "side": 1,
      "message": "Thanks for the answers and also thanks for bearing with me. LGTM then.",
      "parentUuid": "59d533f2_562fa119",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd26b7f5_d89309bb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1133258
      },
      "writtenOn": "2021-01-20T05:36:26Z",
      "side": 1,
      "message": "Thanks Jiyong!",
      "parentUuid": "9d49b037_87a39545",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 55
      },
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8b55de29_ac0a7d74",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1133258
      },
      "writtenOn": "2021-01-19T18:18:42Z",
      "side": 1,
      "message": "+Bowgo and Jiyong from Treble team as well.\nGrouped this CL together with the other one providing file permission to system server, for uhid sysfs node to system server.",
      "revId": "f41e3349224380b4ee3715b0a7fdacc750f48956",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}