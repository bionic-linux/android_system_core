{
  "comments": [
    {
      "key": {
        "uuid": "e56fa75a_f346ecc6",
        "filename": "init/init.cpp",
        "patchSetId": 1
      },
      "lineNbr": 222,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-28T22:57:17Z",
      "side": 1,
      "message": "This is the only contentious part.  I haven\u0027t benchmarked it specifically yet, but I had benchmarked the loop in restart_processes() and it took essentially no time during boot, so I can\u0027t imagine this would be any different.\n\nIf it does matter, then I figure a Service::waiting_for_exec_ static would be the best way rather than roping ServiceManager back in.",
      "revId": "8cc637e6e9536633b4c1b3e730b4861821a7a299",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f067e95_30b59fd0",
        "filename": "init/init.cpp",
        "patchSetId": 1
      },
      "lineNbr": 222,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-31T18:31:24Z",
      "side": 1,
      "message": "It\u0027s on average one microsecond per call.  In theory there shouldn\u0027t be many calls, but I\u0027m absolutely seeing what looks like a bug that is causing this to be called 100,000 times at once... so that needs to be investigated.\n\nI really do not want to couple ServiceList with whether or not we\u0027re waiting for exec, but it does seem like stashing this away will be worth it.  The code that interacts with this is rather disjoin:\n\ndo_exec(_start)()\nReapOneProcess()\ninit\u0027s main loop",
      "parentUuid": "e56fa75a_f346ecc6",
      "revId": "8cc637e6e9536633b4c1b3e730b4861821a7a299",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e2e3b6b_0deb8b48",
        "filename": "init/init.cpp",
        "patchSetId": 1
      },
      "lineNbr": 222,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-31T23:26:29Z",
      "side": 1,
      "message": "https://android-review.googlesource.com/#/c/platform/system/core/+/448400/ is the fix.\n\nIt costs ~3ms to run this loop during boot on bullhead.  It likely won\u0027t result in 3ms increased boot time either though as it\u0027ll be hidden while other processes run.",
      "parentUuid": "4f067e95_30b59fd0",
      "revId": "8cc637e6e9536633b4c1b3e730b4861821a7a299",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a88b0a0_816bd5c0",
        "filename": "init/init.cpp",
        "patchSetId": 1
      },
      "lineNbr": 223,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-07-28T23:02:14Z",
      "side": 1,
      "message": "`result`?",
      "range": {
        "startLine": 223,
        "startChar": 9,
        "endLine": 223,
        "endChar": 12
      },
      "revId": "8cc637e6e9536633b4c1b3e730b4861821a7a299",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c1c6b19_cc9adc69",
        "filename": "init/service.cpp",
        "patchSetId": 1
      },
      "lineNbr": 986,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-07-28T23:02:14Z",
      "side": 1,
      "message": "size_t?",
      "range": {
        "startLine": 986,
        "startChar": 11,
        "endLine": 986,
        "endChar": 24
      },
      "revId": "8cc637e6e9536633b4c1b3e730b4861821a7a299",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c9039fe_f885a821",
        "filename": "init/service.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1147,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-28T22:57:17Z",
      "side": 1,
      "message": "Turns out we already have everything we need for timing of exec services without a new timer.\n\nAlthough... this is nanoseconds, no milliseconds so the time stamps are off... I\u0027ll fix this in a second CL:\n\ninit: Service \u0027exec 1 (/system/bin/init.bullhead.qseecomd.sh)\u0027 (pid 351) exited with status 0 waiting took 168710.640625 seconds",
      "revId": "8cc637e6e9536633b4c1b3e730b4861821a7a299",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dbb3d0e6_8c2c6f3d",
        "filename": "init/service.h",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-28T22:57:17Z",
      "side": 1,
      "message": "This is really just a static constructor for Service and should be treated like one.",
      "revId": "8cc637e6e9536633b4c1b3e730b4861821a7a299",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}