{
  "comments": [
    {
      "key": {
        "uuid": "8c4b4ce2_94097cb1",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 31,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "I assume this class is only intended to do mutual authentication, so you\u0027d request a client certificate and such? It might be worth documenting this, since people usually expect the server default to be not requesting a certificate.",
      "range": {
        "startLine": 31,
        "startChar": 8,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "30357aad_f1fbdec7",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 31,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8c4b4ce2_94097cb1",
      "range": {
        "startLine": 31,
        "startChar": 8,
        "endLine": 31,
        "endChar": 14
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5ebd936_d81de475",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Not: Configures whether certificate verification is enabled?",
      "range": {
        "startLine": 37,
        "startChar": 7,
        "endLine": 37,
        "endChar": 40
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a01f8b0_c285a07b",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b5ebd936_d81de475",
      "range": {
        "startLine": 37,
        "startChar": 7,
        "endLine": 37,
        "endChar": 40
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "26de96cd_9569d092",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Starts",
      "range": {
        "startLine": 57,
        "startChar": 7,
        "endLine": 57,
        "endChar": 13
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9063f762_d22a2ff2",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "26de96cd_9569d092",
      "range": {
        "startLine": 57,
        "startChar": 7,
        "endLine": 57,
        "endChar": 13
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b470813b_887bbfa6",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Any reason this is passed in here rather than on creation?",
      "range": {
        "startLine": 58,
        "startChar": 29,
        "endLine": 58,
        "endChar": 35
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ce2dc50_6df7464f",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "I initially put it here in case someone would want to retry the handshake with a different connection, but I haven\u0027t tested whether that even works.",
      "parentUuid": "b470813b_887bbfa6",
      "range": {
        "startLine": 58,
        "startChar": 29,
        "endLine": 58,
        "endChar": 35
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b3ce9e6_63d7d80c",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-02-04T00:21:08Z",
      "side": 1,
      "message": "Mmm. I\u0027ve often found these sorts of \"object reuse\" type APIs to be a bit error-prone (you have to not only test that each config option works, but that it gets carried over to the second connection attempt). I would recommend not supporting that and instead having callers make and configure a new TlsConnection if they want that.",
      "parentUuid": "9ce2dc50_6df7464f",
      "range": {
        "startLine": 58,
        "startChar": 29,
        "endLine": 58,
        "endChar": 35
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f793c1d7_44d50cdc",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-02-12T18:14:42Z",
      "side": 1,
      "message": "Done. Moved into the creation.",
      "parentUuid": "4b3ce9e6_63d7d80c",
      "range": {
        "startLine": 58,
        "startChar": 29,
        "endLine": 58,
        "endChar": 35
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70b70b04_154989dd",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "size_t?\n\n(libssl is sadly, not yet size_t-clean, but may as well make this one.)",
      "range": {
        "startLine": 62,
        "startChar": 43,
        "endLine": 62,
        "endChar": 46
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97c2eee2_7d248c51",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "70b70b04_154989dd",
      "range": {
        "startLine": 62,
        "startChar": 43,
        "endLine": 62,
        "endChar": 46
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c6cd3602_3c5d57b6",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 66,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "It is a little odd that the output is a vector\u003cuint8_t\u003e (unsigned) while the input is a string_view (signed). Also, C/C++ is the worst. :-(\n\nIn C++20, std::span will be a thing, but we don\u0027t quite have that yet.",
      "range": {
        "startLine": 66,
        "startChar": 33,
        "endLine": 66,
        "endChar": 44
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0743ccb6_c6f5aae8",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 66,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Ack. I\u0027ll just keep it as is for now since the other options at the moment aren\u0027t that appealing.",
      "parentUuid": "c6cd3602_3c5d57b6",
      "range": {
        "startLine": 66,
        "startChar": 33,
        "endLine": 66,
        "endChar": 44
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd311ded_d6c105bb",
        "filename": "adb/ssl/include/adb/ssl/tls_connection.h",
        "patchSetId": 7
      },
      "lineNbr": 66,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-02-04T00:21:08Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0743ccb6_c6f5aae8",
      "range": {
        "startLine": 66,
        "startChar": 33,
        "endLine": 66,
        "endChar": 44
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a95ef420_40e76562",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 61,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Note: RSA keygen is not the fastest thing out there. Having a pregenerated one will probably make your tests a lot faster.",
      "range": {
        "startLine": 61,
        "startChar": 24,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7a33452_002ce528",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 61,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a95ef420_40e76562",
      "range": {
        "startLine": 61,
        "startChar": 24,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "81be16ee_7257b798",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 101,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Nit: This uses lowerCamelCase, while other local variables use_underscores. (Ditto with clientKeyMaterial and friends.)",
      "range": {
        "startLine": 101,
        "startChar": 16,
        "endLine": 101,
        "endChar": 37
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1b136e1_4392d97d",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 101,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "81be16ee_7257b798",
      "range": {
        "startLine": 101,
        "startChar": 16,
        "endLine": 101,
        "endChar": 37
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28578ff7_ccadb641",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 116,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Note this is relying on the socket pair\u0027s buffer being large enough for that message. (If you want to avoid that assumption or test something larger, you could put the entire client half into a separate thread and then join on it before the test is done. I think GTest assertions work on random threads.)",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4512881c_0dc4c85c",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 116,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Ack. I\u0027ll put a note for now since it\u0027s not testing anything large ATM.",
      "parentUuid": "28578ff7_ccadb641",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e3b66ba_39bd3e8f",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 128,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Probably worth testing verification in both directions. Ditto for AddTrustedCertificates.",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70f75f63_ed6ef5ad",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 128,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6e3b66ba_39bd3e8f",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1864de64_8f0580c4",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 129,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Is it worth testing that the default is enabled?",
      "range": {
        "startLine": 129,
        "startChar": 13,
        "endLine": 129,
        "endChar": 48
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "634f90e8_a3488980",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 129,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1864de64_8f0580c4",
      "range": {
        "startLine": 129,
        "startChar": 13,
        "endLine": 129,
        "endChar": 48
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "601736f7_eb7528a7",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 189,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Nit: ASSERT_FALSE?",
      "range": {
        "startLine": 189,
        "startChar": 4,
        "endLine": 189,
        "endChar": 15
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c74dc09_2d18da9b",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 189,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "601736f7_eb7528a7",
      "range": {
        "startLine": 189,
        "startChar": 4,
        "endLine": 189,
        "endChar": 15
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7eb0fc00_9407ecb8",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 195,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Maybe just EXPECT_EQ(clientKeyMaterial, serverKeyMaterial)?\n\n(The msg_ checks above could also do that if you turned it into a std::vector.)",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a520797_5a8c20c6",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 195,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7eb0fc00_9407ecb8",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf58446a_29ef1717",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 197,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Maybe some tests for what happens if you pass in invalid certificate or key?",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "76e2aaf1_32ca9d2d",
        "filename": "adb/ssl/tests/tls_connection_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 197,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cf58446a_29ef1717",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f999d702_87b99ea8",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Hrm. I thought ~TlsConnectionImpl() also wants an override. Is the warning not enabled?",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a4f49b9_fc549c61",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f999d702_87b99ea8",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23d37121_8ceca118",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Ignore me if Android style is otherwise: in Chromium, we don\u0027t write the \"virtual\" if it\u0027s already got \"override\".",
      "range": {
        "startLine": 37,
        "startChar": 4,
        "endLine": 37,
        "endChar": 11
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "883838e1_0e567298",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done. Android doesn\u0027t seem to have rules on this, and adb code seems to use both formats. I\u0027ll just remove the virtual.",
      "parentUuid": "23d37121_8ceca118",
      "range": {
        "startLine": 37,
        "startChar": 4,
        "endLine": 37,
        "endChar": 11
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10c844c7_c4135b77",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 70,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "No need to call SSL_load_error_strings() in BoringSSL.\n\n(Also it doesn\u0027t register algorithms or anything. Actually you shouldn\u0027t need to call anything in Android. In specifically Chromium, because we build with BORINGSSL_NO_STATIC_INITIALIZER, we need to call CRYPTO_library_init(), which SSL_library_init() is an alias of, to set up the CPU capabilities. I keep meaning to do that internally but haven\u0027t gotten to it.)",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3866a8e_206f0acc",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 70,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10c844c7_c4135b77",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2430f3c3_eaf9d4bb",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Do you care about handling malloc failures? Technically this function (and most of them really) can fail if malloc fails.\n\n(I wonder if we can just make the default build config abort when malloc fails...)",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "15f19587_22c93c92",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 90,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "I\u0027d rather just abort if malloc fails. It there a flag I need to set for libssl to do that? So I don\u0027t have to have these CHECKs everywhere.",
      "parentUuid": "2430f3c3_eaf9d4bb",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffa11a31_9d423116",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 115,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "We have an X509_parse_from_buffer function which will allow the buffer to share some data with the certificate internally. (Saves a little bit of memory.)",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84b013e7_0b53e483",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 115,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ffa11a31_9d423116",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec4dd6f8_82449fcb",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 133,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "(Does X509FromBuffer not just fail cleanly in that case?)",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "016647a0_338c54ae",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 133,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done. Removed.",
      "parentUuid": "ec4dd6f8_82449fcb",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f72a6a0b_c62fbbc5",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 170,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Nice! :-D\n\nMaybe add a TODO that, once external/boringssl in Android is updated past https://boringssl.googlesource.com/boringssl/+/58d56f4c59969a23e5f52014e2651c76fea2f877, to remove the set_max_proto_version line? That way we don\u0027t have to prod this decades from now when TLS 1.4 exists.",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68e5e2e6_17639915",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 170,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f72a6a0b_c62fbbc5",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0368bf19_78135d2c",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 179,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "One of these days, we\u0027ll actually upstream our verifier... :-/",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa62e463_b7828884",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 192,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "This is unnecessary in BoringSSL (and OpenSSL these days too). We always do ECDH negotiation.",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28822930_2d3624c7",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 192,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fa62e463_b7828884",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "495a57a7_15c6cb36",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 202,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Nit/optional: I generally prefer cert_chain.data(). And at that point you may as well also do cert_chain.size().",
      "range": {
        "startLine": 202,
        "startChar": 58,
        "endLine": 202,
        "endChar": 72
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7a63f1f_93e485b7",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 202,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "495a57a7_15c6cb36",
      "range": {
        "startLine": 202,
        "startChar": 58,
        "endLine": 202,
        "endChar": 72
      },
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fcb82175_af52165e",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 276,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "You can avoid the pointer math (and, not that it matters, but avoid overflow) by doing:\n\nwhile (!data.empty()) {\n  int bytes_out \u003d SSL_write(ssl_.get(), data.data(), std::min(INT_MAX, data.size()))\u0027\n  if (bytes_out \u003c\u003d 0) {\n    ...\n  }\n  data \u003d data.substr(bytes_out);\n}",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "730a5be8_1261c883",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 276,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-31T17:42:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fcb82175_af52165e",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c23de235_b9793959",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 285,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "Does HasValidKey not handle these cases?",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ff4ac81_39d4a260",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 285,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done. This should be an assertion instead. Also removed HasValidKey().",
      "parentUuid": "c23de235_b9793959",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12db70be_ace8ed4e",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 288,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2020-01-21T21:14:59Z",
      "side": 1,
      "message": "May as well avoid the bare new/delete:\n\nauto p \u003d std::make_unique\u003cTlsConnectionImpl\u003e(role, cert, priv_key);\nif (!p-\u003eHasValidKey()) {\n  return nullptr;\n}\nreturn p;",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "050db68d_975e929c",
        "filename": "adb/ssl/tls_connection.cpp",
        "patchSetId": 7
      },
      "lineNbr": 288,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-22T00:23:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "12db70be_ace8ed4e",
      "revId": "9827a7c322ace70d46ec91b0462cbddf01c7c0c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}