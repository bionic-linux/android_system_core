{
  "comments": [
    {
      "key": {
        "uuid": "0c8f3031_d4835587",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 718,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2020-01-30T00:48:36Z",
      "side": 1,
      "message": "perhaps this should be a mkdir builtin, so we avoid the overhead of an exec() and this can be an atomic operation.\n\nline 717:\n\n  mkdir /data/media ... encryption\u003dNone chattr\u003d+F\n\n(or some better syntax)",
      "revId": "a9cdf1afb4812036faf9badc53313c16ba7d4dea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "447c1eee_59cda666",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 718,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-02-02T05:04:33Z",
      "side": 1,
      "message": "well, it can\u0027t be _atomic_ --- there\u0027s no way to create the directory with the attribute. we can reduce the window, but since init will be waiting around for toybox the only difference is a 0.01s saving.\n\nif we get another use case it might be worth a chattr builtin, but for now i\u0027m assuming 0.01s is too small to be worth the duplication. (that said, it\u0027s not actually much code, at least not for the trivial flags: open, ioctl to read, |\u003d, ioctl to write, close.)",
      "parentUuid": "0c8f3031_d4835587",
      "revId": "a9cdf1afb4812036faf9badc53313c16ba7d4dea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f02c875_46abdad4",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 718,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-02-03T14:06:09Z",
      "side": 1,
      "message": "Those were my thoughts too, it doesn\u0027t seem worth it to add it to init when there is only 1 user.",
      "parentUuid": "447c1eee_59cda666",
      "revId": "a9cdf1afb4812036faf9badc53313c16ba7d4dea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "acc13063_709ee9fc",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 718,
      "author": {
        "id": 1045980
      },
      "writtenOn": "2020-02-04T10:15:48Z",
      "side": 1,
      "message": "I had to switch init around to let toybox run here, and it looks like that may break something, so we might not have a choice there...",
      "parentUuid": "2f02c875_46abdad4",
      "revId": "a9cdf1afb4812036faf9badc53313c16ba7d4dea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "04b307e2_3fb80412",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 718,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-02-04T14:02:59Z",
      "side": 1,
      "message": "How much had to be switched around?  SEPolicy?  I would expect this to be relatively easy to do.  A while back we were calling `rm` from toybox in the USB init.rc files, so most of the needed code should have already been there.",
      "parentUuid": "acc13063_709ee9fc",
      "revId": "a9cdf1afb4812036faf9badc53313c16ba7d4dea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ccb61129_30042598",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 718,
      "author": {
        "id": 1045980
      },
      "writtenOn": "2020-02-04T22:41:14Z",
      "side": 1,
      "message": "Hm. Presubmit passed, so maybe it was something else? I have the code for init done if we want it instead.",
      "parentUuid": "04b307e2_3fb80412",
      "revId": "a9cdf1afb4812036faf9badc53313c16ba7d4dea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8bcd19b_edeb9a0b",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 718,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-02-04T22:44:43Z",
      "side": 1,
      "message": "Presubmit has been rather flaky as of late so I could believe that.  I still think it\u0027s better to call toybox rather than putting it in init given that we only have one case, so this still looks best to me.",
      "parentUuid": "ccb61129_30042598",
      "revId": "a9cdf1afb4812036faf9badc53313c16ba7d4dea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}