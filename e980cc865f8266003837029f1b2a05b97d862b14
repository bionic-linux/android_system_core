{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a96ae424_dae39191",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2024-09-05T00:12:29Z",
      "side": 1,
      "message": "libprocessgroup doesn\u0027t provide a stable interface. I recommend the vendor test(s?) to statically link to libprocessgroup.",
      "range": {
        "startLine": 10,
        "startChar": 52,
        "endLine": 13,
        "endChar": 50
      },
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1717f58_9de5250f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2024-09-04T18:34:21Z",
      "side": 1,
      "message": "+jiyong/ccross because something seems more deeply wrong here. in particular \"why were these tests allowed to link against this library in the first place?\".",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "55dda308_9a5a497c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1930620
      },
      "writtenOn": "2024-09-04T18:39:04Z",
      "side": 1,
      "message": "I think because the tests are built separately from the vendor image and then shoved onto the device later?",
      "parentUuid": "b1717f58_9de5250f",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "197d4aa8_3a94bfb0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2024-09-04T18:41:15Z",
      "side": 1,
      "message": "(unresolving because that just raises _more_ questions, and this still isn\u0027t the way to fix that :-) )",
      "parentUuid": "55dda308_9a5a497c",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "334b55af_88649966",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2024-09-04T23:35:34Z",
      "side": 1,
      "message": "This already makes a rule to build `/vendor/lib64/libprocessgroup.so`.  If you want that to be preinstalled on a specific device, add `libprocessgroup.vendor` to `PRODUCT_PACKAGES` in a vendor product makefile.",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57a9071c_7f34f4e5",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1930620
      },
      "writtenOn": "2024-09-05T16:28:21Z",
      "side": 1,
      "message": "Thanks that works great. I guess there\u0027s nothing better we can do about the having the test dependency cause the library to be included?",
      "parentUuid": "334b55af_88649966",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d83a8b2_b33c8c16",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2024-09-05T17:31:16Z",
      "side": 1,
      "message": "Jiyong\u0027s suggestion to make the tests statically link against libprocessgroup is better.",
      "parentUuid": "57a9071c_7f34f4e5",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57fefef3_b9a3f003",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2024-09-05T17:40:38Z",
      "side": 1,
      "message": "+krzysio but do we know how the lyric tests end up with that dependency in the first place? (and he\u0027s probably also the person who can make that be static instead.)",
      "parentUuid": "57a9071c_7f34f4e5",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bfa002e_a418256c",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1930620
      },
      "writtenOn": "2024-09-05T19:11:36Z",
      "side": 1,
      "message": "The use of the library by `liblyric.fabric` is pretty clear, but that doesn\u0027t look like test code so I don\u0027t think we\u0027d want to make the dependency static for it:\nhttps://source.corp.google.com/search?q\u003dSet(Task%7CProcess)Profile\u0026ss\u003dh%2Fgoogleplex-android%2Fplatform%2Fsuperproject%2Fmain%2F%2B%2Frefs%2Fheads%2Fmain:vendor%2Fgoogle%2Fservices%2FLyricCameraHAL%2F",
      "parentUuid": "57fefef3_b9a3f003",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a734ad0f_e336c384",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1930620
      },
      "writtenOn": "2024-09-05T20:31:18Z",
      "side": 1,
      "message": "I just checked, and the tests pass if I don\u0027t include a vendor libprocessgroup and change the test defaults to remove the shared dependency on libprocessgroup like below. So that must mean the actual dependency is already linked statically at the point of use and this shared libprocessgroup dependency is tacked on unnecessarily afterwards specifically for the test.\n```\n@@ -526,7 +526,6 @@ cc_defaults {\n     name: \"lyric_cc_test_defaults\",\n     defaults: [\"lyric_cc_library_defaults\"],\n     shared_libs: [\n-        \"libprocessgroup\",\n\n```",
      "parentUuid": "6bfa002e_a418256c",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a1bcfb5_fcc366b3",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2024-09-06T02:18:14Z",
      "side": 1,
      "message": "Good to know that the dependency was bogus.\n\n@ccross@android.com would it be good if we add `Wl,--as-needed` for cc_libraries just like rust_libraries?",
      "parentUuid": "a734ad0f_e336c384",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "603d2c5a_f2dbd93d",
        "filename": "libprocessgroup/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 103,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2024-09-04T18:34:21Z",
      "side": 1,
      "message": "doesn\u0027t that need to be whole_static_libs to re-export?",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ecc50ff_cb633174",
        "filename": "shell_and_utilities/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2024-09-04T18:34:21Z",
      "side": 1,
      "message": "this doesn\u0027t seem right --- note that the others are _executables_. we shouldn\u0027t be adding random libraries here.",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f378e29_3d958250",
        "filename": "shell_and_utilities/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1930620
      },
      "writtenOn": "2024-09-04T18:41:14Z",
      "side": 1,
      "message": "Yeah, this is odd but I didn\u0027t see anywhere else obvious to put it. Since it was coming from `toybox_vendor` before I added it here. Let\u0027s see what the build folks say about the tests being able to link in the first place?",
      "parentUuid": "2ecc50ff_cb633174",
      "revId": "e980cc865f8266003837029f1b2a05b97d862b14",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}