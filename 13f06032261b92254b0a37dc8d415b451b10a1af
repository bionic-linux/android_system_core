{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2083a6f2_f6436596",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-10-29T19:57:42Z",
      "side": 1,
      "message": "just imagining myself debugging an issue with this --- should this check come first?\n\nit doesn\u0027t matter if src can\u0027t be accessed, as long as dst already exists and can be executed, right? seems like the log would be clearer if it says \"everything\u0027s fine\" (this message) rather than \"i can\u0027t do what would do [and may or may not need to do]\" (the previous message).",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1a9be55_27aacbe6",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-10-29T20:00:06Z",
      "side": 1,
      "message": "Good idea. Done.\n\nShould I change L108 to X_OK as well?",
      "parentUuid": "2083a6f2_f6436596",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1f6fc2f_de9eb32e",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-10-29T20:01:48Z",
      "side": 1,
      "message": "not sure what you mean: L108 already is X_OK...",
      "parentUuid": "d1a9be55_27aacbe6",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a0cd8be_0cef05a5",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-10-29T20:06:51Z",
      "side": 1,
      "message": "I meant L113 right now:\n\n    if (access(src, X_OK) !\u003d 0) {\n        PLOG(INFO) \u003c\u003c \"Not moving \" \u003c\u003c src \u003c\u003c \" because it cannot be accessed\";\n        return;\n    }",
      "parentUuid": "c1f6fc2f_de9eb32e",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b02b0129_ab55c10e",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-10-29T20:10:23Z",
      "side": 1,
      "message": "fwiw, i\u0027d delete that check. i think the error message from rename() will be at least as helpful. i\u0027m not sure what the benefit is of guessing whether we think rename() will work or not...",
      "parentUuid": "6a0cd8be_0cef05a5",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d246818e_d009c13a",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-10-29T20:14:16Z",
      "side": 1,
      "message": "I added that check because I got ENOENT for rename, but after some time of debugging I realize that I didn\u0027t create directories at dst_dir. So I think ENOENT in rename() didn\u0027t give enough information.\n\nIf I am to delete the check, I\u0027ll change L123 to:\n\n  if (rename(...) !\u003d 0) {\n    if(errno \u003d\u003d ENOENT) LOG(INFO)...;\n    else LOG(FATAL)...\n  }\n\nI don\u0027t think it cleans up the code too much, but it is indeed one less syscall. WDYT?",
      "parentUuid": "b02b0129_ab55c10e",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25ba6cbf_f93781d0",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-10-29T20:19:09Z",
      "side": 1,
      "message": "it doesn\u0027t reduce the amount of code, but it makes your intention (give a better error message because ENOENT from rename is ambiguous because it could refer to either argument) clearer, so that sgtm. especially since -- obviously -- i failed to guess your intention before :-)",
      "parentUuid": "d246818e_d009c13a",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae8144e2_37652cd3",
        "filename": "init/first_stage_init.cpp",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-10-29T20:21:45Z",
      "side": 1,
      "message": "Thanks for reviewing. I\u0027ll keep the code as-is.\n\nDo you have any other suggestions? Could you please +1/+2?",
      "parentUuid": "25ba6cbf_f93781d0",
      "revId": "13f06032261b92254b0a37dc8d415b451b10a1af",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}