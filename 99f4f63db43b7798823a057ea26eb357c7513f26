{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "165ccc9a_f22ae1db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1970665
      },
      "writtenOn": "2023-02-08T17:07:46Z",
      "side": 1,
      "message": "First part of go/fastboot-line-length\nAndroid First to update trusty-ut-ctrl in particular. Then trusty/abl.\n\nThanks for the review ðŸ˜Š",
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a321be26_1665ccc5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2023-02-08T17:47:13Z",
      "side": 1,
      "message": "Did increasing the line length not work?",
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19d6ad6f_5bb512b1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1970665
      },
      "writtenOn": "2023-02-08T18:27:30Z",
      "side": 1,
      "message": "It is not enough for me, because every call to printf in a test sends an IPC message. Then Every message is printed on its own line.",
      "parentUuid": "a321be26_1665ccc5",
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db56f466_00d1e7c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1970665
      },
      "writtenOn": "2023-02-08T18:27:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "19d6ad6f_5bb512b1",
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b27e4446_fdf462ce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2023-02-08T18:52:45Z",
      "side": 1,
      "message": "Could you clarify this more? If no lines are longer than 256 characters, it\u0027s not clear to me why it wouldn\u0027t work (or why we couldn\u0027t increase the response length which would be much easier).",
      "parentUuid": "db56f466_00d1e7c7",
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c0625aa_ead7d5d6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1952791
      },
      "writtenOn": "2023-02-08T19:12:05Z",
      "side": 1,
      "message": "+1\nI was slightly surprised to see this CL, rather than just allowing longer line output up to the current protocol.  \nPlease can you update the existing design doc with a section to clarify why longer lines is not preferred?\nThat said, this implementation is quite small and neat.",
      "parentUuid": "b27e4446_fdf462ce",
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5593a786_ef2266ad",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1970665
      },
      "writtenOn": "2023-02-09T08:49:34Z",
      "side": 1,
      "message": "The original problem came from running crypto hardware benchmarks in fastboot/abl because this is a much more controlled environment than linux.\n\nFrom there once benchmark run is initiated, what happens is a three entity communication. Trusty (Device) --\u003e ABL(Device) --\u003e Fastboot(Host). For every call to trusty_unittest_printf, an IPC message is sent to ABL. ABL then forwards it to the host over USB. Fastboot then prints one line \"(bootloader) INFO: [...]\\n\". \n\nWhile I could perform buffering on trusty side. Only sending line by line, it is not very convenient. For example, when printing columns, Each column gets its own call to printf, with appropriated sizing and formatting.\n\nAlso, there are different formatting options: Horizontal Table, Vertical Table (those are just pivoted tables from one another), JSON, and more may come. Both trusty IPC and Fastboot on the hosts use a 256 Bytes buffer, Few characters of which are used for other things, such as message types in the first byte(s). ABL fastboot implementation uses a 64 Bytes Buffer, the 4 first bytes being used for the type header. It is hard for me to guarantee that 250+ bytes will be enough to hold any full line. In fact it is pretty much guaranteed that horizontal printing will nearly always go beyond that.\n\nSo if on Fastboot/ABL side, I only pop up buffer size and nothing else, I need to:\n - Perform buffering on trusty side to only send line by line irrespective of printing logic and buffer sizes.\n - Make sure that no lines ever goes over 252 BYTES (due to 4bytes header size).",
      "parentUuid": "0c0625aa_ead7d5d6",
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3aee913_b0d5e40f",
        "filename": "trusty/libtrusty/tipc-test/tipc_test.c",
        "patchSetId": 9
      },
      "lineNbr": 631,
      "author": {
        "id": 1952791
      },
      "writtenOn": "2023-02-08T17:37:12Z",
      "side": 1,
      "message": "Can this check be combined with the one on line :629?",
      "range": {
        "startLine": 631,
        "startChar": 8,
        "endLine": 631,
        "endChar": 44
      },
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea0821a4_a96f5276",
        "filename": "trusty/utils/trusty-ut-ctrl/ut-ctrl.c",
        "patchSetId": 9
      },
      "lineNbr": 127,
      "author": {
        "id": 1952791
      },
      "writtenOn": "2023-02-08T17:37:12Z",
      "side": 1,
      "message": "This can be combined with line 125.",
      "range": {
        "startLine": 127,
        "startChar": 8,
        "endLine": 127,
        "endChar": 44
      },
      "revId": "99f4f63db43b7798823a057ea26eb357c7513f26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}