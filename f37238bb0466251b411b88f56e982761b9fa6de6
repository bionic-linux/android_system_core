{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2eae38de_ff7a6765",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-12-10T19:32:32Z",
      "side": 1,
      "message": "I\u0027d like to make the TODO more actionable.  Maybe we move the legacy import lines back into ueventd.cpp and have logic along the lines of:\n\nif (ro.product.first_api_level \u003c\u003d S) {\n  Load the legacy files if present\n}\n\nThat way, we can delete those lines once \u0027S\u0027 falls out of the support window range.\n\nWe can keep the new paths in this file.",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8664d5d6_1b38af79",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1562144
      },
      "writtenOn": "2020-12-10T23:08:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2eae38de_ff7a6765",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66538234_6e74b6ef",
        "filename": "rootdir/ueventd.rc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-12-10T19:32:32Z",
      "side": 1,
      "message": "Let\u0027s drop this line.  The reason for my last CL that adds these the ability to import lines is to import `/vendor/etc/ueventd.{ro.boot.product.vendor.sku}.rc`.  I didn\u0027t add that specifically here, to give vendors the flexibility to import that or not depending on their use case.",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec010194_396bfcb7",
        "filename": "rootdir/ueventd.rc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1562144
      },
      "writtenOn": "2020-12-10T22:06:07Z",
      "side": 1,
      "message": "I was thinking that could be used for QCOM\u0027s since theirs is ueventd.qcom.rc which would match /vendor/etc/ueventd.{ro.hardware}.rc exactly. Left ueventd.rc as something OEMs could use since SKU based is a bit too specific, e.g. the OnePlus 8 Series consists of 8, Pro \u0026 8 Pro and the custom additions they make to QCOM\u0027s are all the same. They could make something like this:\n\nprebuilt_etc {\n    name: \"ueventd.oem\",\n    filename: \"ueventd.rc\",\n    src: \"ueventd.oem.rc\",\n    vendor: true,\n}\n\nInstead of importing based on SKU for each device.",
      "parentUuid": "66538234_6e74b6ef",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f92cd10_fb9c4f5b",
        "filename": "rootdir/ueventd.rc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-12-10T22:23:32Z",
      "side": 1,
      "message": "I want to align with how we\u0027re loading other vendor/odm components in Treble (such as VINTF manifests).  I believe ro.hardware stopped being used for these.\n\n+elsk@ too for guidance.",
      "parentUuid": "ec010194_396bfcb7",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4692a2d1_523880da",
        "filename": "rootdir/ueventd.rc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-12-10T22:33:50Z",
      "side": 1,
      "message": "as of now, ro.boot.product.hardware.sku (for ODM) and ro.boot.product.vendor.sku (for vendor) are used for VINTF. ro.hardware isn\u0027t used in VINTF.",
      "parentUuid": "4f92cd10_fb9c4f5b",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8415c4e7_f72bb9c2",
        "filename": "rootdir/ueventd.rc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-12-10T22:34:17Z",
      "side": 1,
      "message": "From https://source.android.com/devices/architecture/vintf/objects#device-manifest-file",
      "parentUuid": "4692a2d1_523880da",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e581e491_7ed14914",
        "filename": "rootdir/ueventd.rc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1562144
      },
      "writtenOn": "2020-12-11T01:01:34Z",
      "side": 1,
      "message": "How would doing this a SKU by SKU basis work though, e.g. between OP8, 8 Pro, and 8T you have easily over 11 SKUs, and all of them have the exact same ueventd changes. Making a ueventd.{ro.boot.product.hardware.sku}.rc for their changes 11+ times wouldn\u0027t be ideal.\n\nAOSP has init.rc, and for vendor extensions (at least on Pixels) Google writes init.$(PRODUCT_PLATFORM).rc. Why wouldn\u0027t it be the same for ueventd.rc? Google has ueventd.rc, so shouldn\u0027t a device extension also exist instead of one for each SKU for that device?\n\nSome examples of changes that would apply widely to all SKUs of OP8/Pro/T:\n/dev/block/by-name/config    0600    system    system\n/dev/block/by-name/param     0660    root      system\n\nWe wouldn\u0027t want to add the OEM\u0027s changes to QCOM\u0027s either since that\u0027s deviating from upstream.",
      "parentUuid": "8415c4e7_f72bb9c2",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cedebe27_daace54c",
        "filename": "rootdir/ueventd.rc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2020-12-11T04:52:49Z",
      "side": 1,
      "message": "Looks like a ueventd.rc can be easily shared comparing to ro.boot.product.hardware.sku (for ODM) and ro.boot.product.vendor.sku (for vendor) that are used for VINTF.\n\nIf so, maybe just `import /vendor/etc/ueventd.rc` would be good enough here.\nAn OEM can easily add more \u0027import\u0027 in the /(odm|vendor)/etc/ueventd.rc if needed.\n\nThought?",
      "parentUuid": "e581e491_7ed14914",
      "revId": "f37238bb0466251b411b88f56e982761b9fa6de6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}