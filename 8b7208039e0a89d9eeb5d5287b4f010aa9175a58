{
  "comments": [
    {
      "key": {
        "uuid": "4ec61432_91a55e77",
        "filename": "adb/adb.h",
        "patchSetId": 7
      },
      "lineNbr": 80,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2016-04-01T20:37:12Z",
      "side": 1,
      "message": "not constexpr?",
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_b59b9f2d",
        "filename": "adb/adb.h",
        "patchSetId": 7
      },
      "lineNbr": 80,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4ec61432_91a55e77",
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_f13ce2c4",
        "filename": "adb/commandline.cpp",
        "patchSetId": 7
      },
      "lineNbr": 243,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2016-04-04T18:18:43Z",
      "side": 1,
      "message": "nit: looks like everything else uses 2 spaces here.",
      "range": {
        "startLine": 243,
        "startChar": 9,
        "endLine": 243,
        "endChar": 10
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_956c63d6",
        "filename": "adb/commandline.cpp",
        "patchSetId": 7
      },
      "lineNbr": 243,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4ec61432_f13ce2c4",
      "range": {
        "startLine": 243,
        "startChar": 9,
        "endLine": 243,
        "endChar": 10
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_51d136d3",
        "filename": "adb/commandline.cpp",
        "patchSetId": 7
      },
      "lineNbr": 1914,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2016-04-01T20:37:12Z",
      "side": 1,
      "message": "why not on linux?",
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_75f8d7db",
        "filename": "adb/commandline.cpp",
        "patchSetId": 7
      },
      "lineNbr": 1914,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "the comment is no longer true as using an active method from patch 3. For patch 1/2 it is true because only linux has poll POLLRDHUP function.",
      "parentUuid": "4ec61432_51d136d3",
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_82974a68",
        "filename": "adb/services.cpp",
        "patchSetId": 7
      },
      "lineNbr": 356,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2016-04-04T18:18:43Z",
      "side": 1,
      "message": "nit: I don\u0027t think this is necessary since transport is already a pointer.",
      "range": {
        "startLine": 356,
        "startChar": 55,
        "endLine": 356,
        "endChar": 62
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_b5f5dfe0",
        "filename": "adb/services.cpp",
        "patchSetId": 7
      },
      "lineNbr": 356,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "moved to const_cast",
      "parentUuid": "4ec61432_82974a68",
      "range": {
        "startLine": 356,
        "startChar": 55,
        "endLine": 356,
        "endChar": 62
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_d1c44611",
        "filename": "adb/sockets.cpp",
        "patchSetId": 7
      },
      "lineNbr": 89,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2016-04-01T20:37:12Z",
      "side": 1,
      "message": "uint32_t?",
      "range": {
        "startLine": 89,
        "startChar": 7,
        "endLine": 89,
        "endChar": 15
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_f5a5a7c7",
        "filename": "adb/sockets.cpp",
        "patchSetId": 7
      },
      "lineNbr": 89,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4ec61432_d1c44611",
      "range": {
        "startLine": 89,
        "startChar": 7,
        "endLine": 89,
        "endChar": 15
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_e2a5eec7",
        "filename": "adb/sockets.cpp",
        "patchSetId": 7
      },
      "lineNbr": 96,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2016-04-04T18:18:43Z",
      "side": 1,
      "message": "nit: this sort of defeats the purpose of having a constant since it assumes HEARTBEAT_SOCKET_ID is 0xFFFFFFFF. But if it won\u0027t ever change it probably doesn\u0027t matter.",
      "range": {
        "startLine": 94,
        "startChar": 0,
        "endLine": 96,
        "endChar": 5
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_7592177b",
        "filename": "adb/sockets.cpp",
        "patchSetId": 7
      },
      "lineNbr": 96,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "It doesn\u0027t assume HEARTBEAT_SOCKET_ID is 0xffffffff. But it did limit valid ids to [1, HEARTBEAT_SOCKET_ID).",
      "parentUuid": "4ec61432_e2a5eec7",
      "range": {
        "startLine": 94,
        "startChar": 0,
        "endLine": 96,
        "endChar": 5
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_a2a5a676",
        "filename": "adb/transport.cpp",
        "patchSetId": 7
      },
      "lineNbr": 601,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2016-04-04T18:18:43Z",
      "side": 1,
      "message": "This might be a little aggressive for TCP transports, depending on the system\u0027s TCP backoff/retransmission settings 1 second might mean just 1 or 2 retransmissions will kill the connection which could potentially make adb over WiFi pretty flaky.\n\nIn http://r.android.com/204446 I added a 10-second TCP timeout using the TCP keepalive feature, but I was considering an approach similar to this as well. Maybe it makes more sense to just set this timeout higher for TCP transports and I should revert http://r.android.com/204446 once this lands?",
      "range": {
        "startLine": 601,
        "startChar": 16,
        "endLine": 601,
        "endChar": 41
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_55083b7a",
        "filename": "adb/transport.cpp",
        "patchSetId": 7
      },
      "lineNbr": 601,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "1 second may be strict, and I am ready to loosen it when someone complains. Changed the rule to something like TCP keepalive:\neach transport has a heartbeat interval and failed_count_before_invalid. In each interval, the transport sends an A_OPEN packet, waiting for A_CLSE packet. If the adb host hasn\u0027t received response for [failed_count_before_invalid] A_OPEN packets, it will kick the transport. Current setting is:\nfor usb devices, [interval\u003d1, failed_count_before_invalid\u003d2]\nfor emulators, [interval\u003d1, failed_count_before_invalid\u003d3]\nfor tcp devices, [interval\u003d1, failed_count_before_invalid\u003d10]",
      "parentUuid": "4ec61432_a2a5a676",
      "range": {
        "startLine": 601,
        "startChar": 16,
        "endLine": 601,
        "endChar": 41
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_a2afe6a3",
        "filename": "adb/transport.h",
        "patchSetId": 7
      },
      "lineNbr": 53,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2016-04-04T18:18:43Z",
      "side": 1,
      "message": "What do you think about aliasing this to make the code a little more readable? Something like\n\n  typedef std::chrono::steady_clock clock;\n\ninside the atransport class might cut down on some repetition.",
      "range": {
        "startLine": 53,
        "startChar": 33,
        "endLine": 53,
        "endChar": 58
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_d5ac2bb1",
        "filename": "adb/transport.h",
        "patchSetId": 7
      },
      "lineNbr": 53,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "yes, I should do it if it undermines readability.",
      "parentUuid": "4ec61432_a2afe6a3",
      "range": {
        "startLine": 53,
        "startChar": 33,
        "endLine": 53,
        "endChar": 58
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_f1c142fe",
        "filename": "adb/transport.h",
        "patchSetId": 7
      },
      "lineNbr": 130,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2016-04-01T20:37:12Z",
      "side": 1,
      "message": "Sent?",
      "range": {
        "startLine": 130,
        "startChar": 64,
        "endLine": 130,
        "endChar": 71
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_35d80f6d",
        "filename": "adb/transport.h",
        "patchSetId": 7
      },
      "lineNbr": 130,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4ec61432_f1c142fe",
      "range": {
        "startLine": 130,
        "startChar": 64,
        "endLine": 130,
        "endChar": 71
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_91bebe81",
        "filename": "adb/transport.h",
        "patchSetId": 7
      },
      "lineNbr": 136,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2016-04-01T20:37:12Z",
      "side": 1,
      "message": "Received?\n\nthese are both in the past, right?",
      "range": {
        "startLine": 136,
        "startChar": 65,
        "endLine": 136,
        "endChar": 74
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ec61432_55dd9b5b",
        "filename": "adb/transport.h",
        "patchSetId": 7
      },
      "lineNbr": 136,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2016-04-05T23:18:09Z",
      "side": 1,
      "message": "yes, Done.",
      "parentUuid": "4ec61432_91bebe81",
      "range": {
        "startLine": 136,
        "startChar": 65,
        "endLine": 136,
        "endChar": 74
      },
      "revId": "8b7208039e0a89d9eeb5d5287b4f010aa9175a58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}