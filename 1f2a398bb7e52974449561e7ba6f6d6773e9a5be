{
  "comments": [
    {
      "key": {
        "uuid": "09b6ee5d_df54fc3c",
        "filename": "init/Android.mk",
        "patchSetId": 11
      },
      "lineNbr": 78,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-12-06T17:22:30Z",
      "side": 1,
      "message": "We should be able to delete this too.",
      "revId": "1f2a398bb7e52974449561e7ba6f6d6773e9a5be",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24fe3a7d_b0ea3a35",
        "filename": "init/Android.mk",
        "patchSetId": 11
      },
      "lineNbr": 81,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-12-06T17:22:30Z",
      "side": 1,
      "message": "We shouldn\u0027t need this if we\u0027re doing the mount in 2nd stage init.",
      "revId": "1f2a398bb7e52974449561e7ba6f6d6773e9a5be",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "daef47de_3a7e5519",
        "filename": "init/selinux.cpp",
        "patchSetId": 11
      },
      "lineNbr": 535,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-12-06T17:22:30Z",
      "side": 1,
      "message": "I also question if this is strictly needed anymore.  The directory /linkerconfig should be in system.img, so it will have its SEPolicy built into the image.  \n\nI guess there is still the ramdisk used for recovery, but we don\u0027t use /linkerconfig for recovery, right?  Perhaps we should have some logic that only mounts this and /apex for normal boot?  That might be needed for my above comment regarding removing /linkerconfig as a directory in first stage init.\n\nAn alternative, and much cleaner option if possible: could we call SetupMountNamespaces() later?  What would happen if we called it after the \u0027early-init\u0027 trigger?  To do this, we could add am.QueueBuiltinAction(SetupMountNamespaces, \"SetupMountNamespaces\"); after am.QueueEventTrigger(\"early-init\"); here: https://cs.corp.google.com/android/system/core/init/init.cpp?l\u003d718\n\nIf we can do that option, then the mounting of /apex and /linkerconfig can happen in init.rc in early-init.  Or maybe we need a stage early than early-init, since that\u0027s when linkerconfig and apexd-bootstrap themselves run, but still the same idea.\n\nIt would fix the recovery problem too, since the recovery init.rc would simply not try to mount these directories and not worry that they\u0027re not present.",
      "revId": "1f2a398bb7e52974449561e7ba6f6d6773e9a5be",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}