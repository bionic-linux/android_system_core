{
  "comments": [
    {
      "key": {
        "uuid": "18eef932_c23da0fc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-11-16T23:06:04Z",
      "side": 1,
      "message": "What\u0027re the pros/cons to doing it this way?  Why not have a scratch_a / scratch_b for this case?",
      "revId": "2da776f83f5bd05ad8268983f26f513a8da2ee35",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "331b2aa7_15670a48",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2018-11-16T23:47:32Z",
      "side": 1,
      "message": "The reason scratch got mentioned is because it\u0027s the only unsuffixed partition. Either we disallow them (and make overlayfs do scratch_a/scratch_b), or we allow them and figure out where they go.\n\nIf we allow one in each partition (as this patch does), it\u0027s basically as if they\u0027ve been automatically suffixed. It is a bit weird that the same name can be observed differently based on the slot, but that\u0027s basically what suffixing does to begin with. And nothing outside of fastbootd reads from the inactive super partition.\n\nAnother alternative is to put unsuffixed partitions in one place, and search both supers to find where it was placed. (Or always put them in \"A\" or something).\n\nOr finally, we could just disallow unsuffixed partitions on retrofit devices, and make overlayfs do scratch_a/scratch_b. I could see an argument that scratch should be suffixed even for non-retrofit devices, since then you could have separate modifications to both slots.\n\nIf we do want to support unsuffixed partitions, I\u0027m in favor of the approach in this patch. It doesn\u0027t force any changes to adb remount or overlayfs, and it makes the changes to OpenLogicalPartition and friends simpler.",
      "parentUuid": "18eef932_c23da0fc",
      "revId": "2da776f83f5bd05ad8268983f26f513a8da2ee35",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfc3e3ba_c7ede004",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-11-16T23:55:43Z",
      "side": 1,
      "message": "What would fastboot getvar / fastboot getvar all report with two scratch partitions?  I guess that\u0027s my only concern and it\u0027s not a particularly large one.\n\nI don\u0027t have a strong opinion either way, just curious to hear your / salyzyn@\u0027s opinion on the pros/cons here.  If you both think this is the best, then let\u0027s go for it.",
      "parentUuid": "331b2aa7_15670a48",
      "revId": "2da776f83f5bd05ad8268983f26f513a8da2ee35",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b052690b_64fea03f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2018-11-17T00:34:31Z",
      "side": 1,
      "message": "Good point - I just realized that \"getvar all\" will not report the inactive super partition. I\u0027ll fix that in the next version of this patch.\n\nPro for allowing unsuffixed partitions: it\u0027s almost no work to support them with this method. Con: I have no idea what to do about the getvar all case :) the simplest thing would be to ignore the inactive one (doing nothing, it would double-report it).\n\nPro for banning unsuffixed partitions: none of this weirdness. Cons: None for fastbootd. I\u0027m not sure for overlayfs. Need Mark\u0027s input on scratch_a/b.\n\n(Note: banning unsuffixed partitions would only need to be done on retrofit devices, but maybe it\u0027s a reasonable policy on any A/B device).",
      "parentUuid": "bfc3e3ba_c7ede004",
      "revId": "2da776f83f5bd05ad8268983f26f513a8da2ee35",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc139e8a_2510bbba",
        "filename": "fastboot/device/utility.cpp",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2018-11-16T23:06:04Z",
      "side": 1,
      "message": "Put this after the anonymous namespace?",
      "revId": "2da776f83f5bd05ad8268983f26f513a8da2ee35",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1cefa8b5_98416acd",
        "filename": "fastboot/device/utility.cpp",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2018-11-16T23:47:32Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "dc139e8a_2510bbba",
      "revId": "2da776f83f5bd05ad8268983f26f513a8da2ee35",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}