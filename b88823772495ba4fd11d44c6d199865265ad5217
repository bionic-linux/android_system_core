{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c3e2135c_b0c703dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1373349
      },
      "writtenOn": "2022-07-13T15:42:32Z",
      "side": 1,
      "message": "james",
      "revId": "b88823772495ba4fd11d44c6d199865265ad5217",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0548d60b_aea4207a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-07-15T00:09:25Z",
      "side": 1,
      "message": "can you explain why a lock that\u0027s only in that one function is actually useful? my default assumption is that something like this usually involves _multiple_ functions.\n\nin particular, the commit messages is quite unnerving --- \"avoid use after free\" _strongly_ implies that you need a lock in the freer as well as the user, but it looks like the code is really just \"make the race window smaller\", but it\u0027s still wrong?",
      "revId": "b88823772495ba4fd11d44c6d199865265ad5217",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f80a9f94_64bf705e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-07-15T00:23:52Z",
      "side": 1,
      "message": "actually, after looking at the bug (where the stack shows the caller is the Java UsbRequest stuff) --- i think that\u0027s where the bug is, no? i think this class is[1] WAI, but the calling Java is unsafe in that _it_ doesn\u0027t have locks around _its_ access to the underlying native object. for example, you can happily close() while other work is going on. i suspect if you fix that to be more like other Java classes with native peers that you won\u0027t need to touch libusbhost at all...\n\n1. as far as i could tell from a quick skim through, so let me know if you have context i don\u0027t!",
      "revId": "b88823772495ba4fd11d44c6d199865265ad5217",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}