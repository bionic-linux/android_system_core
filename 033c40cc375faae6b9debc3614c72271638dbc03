{
  "comments": [
    {
      "key": {
        "uuid": "f5172625_a268e85e",
        "filename": "fs_mgr/libdm/dm_target.cpp",
        "patchSetId": 6
      },
      "lineNbr": 198,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T00:01:02Z",
      "side": 1,
      "message": "nit: \u003c\u003c params",
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1895bc70_7615b1e7",
        "filename": "fs_mgr/libdm/dm_target.cpp",
        "patchSetId": 6
      },
      "lineNbr": 198,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2019-08-02T00:57:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f5172625_a268e85e",
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6befbbb4_4318e563",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapshot.h",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T00:01:02Z",
      "side": 1,
      "message": "In a later CL that I have, this doesn\u0027t work well if I include \u003cgtest/gtest.h\u003e before including this header.\n\nHowever, if I have #ifndef FRIEND_TEST around this, I can\u0027t unconditionally #undef it at the end of snapshot.h, because this will fail:\n\n    #include \u003cgtest/gtest.h\u003e\n    #include \"snapshot.h\"\n    class Foo { \n       FRIEND_TEST(Foo, Bar); // error: FRIEND_TEST not defined\n    };\n\nNot sure what\u0027s the best way to handle this. A workaround is to have something like:\n\n    #ifdef FRIEND_TEST\n    #define FRIEND_TEST_INTERNAL FRIEND_TEST\n    #else\n    #define FRIEND_TEST_INTERNAL ...\n    #endif\n    ...\n    #undef FRIEND_TEST_INTERNAL",
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22ce5883_0db7d71c",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapshot.h",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2019-08-02T00:18:58Z",
      "side": 1,
      "message": "Yuck, and there\u0027s no header-only-lib in gtest either. My other thought was:\n\n#ifndef FRIEND_TEST\n# define FRIEND_TEST ...\n# define DEFINED_FRIEND_TEST\n#endif\n\n...\n\n#ifdef DEFINED_FRIEND_TEST\n# undef FRIEND_TEST\n# undef DEFINED_FRIEND_TEST\n#endif",
      "parentUuid": "6befbbb4_4318e563",
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c53525e4_fd2dc884",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapshot.h",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T00:41:52Z",
      "side": 1,
      "message": "That would work too, although it is not very different from my workaround (we still have two variables defined). \n\nOr, I just always include \u003cgtest/gtest.h\u003e after everything...\n\nOr we add a header_lib for gtest, which I think is the cleanest.\n\nEither way, I am okay with you submitting the CL as-is; we can deal with this when we actually hit the error (i.e. with my CLs uploaded)",
      "parentUuid": "22ce5883_0db7d71c",
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62123a31_0994f409",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T00:01:02Z",
      "side": 1,
      "message": "nit: Why not LP_SECTOR_SIZE? To avoid circular dependencies? It is only in the headers though.",
      "range": {
        "startLine": 154,
        "startChar": 26,
        "endLine": 154,
        "endChar": 37
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7959564_7226700d",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2019-08-02T00:57:44Z",
      "side": 1,
      "message": "tl;dr it\u0027s in liblp since metadata_format.h is designed to be #included in bootloaders when needed. But really, it should be in libdm/dm.h, since it\u0027s a property of the kernel more than it is liblp. I\u0027ll replicate it there.",
      "parentUuid": "62123a31_0994f409",
      "range": {
        "startLine": 154,
        "startChar": 26,
        "endLine": 154,
        "endChar": 37
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "01e1f564_5ba6ae5e",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T01:05:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f7959564_7226700d",
      "range": {
        "startLine": 154,
        "startChar": 26,
        "endLine": 154,
        "endChar": 37
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bd5f12f3_71bed698",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 161,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T00:01:02Z",
      "side": 1,
      "message": "Is there a reason why this is in ext4_utils? Is this ext4 specific? (Looking at its implementation, it doesn\u0027t look like it) So maybe we should refactor and move this out of libext4_utils at some point...\n\n(libsnapshot is a static library, and both update_engine and init will need to include all its dependencies, which is a pain. Maybe it should just whole_static_libs: [libfiemap, libext4_utils].",
      "range": {
        "startLine": 161,
        "startChar": 24,
        "endLine": 161,
        "endChar": 45
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac2083cf_0e048c85",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 161,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2019-08-02T00:57:44Z",
      "side": 1,
      "message": "Yeah, this has bugged me for a while. Also, libext4_utils doesn\u0027t namespace anything. I don\u0027t know what would be a good candidate library though. Maybe tomcherry@ has an opinion.\n\nFWIW everything that includes liblp will already have included libext4_utils.",
      "parentUuid": "bd5f12f3_71bed698",
      "range": {
        "startLine": 161,
        "startChar": 24,
        "endLine": 161,
        "endChar": 45
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e6661d87_8de31474",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 161,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T01:05:59Z",
      "side": 1,
      "message": "Not \nhttps://android.googlesource.com/platform/system/update_engine/+/700d7c1194a0606454f53cef6ad4e457960402ea/Android.bp#190\n\n(I\u0027ll fix it in a follow-up CL when I use libsnapshot in update_engine)",
      "parentUuid": "ac2083cf_0e048c85",
      "range": {
        "startLine": 161,
        "startChar": 24,
        "endLine": 161,
        "endChar": 45
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e528b6af_f2653f35",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 541,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2019-08-02T00:01:02Z",
      "side": 1,
      "message": "nit",
      "range": {
        "startLine": 541,
        "startChar": 38,
        "endLine": 541,
        "endChar": 56
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a040dad_859253ee",
        "filename": "fs_mgr/libsnapshot/snapshot.cpp",
        "patchSetId": 6
      },
      "lineNbr": 541,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2019-08-02T00:57:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e528b6af_f2653f35",
      "range": {
        "startLine": 541,
        "startChar": 38,
        "endLine": 541,
        "endChar": 56
      },
      "revId": "033c40cc375faae6b9debc3614c72271638dbc03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}