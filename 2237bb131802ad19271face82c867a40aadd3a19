{
  "comments": [
    {
      "key": {
        "uuid": "7b6fe816_7b0d9749",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-09-30T01:52:31Z",
      "side": 1,
      "message": "1: Use UNIX sockets using libcutils library\n2: Address transition as discussed offline. Please see comments on \nRestartSnapuserd() API for code comments on the flow of transition logic.\n\n3: cow_snapuserd_test incorporates and tests all the APIs exposed through library.\n\nTodo: Integrate with dm-user (kernel) with respect to ABI changes\n",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5eaac5cd_cd1aa50e",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "nit: group with stdint.h",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c31b7991_bd7471f3",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5eaac5cd_cd1aa50e",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96be27a1_3503bd64",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "nit: group with android-base includes",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d62a8b29_21e777c6",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "96be27a1_3503bd64",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2751aaa6_84aa5734",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 123,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "I generally prefer to keep headers free of implementation as much as possible - for simple one-liners, or single-class headers, it seems fine. But too much makes it harder to skim classes. If you\u0027re worried about cluttering snapuserd.cpp you could always move this to buffer_sink.h/cpp or something.",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cec864e2_47aa76ed",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 123,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Thanks. I have refactored code from snapuserd.cpp and snapuserd.h accordingly. Created two new header files viz snapuserd_kernel.h which has all the kernel related information and snapuserd_daemon.h. No change in logic during refactoring.",
      "parentUuid": "2751aaa6_84aa5734",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b751e49_d929daa3",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 190,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "Any reason for the \"in_\" prefix here?",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c68024e0_14f8a774",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd.h",
        "patchSetId": 2
      },
      "lineNbr": 190,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "removed prefix.",
      "parentUuid": "7b751e49_d929daa3",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edf3398c_01cda211",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_client.h",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "nit: move into C include block above",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b24d97f2_a0bbea54",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_client.h",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "edf3398c_01cda211",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da88b63c_944a2087",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_client.h",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "nit: move into C include block",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6f352f6_976747e5",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_client.h",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "da88b63c_944a2087",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ca20b68_5660d2a7",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "std::unique_ptr",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "555e587d_13324064",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3ca20b68_5660d2a7",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "872451e5_37682938",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 76,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "exit_signal_, future_obj_",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce1a3517_af3cd7a8",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 76,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "872451e5_37682938",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d4e979e9_80954090",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "unique_fd",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "473f8de4_ee6125e6",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d4e979e9_80954090",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "93fb96da_80e7245a",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 104,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "Especially functions like this, IMO (as well as GetDaemonStatus, ParseMsg), are much happier in the .cpp file. It helps to see all the important stuff together in one place.",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed9b92f3_624374a5",
        "filename": "fs_mgr/libsnapshot/include/libsnapshot/snapuserd_server.h",
        "patchSetId": 2
      },
      "lineNbr": 104,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "93fb96da_80e7245a",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfa77a0b_20e33beb",
        "filename": "fs_mgr/libsnapshot/snapuserd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "This seems important - if so, file a bug, reference bug number here?",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77b7c310_94dea948",
        "filename": "fs_mgr/libsnapshot/snapuserd.cpp",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "I will fix this as I am tracking it. I have the code change but I am running into some kernel hang when I mask signals and looking into it. I have added the bug number but yes, this is important.",
      "parentUuid": "cfa77a0b_20e33beb",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2365014_9d86800f",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "Is a partial send possible here?",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42067cd0_ff4a80da",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "It looks like send() will block if there is no room for entire message and socket file descriptor does not have O_NONBLOCK. However, I am not sure how kernel implements when signal is received during message transmission. \n\nI have handled the partial send case; will double check later.",
      "parentUuid": "e2365014_9d86800f",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c3bf953a_89995995",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "PLOG (appends strerror for you)",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46d3db4f_cce62cfe",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c3bf953a_89995995",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5794f795_5af07fe5",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "PLOG",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24461d52_91598fd9",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5794f795_5af07fe5",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b84b1d45_55a354cf",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-10-01T02:25:54Z",
      "side": 1,
      "message": "Avoid else-after-return - remove the \"else {\" and you can drop an indentation level off the rest of the code.",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0870ef5_c678f83b",
        "filename": "fs_mgr/libsnapshot/snapuserd_server.cpp",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1724998
      },
      "writtenOn": "2020-10-01T07:01:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b84b1d45_55a354cf",
      "revId": "2237bb131802ad19271face82c867a40aadd3a19",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}