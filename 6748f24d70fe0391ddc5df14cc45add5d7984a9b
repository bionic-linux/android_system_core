{
  "comments": [
    {
      "key": {
        "uuid": "9b7ff580_f1edbc9e",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 266,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-04-12T14:44:04Z",
      "side": 1,
      "message": "Hmm, my tests showed \"bg\" was reported? why?\n\nBut since only an SP_SYSTEM can write to system_bg_cputset_fd (system-background), it makes sense that SP_SYSTEM is what is reported back for the policy.",
      "range": {
        "startLine": 265,
        "startChar": 0,
        "endLine": 266,
        "endChar": 32
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9d8e1832_c5d06aa6",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 266,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-04-12T17:17:43Z",
      "side": 1,
      "message": "yeah, i can\u0027t reproduce this either, though the code does seem wrong...\n\nangler:/ # grep system-back /proc/*/cgroup | head                                                                \n/proc/342/cgroup:3:cpuset:/system-background\n/proc/343/cgroup:3:cpuset:/system-background\n/proc/349/cgroup:3:cpuset:/system-background\n/proc/352/cgroup:3:cpuset:/system-background\n/proc/393/cgroup:3:cpuset:/system-background\n/proc/394/cgroup:3:cpuset:/system-background\n/proc/395/cgroup:3:cpuset:/system-background\n/proc/3957/cgroup:3:cpuset:/system-background\n/proc/396/cgroup:3:cpuset:/system-background\n/proc/397/cgroup:3:cpuset:/system-background\nangler:/ # ps -O PCY 342 343 349 352 393 394 395 3957 396 397                                                    \nUSER           PID  PPID     VSZ    RSS WCHAN            ADDR S PCY NAME                       \nlogd           342     1   22008   5804 sigsuspend 7350d6f198 S  bg logd\nsystem         343     1   13772   3308 SyS_epoll+ 7f95c12fd0 S  bg hwservicemanager\nsystem         349     1   11164   1836 do_wait    73e0f03110 S  bg qseecomd\nsystem         352   349   17104   1168 sigsuspend 73e0f02198 S  bg qseecomd\nroot           393     1   19400   2348 do_sigtim+ 735d5ab1b0 S  bg pm-service\nnobody         394     1   17772   1868 poll_sche+ 75eba8e108 S  bg rmt_storage\nroot           395     1    9756   1876 poll_sche+ 7bb8dbc0f0 S  bg msm_irqbalance\nroot           396     1    8888   1660 SyS_epoll+ 7c0c144fd0 S  bg lmkd\nsystem         397     1   10236   2276 binder_th+ 7bd13360c0 S  bg servicemanager\nsystem        3957     1  244228  23484 SyS_epoll+ 70062d2fe8 S  bg surfaceflinger\nangler:/ #",
      "parentUuid": "9b7ff580_f1edbc9e",
      "range": {
        "startLine": 265,
        "startChar": 0,
        "endLine": 266,
        "endChar": 32
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "474f2256_43e58c81",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 458,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-04-12T14:44:04Z",
      "side": 1,
      "message": "is this what we want to report back?",
      "range": {
        "startLine": 458,
        "startChar": 25,
        "endLine": 458,
        "endChar": 29
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c48636bb_7f573578",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 460,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-04-12T14:44:04Z",
      "side": 1,
      "message": "these are missing too!",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 30
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "984f799a_8b75c07c",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 460,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-04-12T14:49:12Z",
      "side": 1,
      "message": "yeah, but if you look at the implementation, it looks like these are actually just \u003d\u003d SP_FOREGROUND anyway.\n\nSP_AUDIO_APP is currently unused, so we could just remove it. bt seems to be using SP_AUDIO_SYS (so we\u0027d have to at least switch them to an explicit SP_FOREGROUND).",
      "parentUuid": "c48636bb_7f573578",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 30
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3972d5ba_f5fa65b1",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 460,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2017-04-12T17:50:17Z",
      "side": 1,
      "message": "samething on marlin\nmarlin:/dev/cpuset/system-background # cat tasks |head\n463\n464\n465\n466\n467\n468\n481\n483\n496\n497\nmarlin:/dev/cpuset/system-background # ps -T -O PCY --pid 463 464 465 466 497\nUSER           PID   TID  PPID     VSZ    RSS WCHAN            ADDR S PCY CMD            \nsystem         463   463     1   13700   2848 SyS_epoll+ 7f431d03d0 S  bg hwservicemanage\nlogd           464   464     1   26224  11356 sigsuspend 7d83073598 S  bg logd\nlogd           464   465     1   26224  11356 futex_wai+ 7d830287b0 S  bg logd.daemon\nlogd           464   466     1   26224  11356 poll_sche+ 7d83073508 S  bg logd.reader\nlogd           464   497     1   26224  11356 poll_sche+ 7d83073508 S  bg logd.auditd",
      "parentUuid": "984f799a_8b75c07c",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 30
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "125a091f_cd3e9504",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 460,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2017-04-12T17:55:02Z",
      "side": 1,
      "message": "I have a hypothesis: maybe it is because, we don\u0027t verify this returning \"-1\"\nhttps://cs.corp.google.com/android/external/toybox/toys/posix/ps.c?type\u003dcs\u0026q\u003dget_sched_policy\u0026sq\u003dpackage:%5Eandroid$\u0026l\u003d541\nand \"bg\" is actually \"0\" per enum seq.\nI need to fine if where we allocate the buf and if it is default 0.",
      "parentUuid": "3972d5ba_f5fa65b1",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 30
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef8e14f2_b600dbe1",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 460,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2017-04-12T17:56:13Z",
      "side": 1,
      "message": "link is wrong, correct https://cs.corp.google.com/android/external/toybox/toys/posix/ps.c?type\u003dcs\u0026q\u003dget_sched_policy\u0026sq\u003dpackage:%5Eandroid$\u0026l\u003d739",
      "parentUuid": "125a091f_cd3e9504",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 30
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbc739a1_fb2c1479",
        "filename": "libcutils/sched_policy.cpp",
        "patchSetId": 1
      },
      "lineNbr": 460,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2017-04-12T18:04:49Z",
      "side": 1,
      "message": "Yup, seems toybuf is static as all \"0\" by default",
      "parentUuid": "ef8e14f2_b600dbe1",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 30
      },
      "revId": "6748f24d70fe0391ddc5df14cc45add5d7984a9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}