{
  "comments": [
    {
      "key": {
        "uuid": "6051780e_f0055cd1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-05-12T15:29:02Z",
      "side": 1,
      "message": "This is no longer true as of https://android-review.googlesource.com/c/platform/external/selinux/+/916356 . This xattr, and the behavior described, no longer exists.",
      "range": {
        "startLine": 14,
        "startChar": 25,
        "endLine": 16,
        "endChar": 39
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7c777fc_2fccf0a9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1421169
      },
      "writtenOn": "2020-05-21T20:15:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6051780e_f0055cd1",
      "range": {
        "startLine": 14,
        "startChar": 25,
        "endLine": 16,
        "endChar": 39
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc598a09_149ed086",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-05-12T15:29:02Z",
      "side": 1,
      "message": "There are two scenerios:\n\n1) The program changes the label to be consistent with the file_contexts entry.\n\nIn this case, no restorecon is necessary.\n\n2) The program changes the label to be inconstant with the file_contexts entry.\n\nThis is a program bug, and running \"restorecon --force\" is inappropriate to resolve this bug. The program and the SELinux labeling config are specifying conflicting labeling decisions, which can lead to inconsistent behavior. The two processes should not fight with each other. Any program which handles labeling decisions (which it shouldn\u0027t) needs to make labeling decisions consistent with the file_contexts entry.  The correct solution is to fix the program.\n\n\nIn both of these cases, supporting --force in the init language is just masking bugs, and is incorrect.",
      "range": {
        "startLine": 20,
        "startChar": 31,
        "endLine": 22,
        "endChar": 47
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b77aa1ab_b5944196",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-05-12T15:43:14Z",
      "side": 1,
      "message": "Entering vendor_init via /vendor/binm/toybox_vendor should not work. This is a neverallow violation, specifically line 263 of\n\nhttps://android.googlesource.com/platform/system/sepolicy/+/44328c061d67636d4d8047ac69c4e778467eb4e8/public/vendor_init.te#263\n\nThe only entrypoint to the vendor_init domain is the init binary. Other binaries are not allowed to be entrypoints for vendor_init.\n\nAre you sure you\u0027re able to do this? I\u0027ll try to reproduce this. If it works, it\u0027s a security bug.",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 66
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43d6f2b7_580e47c1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1421169
      },
      "writtenOn": "2019-05-17T07:23:05Z",
      "side": 1,
      "message": "It still works on Pie, but the needed entrypoint(https://github.com/sonyxperiadev/device-sony-sepolicy/blob/191f147f3381102383301ba9a24505f7a7f907b4/vendor/vendor_init.te#L44) from toybox_vendor is no longer valid on master/Q.\n\nMaybe we can still get around this in Q by putting toybox_vendor into its own domain and giving it {getattr setattr} on u:r:unlabeled dirs/files on /persist so it can clear the xattr.\nBut you see that our escape hatches are dwindling.",
      "parentUuid": "b77aa1ab_b5944196",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 66
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2dcfd38_c7fd36c8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1421169
      },
      "writtenOn": "2020-05-21T20:15:23Z",
      "side": 1,
      "message": "In case you\u0027re interested, that\u0027s how we solved it in Q:\nhttps://github.com/sonyxperiadev/device-sony-common/blob/eaeefad2706349531097346ed78b17cae731185f/rootdir/vendor/etc/init/hw/init.common.rc#L98-L101\nhttps://github.com/sonyxperiadev/device-sony-sepolicy/blob/56fc2a13fc78b3acfa785009dbfb541621d69b69/vendor/vendor_toolbox.te\n\nAnd if you really want to get excited, that is what others actually have to resort to:\nhttps://review.lineageos.org/c/LineageOS/android_device_motorola_sdm660-common/+/272988/2",
      "parentUuid": "43d6f2b7_580e47c1",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 28,
        "endChar": 66
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4b9e0ad_16e34468",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-05-12T15:33:08Z",
      "side": 1,
      "message": "The best fix is to restructure the programs to avoid any relabelfrom / relabelto permissions, and have init solely responsible for the permissions of the /persist directory. Distributing responsibility for labeling to multiple programs is just asking for trouble. To the extent possible, programs should never need to be SELinux aware to operate.",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18901724_15e67ccc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1421169
      },
      "writtenOn": "2020-05-21T20:15:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e4b9e0ad_16e34468",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "9f7691652d8405380d3336e3b786133df5391b49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}