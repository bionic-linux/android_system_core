{
  "comments": [
    {
      "key": {
        "uuid": "1d89b03a_137b749e",
        "filename": "logd/LogAudit.cpp",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2016-02-09T21:32:53Z",
      "side": 1,
      "message": "getprop(\"ro.build.type\")?",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "84c667f42fd4c188dff17e1fb81445ed0b772331",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3d8e7442_f14d02b5",
        "filename": "logd/LogAudit.cpp",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2016-02-09T21:31:18Z",
      "side": 1,
      "message": "logd is running _before_ /data is mounted. What are the implications if persist properties are not written? (device                   is stuck in a reboot loop, or randomly reboots and does not enter safe mode, either are bad).\n\nYou can add some redundancy in those that check these flags by also inspecting /sys/fs/pstore/console-ramoops for the log message. Not to be trusted, but it takes you from 99% to 99.99%.",
      "range": {
        "startLine": 101,
        "startChar": 4,
        "endLine": 101,
        "endChar": 46
      },
      "revId": "84c667f42fd4c188dff17e1fb81445ed0b772331",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fdc21c56_fd523b3c",
        "filename": "logd/LogAudit.cpp",
        "patchSetId": 1
      },
      "lineNbr": 109,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2016-02-09T21:31:18Z",
      "side": 1,
      "message": "The reboot message can also be used as a means of communicating safe mode rather than depending on /data presence or integrity, it would show in the kernel command line as reboot reason?",
      "range": {
        "startLine": 109,
        "startChar": 4,
        "endLine": 109,
        "endChar": 43
      },
      "revId": "84c667f42fd4c188dff17e1fb81445ed0b772331",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ddbd58cb_b625468b",
        "filename": "logd/LogAudit.cpp",
        "patchSetId": 1
      },
      "lineNbr": 135,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2016-02-09T21:08:49Z",
      "side": 1,
      "message": "It would be good to at least add a warning message to dmesg, even on userdebug/eng builds, to at least know this code is getting executed.",
      "revId": "84c667f42fd4c188dff17e1fb81445ed0b772331",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fdc21c56_ddcbbf67",
        "filename": "logd/LogAudit.cpp",
        "patchSetId": 1
      },
      "lineNbr": 135,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2016-02-09T21:18:47Z",
      "side": 1,
      "message": "That is happening, the logToDmesg is such a warning. Or do you want it a WARNING level, as these are all at INFO level.\n\nPlease look at https://android-review.googlesource.com/#/c/201775, sounds like _that_ needs to be extended to support prwarn()?",
      "parentUuid": "ddbd58cb_b625468b",
      "revId": "84c667f42fd4c188dff17e1fb81445ed0b772331",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d89b03a_9319249f",
        "filename": "logd/LogAudit.cpp",
        "patchSetId": 1
      },
      "lineNbr": 135,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2016-02-09T21:24:54Z",
      "side": 1,
      "message": "line 141 is only reachable if AUDITD_ENFORCE_INTEGRITY is true, which is only on user builds. On userdebug / eng builds, this entire block is a no-op.\n\nSpecifically, I\u0027d like to see this block replaced by something like:\n\nif (loaded) {\n  if (policyLoaded) {\n    // Policy changes are not allowed. Reboot to safe mode to limit\n    // damage.\n    if (AUDITD_ENFORCE_INTEGRITY) { \n      enterSafeMode();\n    } else {\n      logToDmesg(\"Integrity Enforcement Suppressed - not rebooting to safe mode\");\n    }\n  } else {\n    logToDmesg(\"policy loaded; enforcing integrity\");\n    policyLoaded \u003d true;\n  }\n}",
      "parentUuid": "fdc21c56_ddcbbf67",
      "revId": "84c667f42fd4c188dff17e1fb81445ed0b772331",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}