{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "904366c3_9b709919",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-01-04T17:13:36Z",
      "side": 1,
      "message": "otherwise looks plausible...",
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8e8711d_20cca6b6",
        "filename": "usbd/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-01-04T17:13:36Z",
      "side": 1,
      "message": "tab",
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "add6d303_377f105a",
        "filename": "usbd/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-01-04T22:09:33Z",
      "side": 1,
      "message": "bpfmt -w Android.bp",
      "parentUuid": "d8e8711d_20cca6b6",
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60189a32_9e223b5c",
        "filename": "usbd/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1292828
      },
      "writtenOn": "2023-01-05T08:21:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "add6d303_377f105a",
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3464b00_4ded78ab",
        "filename": "usbd/usbd.cpp",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1042384
      },
      "writtenOn": "2023-01-04T19:40:09Z",
      "side": 1,
      "message": "The call looks like will wait indefinitely when NOT declared(Refer to: https://source.corp.google.com/android/prebuilts/vndk/v32/x86/include/frameworks/native/libs/binder/ndk/include_platform/android/binder_manager.h;l\u003d87?q\u003dAServiceManager_waitForService\u0026sq\u003dpackage:%5Eandroid$\u0026start\u003d21)\n\nAServiceManager_isDeclared can be used to check if the AIDL service is declared.\n\nAlso, the code has to fall back to retrieving HIDL usbgadget service when AIDL usbgadget is not declared. This for remaining backwards compatible to devices which are under GRF/VF which were launched in previous desserts and are just upgrading to Android U.\n\nsmoreland@/devinmoore@ please correct me if I am wrong.",
      "range": {
        "startLine": 44,
        "startChar": 28,
        "endLine": 44,
        "endChar": 58
      },
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26a295d9_ff31e6f1",
        "filename": "usbd/usbd.cpp",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-01-04T19:50:12Z",
      "side": 1,
      "message": "Correct, and correct!",
      "parentUuid": "d3464b00_4ded78ab",
      "range": {
        "startLine": 44,
        "startChar": 28,
        "endLine": 44,
        "endChar": 58
      },
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "706f36d2_5b9b8e53",
        "filename": "usbd/usbd.cpp",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-01-04T22:09:33Z",
      "side": 1,
      "message": "if (AServiceManager_isDeclared(...)) { AServiceManager_waitForService(...)}",
      "parentUuid": "26a295d9_ff31e6f1",
      "range": {
        "startLine": 44,
        "startChar": 28,
        "endLine": 44,
        "endChar": 58
      },
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1aeed55f_9b0efb98",
        "filename": "usbd/usbd.cpp",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1292828
      },
      "writtenOn": "2023-01-05T08:21:31Z",
      "side": 1,
      "message": "Thanks the advises.\n \nIn the old way it used V1_0::IUsbGadget to get HIDL service.\nI changed to aidl::IUsbGadget.\nI am not sure how to get the HIDL service, is there any example?\n```\nif(AServiceManager_isDeclared(service_name.c_str())) {\n        shared_ptr\u003cIUsbGadget\u003e gadget \u003d IUsbGadget::fromBinder(\n                ndk::SpAIBinder(AServiceManager_waitForService(service_name.c_str())));\n    } else {\n        //Implement get the HIDL service\n    }\n```",
      "parentUuid": "706f36d2_5b9b8e53",
      "range": {
        "startLine": 44,
        "startChar": 28,
        "endLine": 44,
        "endChar": 58
      },
      "revId": "d31879b812b770055276521d1e3c8bec47084a76",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}