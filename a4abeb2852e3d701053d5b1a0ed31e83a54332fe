{
  "comments": [
    {
      "key": {
        "uuid": "40867080_7ff122e3",
        "filename": "fs_mgr/libdm/dm.cpp",
        "patchSetId": 3
      },
      "lineNbr": 144,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-05-15T15:55:28Z",
      "side": 1,
      "message": "I just worry about this check.  I know we use it elsewhere, but it has a few caveats now: it will be true in fastbootd and it will be true before the first switch_root in first_stage_init (though, I don\u0027t think we use libdm before then)\n\nMay that cause some problems?  Or do the property checks below fully distinguish the fastbootd case from the non-AB OTA case?  It may be worth a comment on the function in either case.",
      "revId": "a4abeb2852e3d701053d5b1a0ed31e83a54332fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3cbd357_2d8e6216",
        "filename": "fs_mgr/libdm/dm.cpp",
        "patchSetId": 3
      },
      "lineNbr": 145,
      "author": {
        "id": 1421169
      },
      "writtenOn": "2020-05-15T15:57:31Z",
      "side": 1,
      "message": "Even older recoveries might not mount /system\nThere must be a better way to determine if in recovery.",
      "parentUuid": "",
      "revId": "a4abeb2852e3d701053d5b1a0ed31e83a54332fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "106a7213_951e65a1",
        "filename": "fs_mgr/libdm/dm.cpp",
        "patchSetId": 3
      },
      "lineNbr": 145,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-05-15T16:02:21Z",
      "side": 1,
      "message": "I forget when we made the change, but recovery.img now uses /system/bin/... as its filesystem, mirroring the layout of system.img, so trying to access that file doesn\u0027t imply mounting /system.\n\nBut you\u0027re right in that since we changed that path, older recoveries may not have recovery in that location, so we\u0027ll need a better check for them.",
      "parentUuid": "f3cbd357_2d8e6216",
      "revId": "a4abeb2852e3d701053d5b1a0ed31e83a54332fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc6923e5_34b8f0d6",
        "filename": "fs_mgr/libdm/dm.cpp",
        "patchSetId": 3
      },
      "lineNbr": 145,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2020-05-15T17:58:48Z",
      "side": 1,
      "message": "This is only relevant to DAP devices (i.e. Q-launches) upgrading to R. Are there other recovery paths possible on Q? (Non-DAP devices won\u0027t using libdm in the updater, and non-A/B has no retrofit DAP case.)",
      "parentUuid": "106a7213_951e65a1",
      "revId": "a4abeb2852e3d701053d5b1a0ed31e83a54332fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff5b2551_d5177ae2",
        "filename": "fs_mgr/libdm/dm.cpp",
        "patchSetId": 3
      },
      "lineNbr": 145,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-05-15T19:43:44Z",
      "side": 1,
      "message": "+1 to David\u0027s comment. Although, DAP devices doesn\u0027t necessary mean Q launches; we have DAP retrofits.",
      "parentUuid": "dc6923e5_34b8f0d6",
      "revId": "a4abeb2852e3d701053d5b1a0ed31e83a54332fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45382337_def58613",
        "filename": "fs_mgr/libdm/dm.cpp",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-05-15T19:43:44Z",
      "side": 1,
      "message": "From Build.java:\n```\n         * The user-visible version string.  E.g., \"1.0\" or \"3.4b5\" or \"bananas\".\n         *\n         * This field is an opaque string. Do not assume that its value\n         * has any particular structure or that values of RELEASE from\n         * different releases can be somehow ordered.\n```\n\nI see this pattern in various places. Is there a reason why ro.build.version.sdk isn\u0027t used release? (Tom, do you know?)",
      "range": {
        "startLine": 171,
        "startChar": 53,
        "endLine": 171,
        "endChar": 77
      },
      "revId": "a4abeb2852e3d701053d5b1a0ed31e83a54332fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "257948b8_2b22ac93",
        "filename": "fs_mgr/libdm/dm.cpp",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-05-15T19:52:56Z",
      "side": 1,
      "message": "I have no idea, sorry.",
      "parentUuid": "45382337_def58613",
      "range": {
        "startLine": 171,
        "startChar": 53,
        "endLine": 171,
        "endChar": 77
      },
      "revId": "a4abeb2852e3d701053d5b1a0ed31e83a54332fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}