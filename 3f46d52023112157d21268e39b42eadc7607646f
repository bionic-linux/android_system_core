{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "49eb3499_339d938e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 21
      },
      "lineNbr": 11,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2022-03-16T00:13:20Z",
      "side": 1,
      "message": "ignore error code is one thing, but I think we should also consider avoid the access syscall \n\nfor now vendor need override NormalIoPriority by removing the entry which doesn\u0027t exist for the I/O scheduler it is using, right?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 69
      },
      "revId": "3f46d52023112157d21268e39b42eadc7607646f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc089470_a1bb24b2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 21
      },
      "lineNbr": 11,
      "author": {
        "id": 1869780
      },
      "writtenOn": "2022-03-16T00:53:04Z",
      "side": 1,
      "message": "The access() system call has been removed.\n\nThe functionality of this patch is needed to support the cgroup v1 and v2 hierarchies with a single task_profiles.json file.",
      "parentUuid": "49eb3499_339d938e",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 69
      },
      "revId": "3f46d52023112157d21268e39b42eadc7607646f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "356e4942_7e9d5467",
        "filename": "/COMMIT_MSG",
        "patchSetId": 21
      },
      "lineNbr": 11,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2022-03-16T05:34:41Z",
      "side": 1,
      "message": "while we still have WriteStringToFile the write syscall.\n\ne.g. for a CFQ device, we really don\u0027t need write to the BFQ attribute (and 50% of syscall is just pure waste and expected failure)\n\nSo for devices with CFQ can we have a device task_profiles.json to just include CFQ attribute, similarly for BFQ.",
      "parentUuid": "bc089470_a1bb24b2",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 69
      },
      "revId": "3f46d52023112157d21268e39b42eadc7607646f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "026cc5ed_8bad9606",
        "filename": "/COMMIT_MSG",
        "patchSetId": 21
      },
      "lineNbr": 11,
      "author": {
        "id": 1869780
      },
      "writtenOn": "2022-03-16T17:15:44Z",
      "side": 1,
      "message": "I prefer to keep the current approach since all approaches I can think of to address the above comment involve a significant increase in complexity and hence involve the risk of introducing new bugs:\n* Split task_profiles.json into three files: attributes that are independent of the I/O scheduler, attributes that are CFQ specific and attributes that are BFQ specific. Only apply the CFQ and/or BFQ attributes if the corresponding I/O scheduler kernel module has been loaded.\n* Keep a single task_profiles.json profile and skip attributes that are known not to exist. Find a good approach for libprocessgroup to determine which cgroup attributes exist and which ones not.",
      "parentUuid": "356e4942_7e9d5467",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 69
      },
      "revId": "3f46d52023112157d21268e39b42eadc7607646f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "062877ea_c7397b58",
        "filename": "/COMMIT_MSG",
        "patchSetId": 21
      },
      "lineNbr": 11,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2022-03-17T23:10:01Z",
      "side": 1,
      "message": "sg, I filed https://b.corp.google.com/issues/225231922",
      "parentUuid": "026cc5ed_8bad9606",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 69
      },
      "revId": "3f46d52023112157d21268e39b42eadc7607646f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fc84a627_2dc45371",
        "filename": "libprocessgroup/task_profiles.cpp",
        "patchSetId": 21
      },
      "lineNbr": 215,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2022-03-16T00:18:40Z",
      "side": 1,
      "message": "Wei\u0027s comment reminded that this would introduce an additional access syscall every time we execute this action. This might introduce additional overhead. I remember the early version had something like:\n```\nif (!WriteStringToFile(value_, path)) {\n    if (optional_ \u0026\u0026 errno \u003d\u003d ENOENT) {\n        return true;\n    }\n    PLOG(ERROR) \u003c\u003c \"Failed to write \u0027\" \u003c\u003c value_ \u003c\u003c \"\u0027 to \" \u003c\u003c path;\n    return false;\n}\n```\nbut there was some issue with some error being logged during the failure?",
      "range": {
        "startLine": 208,
        "startChar": 4,
        "endLine": 215,
        "endChar": 5
      },
      "revId": "3f46d52023112157d21268e39b42eadc7607646f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5a3b3d02_33a2c830",
        "filename": "libprocessgroup/task_profiles.cpp",
        "patchSetId": 21
      },
      "lineNbr": 215,
      "author": {
        "id": 1869780
      },
      "writtenOn": "2022-03-16T00:53:04Z",
      "side": 1,
      "message": "The access() system call has been removed.",
      "parentUuid": "fc84a627_2dc45371",
      "range": {
        "startLine": 208,
        "startChar": 4,
        "endLine": 215,
        "endChar": 5
      },
      "revId": "3f46d52023112157d21268e39b42eadc7607646f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}