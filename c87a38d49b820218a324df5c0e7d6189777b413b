{
  "comments": [
    {
      "key": {
        "uuid": "05744960_bafecb0e",
        "filename": "fastboot/Android.mk",
        "patchSetId": 15
      },
      "lineNbr": 60,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "tabs",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 60,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7b69bf1_e5eabb29",
        "filename": "fastboot/Android.mk",
        "patchSetId": 15
      },
      "lineNbr": 60,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "05744960_bafecb0e",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 60,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "752ed26d_c493204e",
        "filename": "fastboot/engine.cpp",
        "patchSetId": 15
      },
      "lineNbr": 324,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "you\u0027re still adding a copy here.\n\n(32-bit Windows users and folks doing automated testing on 50 devices at once regularly run out of RAM and even address space.)",
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1335d8a1_2e867113",
        "filename": "fastboot/engine.cpp",
        "patchSetId": 15
      },
      "lineNbr": 324,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-11T23:25:32Z",
      "side": 1,
      "message": "This will go away once I migrate fastboot.cpp and engine.cpp to use the new API. I will then directly pass a vector instead of having to convert a C array to it.\n\n\nAlso, this will not build on 32-bit platforms, as libadb (a dependency) refuses to compile for 32-bit mode.",
      "parentUuid": "752ed26d_c493204e",
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "435e9bb5_fcb5e892",
        "filename": "fastboot/engine.h",
        "patchSetId": 15
      },
      "lineNbr": 79,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "is this necessary any more?",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 79,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67a803cb_55464dc7",
        "filename": "fastboot/engine.h",
        "patchSetId": 15
      },
      "lineNbr": 79,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "I will fix this in a separate patch.",
      "parentUuid": "435e9bb5_fcb5e892",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 79,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca8a091c_94eb286b",
        "filename": "fastboot/engine.h",
        "patchSetId": 15
      },
      "lineNbr": 82,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "if we\u0027re adding a namespace, these two can just be functions in the namespace.",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 82,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7528728d_ea43fb5e",
        "filename": "fastboot/engine.h",
        "patchSetId": 15
      },
      "lineNbr": 82,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ca8a091c_94eb286b",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 82,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "048d6fef_f2c92f5b",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 1,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "copyright header",
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57cd5bbe_bc3234c6",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 1,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "048d6fef_f2c92f5b",
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "63684cc3_d99ac5f5",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 1,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "048d6fef_f2c92f5b",
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fd9c5ab_cddd93d0",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 9,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "https://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 9,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba713de9_a93b9f8e",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 9,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5fd9c5ab_cddd93d0",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 9,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3a122e8_84eb2a07",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 9,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5fd9c5ab_cddd93d0",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 9,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8fd3636_34907578",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 40,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "just \"upload\" is fine",
      "range": {
        "startLine": 40,
        "startChar": 11,
        "endLine": 40,
        "endChar": 22
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74add01a_5d9a8b4e",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 40,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b8fd3636_34907578",
      "range": {
        "startLine": 40,
        "startChar": 11,
        "endLine": 40,
        "endChar": 22
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06c4def3_cd0687b4",
        "filename": "fastboot/fastboot_commands.cpp",
        "patchSetId": 15
      },
      "lineNbr": 40,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b8fd3636_34907578",
      "range": {
        "startLine": 40,
        "startChar": 11,
        "endLine": 40,
        "endChar": 22
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18c9d86c_ddb70fbe",
        "filename": "fastboot/fastboot_driver.cpp",
        "patchSetId": 15
      },
      "lineNbr": 59,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "?",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 59,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e42061e9_d42d1908",
        "filename": "fastboot/fastboot_driver.cpp",
        "patchSetId": 15
      },
      "lineNbr": 59,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Whoever instantiates the fastboot instance is providing the transport, so the deconstructor should not mutate it\u0027s state.",
      "parentUuid": "18c9d86c_ddb70fbe",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 59,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f797ac1_f6a15575",
        "filename": "fastboot/fastboot_driver.h",
        "patchSetId": 15
      },
      "lineNbr": 232,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "i think something like the existing Action makes more sense than all this copy \u0026 paste. this feels like it\u0027s obfuscating what\u0027s going on without adding anything in return.",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 232,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c78e5f4a_d174b054",
        "filename": "fastboot/fastboot_driver.h",
        "patchSetId": 15
      },
      "lineNbr": 232,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-11T23:25:32Z",
      "side": 1,
      "message": "The real benefit occurs once you migrate engine.cpp to use this. Instead of having to queue the messy Action structs, you can queue the Commands themselves, then process them through their polymorphic interface. That was the real reason for doing this.\n\n\nAdditionally, it completely isolates knowledge of how to read and write from files, decode sparse files, etc... from the fastboot implementation.",
      "parentUuid": "0f797ac1_f6a15575",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 232,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4278d534_268f831a",
        "filename": "fastboot/fastboot_driver.h",
        "patchSetId": 15
      },
      "lineNbr": 232,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-11T23:37:33Z",
      "side": 1,
      "message": "Also, another major issue with engine.cpp and the Action struct enum way of doing it, is that engine.cpp should not be responsible for knowing that, for example, a \"getvar\" command requires concatenating a \"gevar:\" + \"var\". Or flash is \"flash:\" + partition. \n\nIt should not have to know about this, or care about it. If you tried to abstract this away with the current design, you will end up with a million enum codes, and an even larger mess of:\n\nif (enum \u003d\u003d OP_XXXXX) { call something }\n\n\nSeeing a pattern like this is begging to be implemented in polymorphic way, which is exactly what the Command class accomplishes.",
      "parentUuid": "c78e5f4a_d174b054",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 232,
        "endChar": 0
      },
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f575ad2_d75a8afb",
        "filename": "fastboot/usb.h",
        "patchSetId": 15
      },
      "lineNbr": 34,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-07-11T22:24:38Z",
      "side": 1,
      "message": "(all this USB stuff should be a separate change.)",
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "532cd7a8_c9ce4858",
        "filename": "fastboot/usb.h",
        "patchSetId": 15
      },
      "lineNbr": 34,
      "author": {
        "id": 1336956
      },
      "writtenOn": "2018-07-12T19:28:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4f575ad2_d75a8afb",
      "revId": "c87a38d49b820218a324df5c0e7d6189777b413b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}