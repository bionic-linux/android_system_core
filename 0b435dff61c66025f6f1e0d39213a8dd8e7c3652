{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b30c8641_e23a899e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-08-22T14:52:33Z",
      "side": 1,
      "message": "(at a higher level, it\u0027s probably time you stopped copy \u0026 pasting this fragment into 20 different projects and add a libuclamp or whatever, even if it\u0027s header-only...)",
      "revId": "0b435dff61c66025f6f1e0d39213a8dd8e7c3652",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e0b3d0e_0fb510ff",
        "filename": "init/service.cpp",
        "patchSetId": 1
      },
      "lineNbr": 238,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-08-22T14:51:35Z",
      "side": 1,
      "message": "but this type is in the same header file as every time we have this conversation... please don\u0027t duplicate this.\n\n(i don\u0027t think you need to duplicate the constants above either?)",
      "revId": "0b435dff61c66025f6f1e0d39213a8dd8e7c3652",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6164802_2ef9547e",
        "filename": "init/service.cpp",
        "patchSetId": 1
      },
      "lineNbr": 260,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-08-22T14:51:35Z",
      "side": 1,
      "message": "oh, if you\u0027re building for glibc too, i\u0027d suggest either (a) wait for ccross and use musl [with up to date uapi headers] instead or (b) move this out into the platform-dependent code.",
      "revId": "0b435dff61c66025f6f1e0d39213a8dd8e7c3652",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56c55a4c_29f245aa",
        "filename": "init/service.cpp",
        "patchSetId": 1
      },
      "lineNbr": 260,
      "author": {
        "id": 1930620
      },
      "writtenOn": "2023-08-22T15:56:43Z",
      "side": 1,
      "message": "Alternatively you could use the cgroup CPU controller to do this (cpu.uclamp.min / cpu.uclamp.max): https://docs.kernel.org/admin-guide/cgroup-v2.html#cpu \n\nThere are already uclamp attributes available in libprocessgroup, although I guess you could also just write them directly from here.\nhttps://cs.android.com/android/platform/superproject/main/+/main:system/core/libprocessgroup/profiles/task_profiles.json;drc\u003deef0f563fd2d16343aa1ac01eebe98126f26e352;l\u003d61-68",
      "parentUuid": "e6164802_2ef9547e",
      "revId": "0b435dff61c66025f6f1e0d39213a8dd8e7c3652",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30f11f78_b76be8a0",
        "filename": "init/service.cpp",
        "patchSetId": 1
      },
      "lineNbr": 260,
      "author": {
        "id": 1930620
      },
      "writtenOn": "2023-08-22T18:18:03Z",
      "side": 1,
      "message": "Ah, setting it per-service like this would only work when the cpu controller is on the V2 cgroup hierarchy. But we\u0027re still on V1 for cpu, so we\u0027d need to upgrade first for this to work. Sorry, pls ignore.",
      "parentUuid": "56c55a4c_29f245aa",
      "revId": "0b435dff61c66025f6f1e0d39213a8dd8e7c3652",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f07f4379_1bc01755",
        "filename": "init/service_parser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 542,
      "author": {
        "id": 1988540
      },
      "writtenOn": "2023-08-22T18:22:15Z",
      "side": 1,
      "message": "Should we add a validation check for enforcing uclamp_min \u003c\u003d uclamp_max?\nI believe the system call wouldn\u0027t error out if uclamp_min \u003e uclamp_max (The uclamp min value would simply be set to the uclamp max value)\nRef: https://cs.android.com/android/kernel/superproject/+/common-android-mainline:common/kernel/sched/core.c;l\u003d10779",
      "revId": "0b435dff61c66025f6f1e0d39213a8dd8e7c3652",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}