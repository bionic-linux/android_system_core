{
  "comments": [
    {
      "key": {
        "uuid": "b1c4dfab_1ed5682f",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 69,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "fast\n\n(and inconsistent capitalization with the other logging.)",
      "range": {
        "startLine": 69,
        "startChar": 25,
        "endLine": 69,
        "endChar": 35
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "478639a6_72a9d777",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 69,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b1c4dfab_1ed5682f",
      "range": {
        "startLine": 69,
        "startChar": 25,
        "endLine": 69,
        "endChar": 35
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "61d8109e_861bc31f",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "is there a reason you don\u0027t just call the initializer? or use the\n\n```\n  static T* GetT() {\n    static T t;\n    return \u0026t;\n  }\n```\n\nstyle rather than a bare global?",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68102aa7_ac41e329",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "This approach gives me:\n\nsystem/core/adb/client/fastdeploy.cpp:40:30: error: declaration requires an exit-time destructor [-Werror,-Wexit-time-destructors]\n    static TFastDeployConfig instance;\n\nWe discussed this a few patches back: https://android-review.googlesource.com/c/platform/system/core/+/740521/4..5/adb/client/fastdeploy.cpp#b39\n\nIMO -Wexit-time-destructors is a bit too strong but I didn\u0027t feel comfortable changing such settings.",
      "parentUuid": "61d8109e_861bc31f",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ddd3ad3_60da97b4",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-05T15:50:34Z",
      "side": 1,
      "message": "`static T\u0026 t \u003d *new T;` then?\n\n(although it seems like the cool kids are writing that with `auto` in adb :-) )",
      "parentUuid": "68102aa7_ac41e329",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da5f3454_77ab32cf",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T16:30:39Z",
      "side": 1,
      "message": "*new T is prone to create memory leaks (this was feedback from patchset ~4). I experimented quite a bit with \u0027auto\u0027 myself when I ran into this, but I could not find a formulation of it which would remove the error without creating a memory leak (or being as boilerplate as my current implementation). \n\nAfter 30 seconds of reading up on this new-fangled keyword here: https://en.cppreference.com/w/cpp/language/auto\n\nI don\u0027t think there\u0027s any reason that it should help me in this instance as all it does is allow the type to be deduced from the initializer - but the sequence of allocation/deallocation should remain unchanged?",
      "parentUuid": "0ddd3ad3_60da97b4",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8399406_d2769058",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-05T16:36:54Z",
      "side": 1,
      "message": "correct, but leaking is what adb already uses as its solution to the construction/destruction order problem. (adding a new problem, but one that doesn\u0027t really matter.)",
      "parentUuid": "da5f3454_77ab32cf",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b82836d_456bedc5",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T18:05:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c8399406_d2769058",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2de2cb6f_11b980e6",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 183,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "no logging on failure in this function?",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c2f3925_952749af",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 183,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2de2cb6f_11b980e6",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "658b16eb_22bd8636",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 200,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "overloading standard library functions is confusing. at least use a capital letter? (also, this is more like system(3) than exec(2).)",
      "range": {
        "startLine": 200,
        "startChar": 11,
        "endLine": 200,
        "endChar": 15
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1c3c137_6ba58e27",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 200,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "658b16eb_22bd8636",
      "range": {
        "startLine": 200,
        "startChar": 11,
        "endLine": 200,
        "endChar": 15
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fbf09941_d024b7a4",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 201,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "BUFSIZ?",
      "range": {
        "startLine": 201,
        "startChar": 21,
        "endLine": 201,
        "endChar": 40
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5630975c_fe9d48ae",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 201,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "Now eliminated due to leveraging ReadFdToString.",
      "parentUuid": "fbf09941_d024b7a4",
      "range": {
        "startLine": 201,
        "startChar": 21,
        "endLine": 201,
        "endChar": 40
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9303e88e_6d5584f5",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 202,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "\"re\"",
      "range": {
        "startLine": 202,
        "startChar": 29,
        "endLine": 202,
        "endChar": 30
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f17dc2cd_3a7dffd8",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 202,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9303e88e_6d5584f5",
      "range": {
        "startLine": 202,
        "startChar": 29,
        "endLine": 202,
        "endChar": 30
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a1a2b90f_42f6707e",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 205,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "no logging?",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a608f7fc_6c68b998",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 205,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a1a2b90f_42f6707e",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e4fcc3c_d3c62c31",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 209,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "fgets? if you\u0027re just reading lines rather than binary data, getline(3)?\n\nor android::base::ReadFdToString?",
      "range": {
        "startLine": 209,
        "startChar": 12,
        "endLine": 209,
        "endChar": 17
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16bac51e_24498f34",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 209,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e4fcc3c_d3c62c31",
      "range": {
        "startLine": 209,
        "startChar": 12,
        "endLine": 209,
        "endChar": 17
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4693f8b_bd12bd79",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 212,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "std::unique_ptr?",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b42f353_71730833",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 212,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "IIUC this would make me lose the return code from pclose, which I think is important to pass to the caller in this case?",
      "parentUuid": "a4693f8b_bd12bd79",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f92141c7_83704d6e",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 212,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-05T15:50:34Z",
      "side": 1,
      "message": "d\u0027oh. good point.",
      "parentUuid": "7b42f353_71730833",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "495ea6cf_b7fd6445",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 212,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T16:30:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f92141c7_83704d6e",
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "94767da7_466c2134",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 227,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-04T16:30:43Z",
      "side": 1,
      "message": "0xa is \u0027\\n\u0027. did you actually mean \u0027\\r\u0027?",
      "range": {
        "startLine": 227,
        "startChar": 21,
        "endLine": 227,
        "endChar": 25
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c667735_7b94cc5a",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 227,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T12:08:51Z",
      "side": 1,
      "message": "0x0A is what\u0027s at the end of the string that comes out of aapt2. It\u0027s unclear to me why this is - I thought it might actually be both and that fgets was removing \u0027\\r\u0027 but that does not appear to be the case. \n\nI\u0027ve modified this logic to strip both anyway (either will cause problems further into the execution) and replaced the hex with friendlier char codes.",
      "parentUuid": "94767da7_466c2134",
      "range": {
        "startLine": 227,
        "startChar": 21,
        "endLine": 227,
        "endChar": 25
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12b7d4c1_d01e5424",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 227,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-05T15:50:34Z",
      "side": 1,
      "message": "seems like a bug in aapt?\n\nthey call\n\n  printer.Println(StringPrintf(\"%s\", attr-\u003evalue.c_str()));\n\nso presumably their packagename \"value\" already includes a \u0027\\n\u0027, so this should be Print rather than Println?",
      "parentUuid": "0c667735_7b94cc5a",
      "range": {
        "startLine": 227,
        "startChar": 21,
        "endLine": 227,
        "endChar": 25
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2e80917_d7ca0190",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 227,
      "author": {
        "id": 1269249
      },
      "writtenOn": "2018-09-05T16:30:39Z",
      "side": 1,
      "message": "I think that this is arguably correct... I mean the flag is supposedly their for human use as well and people appreciate the \u0027\\n\u0027 to avoid the \u0027prompt for next command on same line as output from previous command\u0027 problem.",
      "parentUuid": "12b7d4c1_d01e5424",
      "range": {
        "startLine": 227,
        "startChar": 21,
        "endLine": 227,
        "endChar": 25
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a5d9424_24c8a8d4",
        "filename": "adb/client/fastdeploy.cpp",
        "patchSetId": 7
      },
      "lineNbr": 227,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-09-05T16:36:54Z",
      "side": 1,
      "message": "oh, there aren\u0027t *two* \u0027\\n\u0027s? sorry, yes, fgets(3) does return the \u0027\\n\u0027, so this is expected and Trim makes sense.",
      "parentUuid": "e2e80917_d7ca0190",
      "range": {
        "startLine": 227,
        "startChar": 21,
        "endLine": 227,
        "endChar": 25
      },
      "revId": "186f902a13d9b0c9e160d36b21fd63d2581854e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}