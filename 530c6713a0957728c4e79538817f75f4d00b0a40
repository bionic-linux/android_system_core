{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "118c8979_f542e3dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-11-15T10:29:42Z",
      "side": 1,
      "message": "PTAL",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69411373_5c5ca9c8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-11-16T21:10:51Z",
      "side": 1,
      "message": "since this is (only?) for MTE, mention that in the commit message for future archaeologists? (without a bug the only way to get more context is the gerrit topic, which is inconvenient for most...)\n\nalso note whether this is something we want permanently, or this is just useful during not-previously-mte device bringup?",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad87203a_107c612c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-11-16T21:12:57Z",
      "side": 1,
      "message": "related: is there a reason why this is configured this way, rather than being an `if (mte) limit \u003d MOAR;` somewhere in the code?\n\n(now if you\u0027ll excuse me, i need to go and change some unrelated code so it requires less BoardConfig.mk copy \u0026 paste... :-) )",
      "parentUuid": "69411373_5c5ca9c8",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19426e3c_bc4b537e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-11-16T22:32:05Z",
      "side": 1,
      "message": "what exactly is a \"fullmte\" build? even if this is configured in BuildConfig.mk, i\u0027m wondering whether this should actually be a system property rather than an environment variable?",
      "parentUuid": "ad87203a_107c612c",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d19621c_5a782ecf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-11-17T11:10:53Z",
      "side": 1,
      "message": "\u003e since this is (only?) for MTE, mention that in the commit message for future archaeologists? (without a bug the only way to get more context is the gerrit topic, which is inconvenient for most...)\n\nDone\n\n\u003e also note whether this is something we want permanently, or this is just useful during not-previously-mte device bringup?\n\npermanently for fullmte builds.\n\n\n\u003e related: is there a reason why this is configured this way, rather than being an if (mte) limit \u003d MOAR; somewhere in the code?\n\n\nThis makes it easier to change for OEMs. Also it\u0027s not that easy to detect fullmte build in the code.\n\n\u003e wondering whether this should actually be a system property rather than an environment variable?\n\ntwo reasons why not: \n\n* it would make things even more confusing if there was a sysprop and a SCUDO_OPTIONS env variable to control the same thing rather than two different env variables\n* i actually tried using a sysprop as an experiment, but the value is needed too early",
      "parentUuid": "19426e3c_bc4b537e",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b40f7fd_676f0b6c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-11-17T21:20:14Z",
      "side": 1,
      "message": "\u003e This makes it easier to change for OEMs.\n\ndo they need to?\n\n\u003e Also it\u0027s not that easy to detect fullmte build in the code.\n\nyeah, but you can add the relevant -D.\n\n\u003e i actually tried using a sysprop as an experiment, but the value is needed too early\n\ni thought scudo already uses system properties (which is why we can\u0027t allocate within the system properties implementation)?\n\nanyway, my main point was really \"since you can\u0027t guarantee that an environment variable gets inherited, an environment variable only gets you a subset of processes\". it\u0027s worth explicitly stating that that\u0027s okay (and why!)...",
      "parentUuid": "7d19621c_5a782ecf",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb4e6935_49e06613",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-11-30T02:17:38Z",
      "side": 1,
      "message": "\u003e i thought scudo already uses system properties \n\nI can double check. I tried and it didn\u0027t work.\n\nAre you concerned about processes that call exec with their own environment?.",
      "parentUuid": "0b40f7fd_676f0b6c",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a2465e5_014a8074",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-11-30T15:51:24Z",
      "side": 1,
      "message": "\u003e I can double check. I tried and it didn\u0027t work.\n\nyeah, looks like it\u0027s just malloc_debug. this isn\u0027t something we could set later, like that?\n\n\u003e Are you concerned about processes that call exec with their own environment?\n\nyes, unlike system properties, inheritance of environment variables is optional.",
      "parentUuid": "eb4e6935_49e06613",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d06c9c1a_119ef408",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-11-30T18:58:44Z",
      "side": 1,
      "message": "\u003e this isn\u0027t something we could set later, like that?\n\nwe could add new API to allow replacing it _in a single threaded context_. for a multithreaded process i think it would be too complicated to bother.",
      "parentUuid": "3a2465e5_014a8074",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13bda823_0fccb313",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-11-30T19:03:06Z",
      "side": 1,
      "message": "didn\u0027t pcc add android_run_on_all_threads() for similar mte stuff?\n\n(but my question was really for the scudo folks --- whether there\u0027s a point in malloc_debug setup where this would make sense.)",
      "parentUuid": "d06c9c1a_119ef408",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c380f1b_0aab3706",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-11-30T19:04:02Z",
      "side": 1,
      "message": "\u003e android_run_on_all_threads\n\nno this is not the same. this is a global buffer, not per thread. being single threaded makes it much easier to swap out",
      "parentUuid": "13bda823_0fccb313",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36d01e2d_f6eb5f9a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1019050
      },
      "writtenOn": "2023-12-01T00:11:44Z",
      "side": 1,
      "message": "To be honest, this makes me a bit uncomfortable. This changes the way Scudo works so it makes it a little more difficult to replicate their config.\n\nHowever, it does seem like it would be useful since partners already changes these values.\n\nI hadn\u0027t thought about using properties for setting some of these parameters. It could be okay, but that would be system wide. Many scudo parameters make more sense to be set per process type or per process. And environment variables seem better suited to an environment variable or to make a mallopt call. In this case, I don\u0027t think it would be easy to make a mallopt call, and an environment variable does feel like the right way to go.",
      "parentUuid": "5c380f1b_0aab3706",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7b69d59_882ac902",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-12-01T01:32:14Z",
      "side": 1,
      "message": "\u003e To be honest, this makes me a bit uncomfortable. This changes the way Scudo works so it makes it a little more difficult to replicate their config.\n\n\nCan you clarify what \"this\" is?",
      "parentUuid": "36d01e2d_f6eb5f9a",
      "revId": "530c6713a0957728c4e79538817f75f4d00b0a40",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}