{
  "comments": [
    {
      "key": {
        "uuid": "ef9fca02_bfeb7a9f",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 51,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-02-04T17:46:47Z",
      "side": 1,
      "message": "this seems like it needs an explanation.",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77543d0b_7f71574c",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-01-30T19:04:30Z",
      "side": 1,
      "message": "why? this seems odd. (and fragile.) if you want folks to use the other library, why aren\u0027t you moving them to the other library (or the NDK ASharedMemory API)?",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93d9cb4f_3c6430be",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1108565
      },
      "writtenOn": "2019-01-30T19:38:31Z",
      "side": 1,
      "message": "The only way we came up with to do that is to basically deny target_sdk \u003e\u003d Q apps permission to open(/dev/ashmem). In which case, they MUST use ASharedMemory which will do the right thing and talk to \u0027ashmemd\u0027.\nWe couldn\u0027t think of a better way to force apps to use the NDK APIs.",
      "parentUuid": "77543d0b_7f71574c",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6245c8ed_1ca7cdd4",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-01-30T20:22:03Z",
      "side": 1,
      "message": "why is it in a separate library?",
      "parentUuid": "93d9cb4f_3c6430be",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "856387e5_009a3d52",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2019-01-30T20:23:35Z",
      "side": 1,
      "message": "Of course, they could just copy the new ASharedMemory to their app, but I believe the goal is to break them from using /dev/ashmem directly and make it clear via documentation and developer outreach that the only stable means of using ASharedMemory is to use the NDK library.",
      "parentUuid": "93d9cb4f_3c6430be",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8713ff13_2002272a",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2019-01-30T20:26:19Z",
      "side": 1,
      "message": "To avoid circular dependencies when linking. fwiw, the setup is symmetric to how libcutils dlopens libnetd_client to talk to netd.",
      "parentUuid": "6245c8ed_1ca7cdd4",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82c407ec_324a69f2",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-02-04T17:46:47Z",
      "side": 1,
      "message": "i don\u0027t understand sspatil\u0027s comment about apps. apps can\u0027t use libcutils anyway.",
      "parentUuid": "8713ff13_2002272a",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5f7a016_f8c8f34b",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2019-02-04T17:58:25Z",
      "side": 1,
      "message": "ASharedMemory_create calls ashmem_create_region from libcutils.\nhttps://android.googlesource.com/platform/frameworks/base/+/master/native/android/sharedmem.cpp#51",
      "parentUuid": "82c407ec_324a69f2",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "782e9c43_b82e9d44",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-02-04T18:03:57Z",
      "side": 1,
      "message": "i know. why aren\u0027t you changing ASharedMemory?",
      "parentUuid": "a5f7a016_f8c8f34b",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68b328b7_557b60d4",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 84,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2019-01-30T18:07:46Z",
      "side": 1,
      "message": "Under what circumstances will we hit this? Never right? Should we log that something has gone horribly wrong?",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3a93cd0_3a693655",
        "filename": "libcutils/ashmem-dev.cpp",
        "patchSetId": 6
      },
      "lineNbr": 84,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2019-01-30T18:09:51Z",
      "side": 1,
      "message": "VNDK variants of the library will always hit this.",
      "parentUuid": "68b328b7_557b60d4",
      "revId": "230d1d4ded03397680e52603598777b66d277b3f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}