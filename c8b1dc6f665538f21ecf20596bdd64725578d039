{
  "comments": [
    {
      "key": {
        "uuid": "447589f5_d01f8dec",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-07-11T21:07:36Z",
      "side": 1,
      "message": "Look at system/core/libcutils/include_vndk/cutils/log.h where we added a \u0027soft\u0027 compile deprecation warning. We should have something like this at least in the libutils/include_vndk/utils/Log.h file.\n\nYMMV since some in-tree compilations still treat that soft warning as a hard (-Werror) warning, but the vndk side should _never_ use this file so we do not care that much about it. I am sure there are more pragma/compiler tricks that could be added to make it more robust for in-tree and out-of-tree compilation.",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2ee3067_c2ac672f",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-11T21:14:07Z",
      "side": 1,
      "message": "What do those tricks do?  Given that we literally have 3000+ files that include this file, I don\u0027t want to add 3000 warnings to the build.\n\nI think for vndk they can get away with it, since that\u0027s new, but this file is legacy and triggers tons of warnings without having a plan to update the files that include it just seems like too much pain for devs.",
      "parentUuid": "447589f5_d01f8dec",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e352d6dd_c98bab48",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-07-11T21:22:36Z",
      "side": 1,
      "message": "For _now_ no #warning in include/utils/Log.h for 3000- less messages, but in include_vndk/utils/Log.h, let them be warned, push partners/vendors at least to stop using utils/Log.h in new code.\n\nThe tricks make the #warning \u0027soft\u0027 even if -Werror is turned on; but it is not 100% reliable I have found as 4.8, 4.9 early, 4.9 late and clang all work differently (And I think gcc 4.8 has no pragma solution if memory serves???)",
      "parentUuid": "e2ee3067_c2ac672f",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed019e9e_ba1db352",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-07-11T21:26:38Z",
      "side": 1,
      "message": "only clang is supported at this point anyway.",
      "parentUuid": "e352d6dd_c98bab48",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55c42e3a_0db84c4a",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-11T21:28:38Z",
      "side": 1,
      "message": "\u003e For _now_ no #warning in include/utils/Log.h for 3000- less messages, but in include_vndk/utils/Log.h, let them be warned, push partners/vendors at least to stop using utils/Log.h in new code.\n\nSgtm.  This CL should be good to go (once I get the rest of its dependencies merged) then, right?",
      "parentUuid": "ed019e9e_ba1db352",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc5164b3_b920642a",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-07-11T21:50:18Z",
      "side": 1,
      "message": "Not quite. If we are to place #warning for vndk\u0027s version of utils/Log.h, I would expect to see a libutils/include_vndk/utils/Log.h file, plus all the symbolic links for the other unmodified include files, plus all the vndk trappings to make it so.",
      "parentUuid": "55c42e3a_0db84c4a",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc667569_c8058153",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-07-11T21:55:37Z",
      "side": 1,
      "message": "is there any point? we could just replace this with a one-line\n\n  #include \u003clog/log.h\u003e\n\nand not approve any future additions to this file.\n\nwhy do we think 3000 files are going to be edited?\n\nwhat do we gain if they are?",
      "parentUuid": "fc5164b3_b920642a",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "497be426_819ef64a",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2017-07-11T22:34:09Z",
      "side": 1,
      "message": "You\u0027re saying to add a include_vndk/utils/Log.h and add a warning to it?  I thought you were talking about the existing warning in cutils/log.h.  Are we actually generating warnings to the build log for that?\n\nI see \u003e 1000 matches in our vendor trees for \u003cutils/Log.h\u003e, presumably those should be compiled with VNDK in the future too.  I just don\u0027t see the benefit in creating all of those warnings, and actually think it\u0027s a bit negative.  \n\nIt\u0027s unfortunate that we have many ways to include \u003clog/log.h\u003e, but at least if we make all of them do nothing more than include it, then that\u0027s sufficient.\n\nGoing off of what enh@\u0027s says, we can even remove the header guards and even the copyright here.  This really could/should juts be the warning lines I add here and #include \u003clog/log.h\u003e",
      "parentUuid": "dc667569_c8058153",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8f1b169_5114f94f",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-07-11T22:41:01Z",
      "side": 1,
      "message": "#warning for any #include \u003cutils/Log.h\u003e for the vndk (this is not the 3000 files you are looking for \u003cwaves hand\u003e). The gain is that our partners _stop_ using utils/Log.h.\n\nInternal builds use libutils/include/utils/Log.h, vndk builds use libutils/include_vndk/utils/Log.h; only the later will have the #warning.",
      "parentUuid": "dc667569_c8058153",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 20,
        "endChar": 44
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8bd3f436_923882e6",
        "filename": "libutils/include/utils/Log.h",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2017-07-12T14:42:00Z",
      "side": 1,
      "message": "nit: (as enh@ has stated earlier) This one line should _be_ the entire file, no decorations.",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 20
      },
      "revId": "c8b1dc6f665538f21ecf20596bdd64725578d039",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}