{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "79fc780f_34dd3f7b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2021-06-30T16:39:11Z",
      "side": 1,
      "message": "can you prepare that CL right now so we can start the messaging if needed?",
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f72e8c3_625b88e8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-30T22:15:01Z",
      "side": 1,
      "message": "Done (CL:1752976, CL:1752975).\n\nThough, because of CL:1752977, I should probably put them all in the same topic.",
      "parentUuid": "79fc780f_34dd3f7b",
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3870c150_379f799a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2021-06-30T16:39:11Z",
      "side": 1,
      "message": "i\u0027d rather think about how we could improve code that\u0027s using std::thread or pthread_create() than add more cruft to libutils...",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 27,
        "endChar": 60
      },
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb510692_4ac41569",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-06-30T16:50:25Z",
      "side": 1,
      "message": "The main benefit of this libandroid_runtime hooking business is that in non-zygote processes, the hooks do nothing, and in zygote-forked processes, the hooks attach the Java VM (second is that one copy of the logic doing this for most things). We could move these hooks to being in libbinder, but as other things take a dependency on the existing libutils API, I\u0027d rather see the existing API made more generic (between libutils and libandroid_runtime, even at the cost of what should be one new method here) rather than a new API which requires maintaining both the libutils \u003c-\u003e libandroid_runtime surface and the new one.",
      "parentUuid": "3870c150_379f799a",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 27,
        "endChar": 60
      },
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e2daf4f8_7f874f2b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-30T22:15:01Z",
      "side": 1,
      "message": "Also see Steven\u0027s comment at https://android-review.googlesource.com/c/platform/frameworks/base/+/1751551/1/core/jni/AndroidRuntime.cpp#1593",
      "parentUuid": "eb510692_4ac41569",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 27,
        "endChar": 60
      },
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "952fec5b_732e77c7",
        "filename": "libutils/Threads.cpp",
        "patchSetId": 5
      },
      "lineNbr": 67,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-06-30T16:35:56Z",
      "side": 1,
      "message": "we want to avoid creating new globals (these add up in these libraries that are added everywhere). Prefer passing these hooks as arguments to thread creation functions",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 67,
        "endChar": 47
      },
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d04409a8_d137dbfb",
        "filename": "libutils/Threads.cpp",
        "patchSetId": 5
      },
      "lineNbr": 67,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-30T22:15:01Z",
      "side": 1,
      "message": "Does this still apply?\n\nhttps://android-review.googlesource.com/c/platform/frameworks/native/+/1751413/3/libs/binder/RpcSession.cpp#286",
      "parentUuid": "952fec5b_732e77c7",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 67,
        "endChar": 47
      },
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a720f56e_e070b824",
        "filename": "libutils/Threads.cpp",
        "patchSetId": 5
      },
      "lineNbr": 67,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-30T22:20:18Z",
      "side": 1,
      "message": "Talked offline. Since I am going to delete a global function pointer in CL:1752975, there\u0027s only one function pointer added. Hopefully, adding that one function pointer shouldn\u0027t push over the page limit.\n\nIn the unfortunate event that it does push over the page limit, the two pointers can also be avoided by combining the two hooks into one pointer to a global struct.",
      "parentUuid": "d04409a8_d137dbfb",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 67,
        "endChar": 47
      },
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f368959_d1da6b8f",
        "filename": "libutils/Threads.cpp",
        "patchSetId": 5
      },
      "lineNbr": 67,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-30T22:25:39Z",
      "side": 1,
      "message": "Also, I can\u0027t pass hooks as arguments because these hooks are predefined by the environment. Passing hooks as arguments to thread creation functions would not allow threads created otherwise to use these hooks (CL:1751413).",
      "parentUuid": "a720f56e_e070b824",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 67,
        "endChar": 47
      },
      "revId": "217e194610936c8c3dc109bbabf7ee9c1781daa3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}