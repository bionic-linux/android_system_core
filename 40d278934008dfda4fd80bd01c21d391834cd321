{
  "comments": [
    {
      "key": {
        "uuid": "5061411e_2760028d",
        "filename": "crash_reporter/crash_reporter.rc",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1076138
      },
      "writtenOn": "2015-10-07T16:52:22Z",
      "side": 1,
      "message": "Maybe add a comment here that these directories are group-writable by root so that crash reporter can still access them when switching users:\n\n# These directories are group-writable by root so that\n# crash_reporter can still access them when it switches \n# users.",
      "range": {
        "startLine": 17,
        "startChar": 36,
        "endLine": 17,
        "endChar": 40
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "504861a0_75cf48e0",
        "filename": "crash_reporter/crash_reporter.rc",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5061411e_2760028d",
      "range": {
        "startLine": 17,
        "startChar": 36,
        "endLine": 17,
        "endChar": 40
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5061411e_e7ba8a48",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 93,
      "author": {
        "id": 1076138
      },
      "writtenOn": "2015-10-07T16:52:22Z",
      "side": 1,
      "message": "Update comment?",
      "range": {
        "startLine": 93,
        "startChar": 44,
        "endLine": 93,
        "endChar": 59
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d03c51f4_5990834c",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 93,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5061411e_e7ba8a48",
      "range": {
        "startLine": 93,
        "startChar": 44,
        "endLine": 93,
        "endChar": 59
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5061411e_67a83afb",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 231,
      "author": {
        "id": 1076138
      },
      "writtenOn": "2015-10-07T16:52:22Z",
      "side": 1,
      "message": "Why do you need to get c_str() here?",
      "range": {
        "startLine": 231,
        "startChar": 63,
        "endLine": 231,
        "endChar": 71
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5061411e_1c69d473",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 231,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5061411e_67a83afb",
      "range": {
        "startLine": 231,
        "startChar": 63,
        "endLine": 231,
        "endChar": 71
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50422131_8bcecd8c",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 234,
      "author": {
        "id": 1040868
      },
      "writtenOn": "2015-10-07T15:50:17Z",
      "side": 1,
      "message": "there\u0027s no need for \\ here or below",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30592d74_c40f7ffc",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 234,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "50422131_8bcecd8c",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5061411e_a799b2ec",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 241,
      "author": {
        "id": 1076138
      },
      "writtenOn": "2015-10-07T16:52:22Z",
      "side": 1,
      "message": "Maybe log the permissions too? (in octal)",
      "range": {
        "startLine": 241,
        "startChar": 34,
        "endLine": 241,
        "endChar": 45
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90673931_1ea8ac4e",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 241,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5061411e_a799b2ec",
      "range": {
        "startLine": 241,
        "startChar": 34,
        "endLine": 241,
        "endChar": 45
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "104d095a_11e3ec08",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 426,
      "author": {
        "id": 1040868
      },
      "writtenOn": "2015-10-07T15:50:17Z",
      "side": 1,
      "message": "shouldn\u0027t you be checking the return value ?",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "504861a0_c49cb4de",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 426,
      "author": {
        "id": 1076138
      },
      "writtenOn": "2015-10-07T16:52:22Z",
      "side": 1,
      "message": "This can only fail if the pointers fault.",
      "parentUuid": "104d095a_11e3ec08",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1001893d_ebcfed31",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 426,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done.  Since this code is called when something has crashed, it would be good not to take anything for granted and make sure that it has indeed suceeded.",
      "parentUuid": "504861a0_c49cb4de",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "25e80d65_82a53ae2",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 430,
      "author": {
        "id": 1040868
      },
      "writtenOn": "2015-10-07T15:50:17Z",
      "side": 1,
      "message": "same here",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "504861a0_30478e8c",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 430,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "25e80d65_82a53ae2",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b026fd9a_06badafc",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 434,
      "author": {
        "id": 1040868
      },
      "writtenOn": "2015-10-07T15:50:17Z",
      "side": 1,
      "message": "same here",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "704d65ae_f1d9aa51",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 434,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b026fd9a_06badafc",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3033edd8_8acecb8c",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 438,
      "author": {
        "id": 1040868
      },
      "writtenOn": "2015-10-07T15:50:17Z",
      "side": 1,
      "message": "same here",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1001893d_cb9dc931",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 438,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3033edd8_8acecb8c",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "704d65ae_854108cf",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 459,
      "author": {
        "id": 1076138
      },
      "writtenOn": "2015-10-07T16:52:22Z",
      "side": 1,
      "message": "What\u0027s |container_dir| in this context? Shouldn\u0027t it be enough to give it group writable permissions and not have to change the permissions?\n\nI.e. you are running as root:root, change to \u003cuid of crashing program\u003e:root? Is it necessary to call setresgid above?",
      "range": {
        "startLine": 459,
        "startChar": 12,
        "endLine": 459,
        "endChar": 25
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0435d80_d3b3d677",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 459,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "container_dir is the PID folder generated in tmp.  So /data/misc/crash_reporter/tmp/\u003cPID\u003e.  All temporary files needed for generating the minidump and metadata files are put in this directory.  I\u0027m not sure why, but just making the folder group writable wasn\u0027t allowing crash_reporter to write to new files in the directory after the UID/GID was switched back to root.  I haven\u0027t been able to pinpoint whether its a problem with supplemental groups or the libchrome functions that were trying to write the file, I can look into that once this lands and fixes the functionality.\n\nI tried doing these changes without changing the group, just the user.  But for some reason both the readlink(\"/proc/\u003cpid\u003e/exe\", ..) call as well as trying to copy the proc files required that the fsgid be set to the correct group.  It wasn\u0027t required for writing the files themselves, just for reading things from /proc/\u003cpid\u003e.  Without changing the group, the readlink call gets a permission denied EACCES error, and copying the /proc/\u003cpid\u003e/auxv file gets getattr and search selinux denials for the proc filesystem.",
      "parentUuid": "704d65ae_854108cf",
      "range": {
        "startLine": 459,
        "startChar": 12,
        "endLine": 459,
        "endChar": 25
      },
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70200583_24b7d215",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 461,
      "author": {
        "id": 1040868
      },
      "writtenOn": "2015-10-07T15:50:17Z",
      "side": 1,
      "message": "pretty sure this fits on one line",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90673931_3e4c8804",
        "filename": "crash_reporter/user_collector.cc",
        "patchSetId": 1
      },
      "lineNbr": 461,
      "author": {
        "id": 1076778
      },
      "writtenOn": "2015-10-08T01:18:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "70200583_24b7d215",
      "revId": "40d278934008dfda4fd80bd01c21d391834cd321",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}