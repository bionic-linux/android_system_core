{
  "comments": [
    {
      "key": {
        "uuid": "58279af4_0d86d5f0",
        "filename": "adb/daemon/main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2015-07-13T14:58:29Z",
      "side": 1,
      "message": "No, logically this would be getfilecon(\"/system/xbin/su\", \u0026fcon).  It is emulating invoking su for adb root.",
      "revId": "455dcfa5b452419de4227ca03e016195e194af21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8f1caa3_d17586a9",
        "filename": "adb/daemon/main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1013433
      },
      "writtenOn": "2015-07-13T16:54:20Z",
      "side": 1,
      "message": "Yeah but then you hardcode the path to the su binary which isn\u0027t any better than hardcoding the security context.",
      "parentUuid": "58279af4_0d86d5f0",
      "revId": "455dcfa5b452419de4227ca03e016195e194af21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "58b5dad8_e0f456ff",
        "filename": "adb/daemon/main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2015-07-13T19:00:59Z",
      "side": 1,
      "message": "Not sure I agree, but if so, then I don\u0027t think this is a worthwhile change.",
      "parentUuid": "d8f1caa3_d17586a9",
      "revId": "455dcfa5b452419de4227ca03e016195e194af21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8f1caa3_91d49eb3",
        "filename": "adb/daemon/main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1013433
      },
      "writtenOn": "2015-07-13T19:14:01Z",
      "side": 1,
      "message": "Using the system executable path is a show stoper. Adb should still run as root and su even if system fails to mount. So if system fails to mount adb would die here and you have no way of getting the logs via adb.\n\nThe domain tranistion only affects root builds, and the nice part is that this keeps the transition in policy and is compiled out (much like su is compiled out now). However, currently when su is compiled out, remnants remain, like in the seclabel option for adbd in the init.rc. Having the path to su binary, yeilds the same polution, su disapears, but we keep a hardcoded path to it no matter what.",
      "parentUuid": "58b5dad8_e0f456ff",
      "revId": "455dcfa5b452419de4227ca03e016195e194af21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f87f6ee4_678a3223",
        "filename": "adb/daemon/main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2015-07-13T20:08:59Z",
      "side": 1,
      "message": "But to do it this way, you have to add this logic for computing a context to adbd, compute it in an unconventional manner (as if adbd were executing itself, which it is not), and add policy rules as if adbd were re-executing itself.  Is it worth the additional code and the convoluted logic just to avoid specifying a context in the init.rc file?  Which will make more sense to someone in 10 years trying to read the code and make sense of it?",
      "parentUuid": "d8f1caa3_91d49eb3",
      "revId": "455dcfa5b452419de4227ca03e016195e194af21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}