{
  "comments": [
    {
      "key": {
        "uuid": "44141933_425e084a",
        "filename": "adb/test_device.py",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-12T17:55:31Z",
      "side": 1,
      "message": "(i completely missed that this was what you were doing in the old version. i think this is much better. and hopefully we\u0027ll be able to kill the return status parsing cruft soon anyway :-) )",
      "revId": "99c9ae83da26f0022f07bb96b1e02aea2629aae6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4f6494b_23942e97",
        "filename": "adb/test_device.py",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2015-08-12T18:09:45Z",
      "side": 1,
      "message": "I think the right way to do this is to close(proc.stdin) (which would send an EOF) when you\u0027re done. I\u0027ve never had to do this, but the docs/SO suggest that\u0027s correct: http://stackoverflow.com/a/17712430/632035",
      "revId": "99c9ae83da26f0022f07bb96b1e02aea2629aae6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44141933_c2921829",
        "filename": "adb/test_device.py",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2015-08-12T20:31:29Z",
      "side": 1,
      "message": "I have a lot of notes typed up if you want details but this comment was turning into a novel :)\n\nThe bottom line is that closing proc.stdin is not sufficient to end the session (proc.communicate() actually does close it already) because the close is never relayed to adbd, and properly sending EOF to adbd is *much* harder than explicitly sending an exit command.\n\nI\u0027d be happy to discuss this further (either here or offline) if you\u0027d like to pursue this, but if you aren\u0027t too particular I think the correct solution is to leave it as-is.",
      "parentUuid": "c4f6494b_23942e97",
      "revId": "99c9ae83da26f0022f07bb96b1e02aea2629aae6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44141933_82f8a08a",
        "filename": "adb/test_device.py",
        "patchSetId": 3
      },
      "lineNbr": 175,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2015-08-12T18:09:45Z",
      "side": 1,
      "message": "It isn\u0027t clear to me what these are actually verifying. Won\u0027t these pass even if we\u0027re not using a pty?",
      "revId": "99c9ae83da26f0022f07bb96b1e02aea2629aae6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64367de0_789f99e7",
        "filename": "adb/test_device.py",
        "patchSetId": 3
      },
      "lineNbr": 175,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2015-08-12T19:13:15Z",
      "side": 1,
      "message": "Oh, never mind. I thought `[ -t 0 ]` did something else. This test is fine.",
      "parentUuid": "44141933_82f8a08a",
      "revId": "99c9ae83da26f0022f07bb96b1e02aea2629aae6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a41eb557_28cf7327",
        "filename": "adb/test_device.py",
        "patchSetId": 3
      },
      "lineNbr": 175,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-12T19:21:34Z",
      "side": 1,
      "message": "(might be worth adding a comment explaining why you didn\u0027t just use /system/bin/tty though. i\u0027m assuming portability?)",
      "parentUuid": "64367de0_789f99e7",
      "revId": "99c9ae83da26f0022f07bb96b1e02aea2629aae6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4f6494b_26731c5e",
        "filename": "adb/test_device.py",
        "patchSetId": 3
      },
      "lineNbr": 175,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2015-08-12T20:31:29Z",
      "side": 1,
      "message": "Yes exactly, I\u0027m not sure if there\u0027s a list of tools guaranteed to be on all Android devices but I didn\u0027t know if `tty` or `toybox tty` would be available everywhere.\n\nI will definitely add a comment here thanks.",
      "parentUuid": "a41eb557_28cf7327",
      "revId": "99c9ae83da26f0022f07bb96b1e02aea2629aae6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}