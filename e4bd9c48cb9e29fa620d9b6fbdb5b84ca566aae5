{
  "comments": [
    {
      "key": {
        "uuid": "f12a3a46_0ab4e450",
        "filename": "libkeyutils/mini_keyctl/mini_keyctl_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-09-26T01:13:13Z",
      "side": 1,
      "message": "well, this isn\u0027t a good reason... +2 https://android-review.googlesource.com/c/platform/system/core/+/1128712 if you want request_key.\n\nif \"request_key can\u0027t see keys in the kernel keyring\", which you seem to imply later, just remove this part because it\u0027s irrelevant and fixable. but what do you mean by \"kernel keyring\"? which of the KEY_SPEC_ constants do you mean?",
      "range": {
        "startLine": 40,
        "startChar": 32,
        "endLine": 40,
        "endChar": 71
      },
      "revId": "e4bd9c48cb9e29fa620d9b6fbdb5b84ca566aae5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "889acbdd_32793bf3",
        "filename": "libkeyutils/mini_keyctl/mini_keyctl_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2019-09-26T17:07:15Z",
      "side": 1,
      "message": "IIUC, the existing KEY_SPEC_ options are associated with process, seesion, uid, etc., whereas our target keyring .fs-verity is a singleton in kernel.  I just tried to use \n\n  request_key(\"keyring\", keyring_desc.c_str(), nullptr, 0);\n\nbelow.  It works for some keyring (e.g. fscrypt) but neither .fs-verity nor .dns_resolver (failed with ENOKEY). Both of them are initiated within kernel, so that might be expected.  But Eric would know better.\n\nI\u0027ve rephrased the comment if that helps.",
      "parentUuid": "f12a3a46_0ab4e450",
      "range": {
        "startLine": 40,
        "startChar": 32,
        "endLine": 40,
        "endChar": 71
      },
      "revId": "e4bd9c48cb9e29fa620d9b6fbdb5b84ca566aae5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31093456_b545bca0",
        "filename": "libkeyutils/mini_keyctl/mini_keyctl_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-09-26T17:16:04Z",
      "side": 1,
      "message": "add \"Eric\" so he can weigh in?",
      "parentUuid": "889acbdd_32793bf3",
      "range": {
        "startLine": 40,
        "startChar": 32,
        "endLine": 40,
        "endChar": 71
      },
      "revId": "e4bd9c48cb9e29fa620d9b6fbdb5b84ca566aae5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b96d5a3_0f69778a",
        "filename": "libkeyutils/mini_keyctl/mini_keyctl_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1137063
      },
      "writtenOn": "2019-09-26T17:38:15Z",
      "side": 1,
      "message": "request_key() only finds keys that the process is subscribed to, i.e. keys in its session, process, or thread keyring hierarchy.  The fs-verity keyring is used internally by the filesystem and processes aren\u0027t \"subscribed\" to it, so it can\u0027t be found with request_key().",
      "parentUuid": "31093456_b545bca0",
      "range": {
        "startLine": 40,
        "startChar": 32,
        "endLine": 40,
        "endChar": 71
      },
      "revId": "e4bd9c48cb9e29fa620d9b6fbdb5b84ca566aae5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb882d05_15152b94",
        "filename": "libkeyutils/mini_keyctl/mini_keyctl_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2019-10-02T16:17:39Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2b96d5a3_0f69778a",
      "range": {
        "startLine": 40,
        "startChar": 32,
        "endLine": 40,
        "endChar": 71
      },
      "revId": "e4bd9c48cb9e29fa620d9b6fbdb5b84ca566aae5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}