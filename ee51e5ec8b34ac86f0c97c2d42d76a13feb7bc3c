{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d45b89d9_e3dd4bb2",
        "filename": "fs_mgr/fs_mgr.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1864,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2021-10-27T18:56:07Z",
      "side": 1,
      "message": "Would it make more sense to instead do this?\n\n    if (android::base::StartsWith(*name, \"userdata_gsi\")) {\n        break;\n    }\n\nI think that as soon as we skip deleting a device, the rest of the stack cannot be deleted.\n\n(Alternately, we could factor this into a separate function, and check IsGsiRunning before calling it.)",
      "revId": "ee51e5ec8b34ac86f0c97c2d42d76a13feb7bc3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "72a0c0d2_7e4bbffa",
        "filename": "fs_mgr/fs_mgr.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1864,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-10-28T09:11:31Z",
      "side": 1,
      "message": "can\u0027t this `StartWith(...)` be just `*name \u003d\u003d \"userdata_gsi\"`?",
      "parentUuid": "d45b89d9_e3dd4bb2",
      "revId": "ee51e5ec8b34ac86f0c97c2d42d76a13feb7bc3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b87d83da_6ca68c6c",
        "filename": "fs_mgr/fs_mgr.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1864,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-10-28T09:21:26Z",
      "side": 1,
      "message": "To David, should this be handled similar to https://source.corp.google.com/android/system/core/fs_mgr/fs_mgr.cpp;l\u003d1774;bpv\u003d0;bpt\u003d1;rcl\u003dHEAD\n\nWe should unwind \u0026 delete the dm-stack until we see the device of \u0027/data\u0027 fstab entry, and if the entry is logical then we don\u0027t delete the /data dm device (ths is the case of userdata_gsi), else we delete the /data dm device because it is backed by physical partition and its dm-node would be recreated later.",
      "parentUuid": "72a0c0d2_7e4bbffa",
      "revId": "ee51e5ec8b34ac86f0c97c2d42d76a13feb7bc3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}