{
  "comments": [
    {
      "key": {
        "uuid": "2298ae09_4caf3f12",
        "filename": "libziparchive/zip_archive.cc",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2019-06-19T21:47:48Z",
      "side": 1,
      "message": "Guess it\u0027s similar to the check in L394. The EOCD in zip format limits the total# of CD entries to 2 bytes, i.e. 0xffff. But the length each CD record entry is 46+n+m+k bytes, where n, m ,k are the filename, extra fields, and comments. So in theory the limit can go beyond 0xffffff.... will try to get a POC.",
      "range": {
        "startLine": 153,
        "startChar": 76,
        "endLine": 153,
        "endChar": 82
      },
      "revId": "8d90b56fd53aa8de1d7ae83a5c89fe0ed7ee1100",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf4b0175_17fa6753",
        "filename": "libziparchive/zip_archive.cc",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-06-19T22:25:18Z",
      "side": 1,
      "message": "that makes more sense. i\u0027ll remove these, because i think the checks in the caller are better.",
      "parentUuid": "2298ae09_4caf3f12",
      "range": {
        "startLine": 153,
        "startChar": 76,
        "endLine": 153,
        "endChar": 82
      },
      "revId": "8d90b56fd53aa8de1d7ae83a5c89fe0ed7ee1100",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ed45b81_619ea316",
        "filename": "libziparchive/zip_archive.cc",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2019-06-20T00:00:44Z",
      "side": 1,
      "message": "Constructed one in https://drive.google.com/open?id\u003d1kFHPocZ_dfmunwmlnDwRmhcApxitoCvu. There are 65530 entries and each one has a 512 byte extra field. And the old code aborts as expected:\n06-19 22:08:17.277  8565  8565 F ziparchive: zip_archive.cc:121] Check failed: name \u003c start + 0xffffff (name\u003d0x74e8ad2dc0, start + 0xffffff\u003d0x74e8ad2c43) \n06-19 22:08:17.280  8565  8565 F libc    : Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 8565 (unzip), pid 8565 (unzip)\n06-19 22:08:17.320  8568  8568 F DEBUG   : pid: 8565, tid: 8565, name: unzip  \u003e\u003e\u003e unzip \u003c\u003c\u003c\n06-19 22:08:17.336  8568  8568 F DEBUG   :       #03 pc 0000000000005a64  /system/lib64/libziparchive.so (OpenArchiveInternal(ZipArchive*, char const*)+2072) (BuildId: 4e8b59313c97574ab751d1857de78f05)\n06-19 22:08:17.336  8568  8568 F DEBUG   :       #04 pc 0000000000002424  /system/bin/unzip (main.cfi+752) (BuildId: 763815dcb9fad9f217dd16bf28abed1a)",
      "parentUuid": "cf4b0175_17fa6753",
      "range": {
        "startLine": 153,
        "startChar": 76,
        "endLine": 153,
        "endChar": 82
      },
      "revId": "8d90b56fd53aa8de1d7ae83a5c89fe0ed7ee1100",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc40efc2_f534e00d",
        "filename": "libziparchive/zip_archive.cc",
        "patchSetId": 1
      },
      "lineNbr": 530,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2019-06-19T21:47:48Z",
      "side": 1,
      "message": "irrelevant to the cl, but isn\u0027t it just archive-\u003ecentral_directory.GetBasePtr() + archive-\u003ehash_table[ent].name_offset.",
      "range": {
        "startLine": 530,
        "startChar": 17,
        "endLine": 530,
        "endChar": 20
      },
      "revId": "8d90b56fd53aa8de1d7ae83a5c89fe0ed7ee1100",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb6aa0f9_c456be22",
        "filename": "libziparchive/zip_archive.cc",
        "patchSetId": 1
      },
      "lineNbr": 530,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2019-06-19T22:25:18Z",
      "side": 1,
      "message": "yeah, that\u0027s better. done.",
      "parentUuid": "cc40efc2_f534e00d",
      "range": {
        "startLine": 530,
        "startChar": 17,
        "endLine": 530,
        "endChar": 20
      },
      "revId": "8d90b56fd53aa8de1d7ae83a5c89fe0ed7ee1100",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}